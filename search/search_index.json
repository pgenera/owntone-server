{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"OwnTone \u00b6 OwnTone is an open source (audio) media server for GNU/Linux, FreeBSD and MacOS. It allows sharing and streaming your media library to iTunes (DAAP 1 ), Roku (RSP), AirPlay devices (multiroom), Chromecast and also supports local playback. You can control OwnTone via its web interface, Apple Remote (and compatible DAAP/DACP clients), MPD clients or via its JSON API. Besides serving your local music, podcast and audiobook media files, OwnTone supports internet radios and Spotify (requires Spotify premium account). Prior to version 28, OwnTone was called forked-daapd, which again was a rewrite of mt-daapd (Firefly Media Server). OwnTone is written in C with a web interface written in Vue.js. Features \u00b6 Stream to AirPlay (synchronized multiroom) and Chromecast devices Share local library with iTunes and Roku Local audio playback with ALSA or PulseAudio Supports multiple different clients: Remote apps like Apple Remote (iOS) or Retune (Android) Integrated mobile friendly web interface MPD clients Supports music and audiobook files, podcast files and RSS and internet radio Supports audio files in most formats Supports playing your Spotify library (requires Spotify premium account) Runs on low power devices like the Raspberry Pi (You can find more screenshots from OwnTone's web interface here ) Looking for help? \u00b6 Before you continue, make sure you know what version of OwnTone you have, and what features it was built with (e.g. Spotify support). How to find out? Go to the web interface and check. No web interface? Then check the top of OwnTone's log file (usually /var/log/owntone.log). Note that you are viewing a snapshot of the instructions that may or may not match the version of OwnTone that you are using. If you are looking for help on building OwnTone (not using it), then please see the documentation on Building from Source . References \u00b6 You can find source and documentation, also for older versions, here: https://github.com/owntone/owntone-server.git DAAP stands for Digital Audio Access Protocol which is the protocol used by iTunes and friends to share/stream media libraries over the network. \u21a9","title":"Home"},{"location":"#owntone","text":"OwnTone is an open source (audio) media server for GNU/Linux, FreeBSD and MacOS. It allows sharing and streaming your media library to iTunes (DAAP 1 ), Roku (RSP), AirPlay devices (multiroom), Chromecast and also supports local playback. You can control OwnTone via its web interface, Apple Remote (and compatible DAAP/DACP clients), MPD clients or via its JSON API. Besides serving your local music, podcast and audiobook media files, OwnTone supports internet radios and Spotify (requires Spotify premium account). Prior to version 28, OwnTone was called forked-daapd, which again was a rewrite of mt-daapd (Firefly Media Server). OwnTone is written in C with a web interface written in Vue.js.","title":"OwnTone"},{"location":"#features","text":"Stream to AirPlay (synchronized multiroom) and Chromecast devices Share local library with iTunes and Roku Local audio playback with ALSA or PulseAudio Supports multiple different clients: Remote apps like Apple Remote (iOS) or Retune (Android) Integrated mobile friendly web interface MPD clients Supports music and audiobook files, podcast files and RSS and internet radio Supports audio files in most formats Supports playing your Spotify library (requires Spotify premium account) Runs on low power devices like the Raspberry Pi (You can find more screenshots from OwnTone's web interface here )","title":"Features"},{"location":"#looking-for-help","text":"Before you continue, make sure you know what version of OwnTone you have, and what features it was built with (e.g. Spotify support). How to find out? Go to the web interface and check. No web interface? Then check the top of OwnTone's log file (usually /var/log/owntone.log). Note that you are viewing a snapshot of the instructions that may or may not match the version of OwnTone that you are using. If you are looking for help on building OwnTone (not using it), then please see the documentation on Building from Source .","title":"Looking for help?"},{"location":"#references","text":"You can find source and documentation, also for older versions, here: https://github.com/owntone/owntone-server.git DAAP stands for Digital Audio Access Protocol which is the protocol used by iTunes and friends to share/stream media libraries over the network. \u21a9","title":"References"},{"location":"artwork/","text":"Artwork \u00b6 OwnTone has support for PNG and JPEG artwork which is either: embedded in the media files placed as separate image files in the library made available online by the radio station For media in your library, OwnTone will try to locate album and artist artwork (group artwork) by the following procedure: if a file {artwork,cover,Folder}.{png,jpg} is found in one of the directories containing files that are part of the group, it is used as the artwork. The first file found is used, ordering is not guaranteed; failing that, if [directory name].{png,jpg} is found in one of the directories containing files that are part of the group, it is used as the artwork. The first file found is used, ordering is not guaranteed; failing that, individual files are examined and the first file found with an embedded artwork is used. Here again, ordering is not guaranteed. {artwork,cover,Folder} are the default, you can add other base names in the configuration file. Here you can also enable/disable support for individual file artwork (instead of using the same artwork for all tracks in an entire album). For playlists in your library, say /foo/bar.m3u, then for any http streams in the list, OwnTone will look for /foo/bar.{jpg,png}. You can use symlinks for the artwork files. OwnTone caches artwork in a separate cache file. The default path is /var/cache/owntone/cache.db and can be configured in the configuration file. The cache.db file can be deleted without losing the library and pairing informations.","title":"Artwork"},{"location":"artwork/#artwork","text":"OwnTone has support for PNG and JPEG artwork which is either: embedded in the media files placed as separate image files in the library made available online by the radio station For media in your library, OwnTone will try to locate album and artist artwork (group artwork) by the following procedure: if a file {artwork,cover,Folder}.{png,jpg} is found in one of the directories containing files that are part of the group, it is used as the artwork. The first file found is used, ordering is not guaranteed; failing that, if [directory name].{png,jpg} is found in one of the directories containing files that are part of the group, it is used as the artwork. The first file found is used, ordering is not guaranteed; failing that, individual files are examined and the first file found with an embedded artwork is used. Here again, ordering is not guaranteed. {artwork,cover,Folder} are the default, you can add other base names in the configuration file. Here you can also enable/disable support for individual file artwork (instead of using the same artwork for all tracks in an entire album). For playlists in your library, say /foo/bar.m3u, then for any http streams in the list, OwnTone will look for /foo/bar.{jpg,png}. You can use symlinks for the artwork files. OwnTone caches artwork in a separate cache file. The default path is /var/cache/owntone/cache.db and can be configured in the configuration file. The cache.db file can be deleted without losing the library and pairing informations.","title":"Artwork"},{"location":"getting-started/","text":"Getting started \u00b6 After installation (see Installation ) do the following: Edit the configuration file (usually /etc/owntone.conf ) to suit your needs Start or restart the server (usually /etc/init.d/owntone restart ) Go to the web interface http://owntone.local:3689 , or, if that won't work, to http://[your_server_address_here]:3689 Wait for the library scan to complete If you will be using a remote, e.g. Apple Remote: Start the remote, go to Settings, Add Library Enter the pair code in the web interface (update the page with F5 if it does not automatically pick up the pairing request)","title":"Getting started"},{"location":"getting-started/#getting-started","text":"After installation (see Installation ) do the following: Edit the configuration file (usually /etc/owntone.conf ) to suit your needs Start or restart the server (usually /etc/init.d/owntone restart ) Go to the web interface http://owntone.local:3689 , or, if that won't work, to http://[your_server_address_here]:3689 Wait for the library scan to complete If you will be using a remote, e.g. Apple Remote: Start the remote, go to Settings, Add Library Enter the pair code in the web interface (update the page with F5 if it does not automatically pick up the pairing request)","title":"Getting started"},{"location":"installation/","text":"Installation instructions for OwnTone \u00b6 This document contains instructions for installing OwnTone from the git tree. If you just want to install from a release tarball, you don't need the build tools (git, autotools, autoconf, automake, gawk, gperf, gettext, bison and flex), and you can skip the autoreconf step. The source for this version of OwnTone can be found here: owntone/owntone-server Quick version for Raspberry Pi OS \u00b6 See the instructions here: OwnTone server (iTunes server) - Raspberry Pi Forums Quick version for Debian/Ubuntu users \u00b6 If you are the lucky kind, this should get you all the required tools and libraries: sudo apt-get install \\ build-essential git autotools-dev autoconf automake libtool gettext gawk \\ gperf bison flex libconfuse-dev libunistring-dev libsqlite3-dev \\ libavcodec-dev libavformat-dev libavfilter-dev libswscale-dev libavutil-dev \\ libasound2-dev libmxml-dev libgcrypt20-dev libavahi-client-dev zlib1g-dev \\ libevent-dev libplist-dev libsodium-dev libjson-c-dev libwebsockets-dev \\ libcurl4-openssl-dev libprotobuf-c-dev Note that OwnTone will also work with other versions and flavours of libgcrypt and libcurl, so the above are just suggestions. The following features require extra packages, and that you add a configure argument when you run ./configure: Feature Configure argument Packages Chromecast --enable-chromecast libgnutls*-dev Pulseaudio --with-pulseaudio libpulse-dev These features can be disabled saving you package dependencies: Feature Configure argument Packages Spotify (built-in) --disable-spotify libprotobuf-c-dev Player web UI --disable-webinterface libwebsockets-dev Live web UI --without-libwebsockets libwebsockets-dev Then run the following (adding configure arguments for optional features): git clone https://github.com/owntone/owntone-server.git cd owntone-server autoreconf -i ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user make sudo make install Using --enable-install-user means that make install will also add system user and group for owntone. With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Now edit /etc/owntone.conf . Note the guide at the top highlighting which settings that normally require modification. Start the server with sudo systemctl start owntone and check that it is running with sudo systemctl status owntone . See the Documentation for usage information. Quick version for Fedora \u00b6 If you haven't already enabled the free RPM fusion packages do that, since you will need ffmpeg. You can google how to do that. Then run: sudo dnf install \\ git automake autoconf gettext-devel gperf gawk libtool bison flex \\ sqlite-devel libconfuse-devel libunistring-devel mxml-devel libevent-devel \\ avahi-devel libgcrypt-devel zlib-devel alsa-lib-devel ffmpeg-devel \\ libplist-devel libsodium-devel json-c-devel libwebsockets-devel \\ libcurl-devel protobuf-c-devel Clone the OwnTone repo: git clone https://github.com/owntone/owntone-server.git cd owntone-server Then run the following: autoreconf -i ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user make sudo make install Using --enable-install-user means that make install will also add system user and group for owntone. With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Now edit /etc/owntone.conf . Note the guide at the top highlighting which settings that normally require modification. Start the server with sudo systemctl start owntone and check that it is running with sudo systemctl status owntone . See the Documentation for usage information. Quick version for FreeBSD \u00b6 There is a script in the 'scripts' folder that will at least attempt to do all the work for you. And should the script not work for you, you can still look through it and use it as an installation guide. Quick version for macOS (using Homebrew) \u00b6 This workflow file used for building OwnTone via Github actions includes all the steps that you need to execute: .github/workflows/macos.yml \"Quick\" version for macOS (using macports) \u00b6 Caution: 1) this approach may be out of date, consider using the Homebrew method above since it is continuously tested. 2) macports requires many downloads and lots of time to install (and sometimes build) ports... you'll want a decent network connection and some patience! Install macports (which requires Xcode): https://www.macports.org/install.php sudo port install \\ autoconf automake libtool pkgconfig git gperf bison flex libgcrypt \\ libunistring libconfuse ffmpeg libevent json-c libwebsockets curl \\ libplist libsodium protobuf-c Download, configure, build and install the Mini-XML library: http://www.msweet.org/projects.php/Mini-XML Download, configure, build and install the libinotify library: https://github.com/libinotify-kqueue/libinotify-kqueue Add the following to .bashrc : # add /usr/local to pkg-config path export PKG_CONFIG_PATH = /usr/local/lib/pkgconfig:/opt/local/lib/pkgconfig # libunistring doesn't support pkg-config, set overrides export LIBUNISTRING_CFLAGS = -I/opt/local/include export LIBUNISTRING_LIBS = \"-L/opt/local/lib -lunistring\" Optional features require the following additional ports: Feature Configure argument Ports Chromecast --enable-chromecast gnutls Pulseaudio --with-pulseaudio pulseaudio Clone the OwnTone repo: git clone https://github.com/owntone/owntone-server.git cd owntone-server Finally, configure, build and install, adding configure arguments for optional features: autoreconf -i ./configure make sudo make install Note: if for some reason you've installed the avahi port, you need to add --without-avahi to configure above. Edit /usr/local/etc/owntone.conf and change the uid to a nice system daemon (eg: unknown), and run the following: sudo mkdir -p /usr/local/var/run sudo mkdir -p /usr/local/var/log # or change logfile in conf sudo chown unknown /usr/local/var/cache/owntone # or change conf Run OwnTone: sudo /usr/local/sbin/owntone Verify it's running (you need to Ctrl + C to stop dns-sd): dns-sd -B _daap._tcp Long version - requirements \u00b6 Required tools: autotools: autoconf 2.63+, automake 1.10+, libtool 2.2. Run autoreconf -i at the top of the source tree to generate the build system. gettext: libunistring requires iconv and gettext provides the autotools macro definitions for iconv. gperf bison 3.0+ (yacc is not sufficient) flex (lex is not sufficient) Libraries: Avahi client libraries (avahi-client), 0.6.24 minimum from http://avahi.org/ sqlite3 3.5.0+ with unlock notify API enabled (read below) from http://sqlite.org/download.html ffmpeg (libav) from http://ffmpeg.org/ libconfuse from http://www.nongnu.org/confuse/ libevent 2.0+ (best with 2.1.4+) from http://libevent.org/ MiniXML (aka mxml or libmxml) from http://minixml.org/software.php gcrypt 1.2.0+ from http://gnupg.org/download/index.en.html#libgcrypt zlib from http://zlib.net/ libunistring 0.9.3+ from http://www.gnu.org/software/libunistring/#downloading libjson-c from https://github.com/json-c/json-c/wiki libcurl from http://curl.haxx.se/libcurl/ libplist 0.16+ from http://github.com/JonathanBeck/libplist/downloads libsodium from https://download.libsodium.org/doc/ libprotobuf-c from https://github.com/protobuf-c/protobuf-c/wiki libasound (optional - ALSA local audio) often already installed as part of your distro libpulse (optional - Pulseaudio local audio) from https://www.freedesktop.org/wiki/Software/PulseAudio/Download/ libgnutls (optional - Chromecast support) from http://www.gnutls.org/ libwebsockets 2.0.2+ (optional - websocket support) from https://libwebsockets.org/ If using binary packages, remember that you need the development packages to build OwnTone (usually named -dev or -devel). sqlite3 needs to be built with support for the unlock notify API; this isn't always the case in binary packages, so you may need to rebuild sqlite3 to enable the unlock notify API (you can check for the presence of the sqlite3_unlock_notify symbol in the sqlite3 library). Refer to the sqlite3 documentation, look for SQLITE_ENABLE_UNLOCK_NOTIFY . Long version - building and installing \u00b6 Start by generating the build system by running autoreconf -i . This will generate the configure script and Makefile.in . To display the configure options run ./configure --help . Support for Spotify is optional. Use --disable-spotify to disable this feature. Support for LastFM scrobbling is optional. Use --enable-lastfm to enable this feature. Support for the MPD protocol is optional. Use --disable-mpd to disable this feature. Support for Chromecast devices is optional. Use --enable-chromecast to enable this feature. The player web interface is optional. Use --disable-webinterface to disable this feature. If enabled, sudo make install will install the prebuild html, js, css files. The prebuild files are: htdocs/index.html htdocs/player/* The source for the player web interface is located under the web-src folder and requires nodejs >= 6.0 to be built. In the web-src folder run npm install to install all dependencies for the player web interface. After that run npm run build . This will build the web interface and update the htdocs folder. (See Web interface for more informations) Building with libwebsockets is required if you want the web interface. It will be enabled if the library is present (with headers). Use --without-libwebsockets to disable. Building with Pulseaudio is optional. It will be enabled if the library is present (with headers). Use --without-pulseaudio to disable. Recommended build settings: ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user After configure run the usual make, and if that went well, sudo make install . With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Using --enable-install-user means that make install will also add a system user and group for owntone. After installation: edit the configuration file, /etc/owntone.conf make sure the Avahi daemon is installed and running (Debian: apt install avahi-daemon ) OwnTone will drop privileges to any user you specify in the configuration file if it's started as root. This user must have read permission to your library and read/write permissions to the database location ( $localstatedir/cache/owntone by default). Non-priviliged user version (for development) \u00b6 OwnTone is meant to be run as system wide daemon, but for development purposes you may want to run it isolated to your regular user. The following description assumes that you want all runtime data stored in $HOME/owntone_data and the source in $HOME/projects/owntone-server . Prepare directories for runtime data: mkdir -p $HOME /owntone_data/etc mkdir -p $HOME /owntone_data/media Copy one or more mp3 file to test with to owntone_data/media . Checkout OwnTone and configure build: cd $HOME /projects git clone https://github.com/owntone/owntone-server.git cd owntone-server autoreconf -vi ./configure --prefix = $HOME /owntone_data/usr --sysconfdir = $HOME /owntone_data/etc --localstatedir = $HOME /owntone_data/var Build and install runtime: make install Edit owntone_data/etc/owntone.conf , find the following configuration settings and set them to these values: uid = ${USER} loglevel = \"debug\" directories = { \"${HOME}/owntone_data/media\" } Run the server: ./src/owntone -f (you can also use the copy of the binary in $HOME/owntone_data/usr/sbin )","title":"Installation"},{"location":"installation/#installation-instructions-for-owntone","text":"This document contains instructions for installing OwnTone from the git tree. If you just want to install from a release tarball, you don't need the build tools (git, autotools, autoconf, automake, gawk, gperf, gettext, bison and flex), and you can skip the autoreconf step. The source for this version of OwnTone can be found here: owntone/owntone-server","title":"Installation instructions for OwnTone"},{"location":"installation/#quick-version-for-raspberry-pi-os","text":"See the instructions here: OwnTone server (iTunes server) - Raspberry Pi Forums","title":"Quick version for Raspberry Pi OS"},{"location":"installation/#quick-version-for-debianubuntu-users","text":"If you are the lucky kind, this should get you all the required tools and libraries: sudo apt-get install \\ build-essential git autotools-dev autoconf automake libtool gettext gawk \\ gperf bison flex libconfuse-dev libunistring-dev libsqlite3-dev \\ libavcodec-dev libavformat-dev libavfilter-dev libswscale-dev libavutil-dev \\ libasound2-dev libmxml-dev libgcrypt20-dev libavahi-client-dev zlib1g-dev \\ libevent-dev libplist-dev libsodium-dev libjson-c-dev libwebsockets-dev \\ libcurl4-openssl-dev libprotobuf-c-dev Note that OwnTone will also work with other versions and flavours of libgcrypt and libcurl, so the above are just suggestions. The following features require extra packages, and that you add a configure argument when you run ./configure: Feature Configure argument Packages Chromecast --enable-chromecast libgnutls*-dev Pulseaudio --with-pulseaudio libpulse-dev These features can be disabled saving you package dependencies: Feature Configure argument Packages Spotify (built-in) --disable-spotify libprotobuf-c-dev Player web UI --disable-webinterface libwebsockets-dev Live web UI --without-libwebsockets libwebsockets-dev Then run the following (adding configure arguments for optional features): git clone https://github.com/owntone/owntone-server.git cd owntone-server autoreconf -i ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user make sudo make install Using --enable-install-user means that make install will also add system user and group for owntone. With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Now edit /etc/owntone.conf . Note the guide at the top highlighting which settings that normally require modification. Start the server with sudo systemctl start owntone and check that it is running with sudo systemctl status owntone . See the Documentation for usage information.","title":"Quick version for Debian/Ubuntu users"},{"location":"installation/#quick-version-for-fedora","text":"If you haven't already enabled the free RPM fusion packages do that, since you will need ffmpeg. You can google how to do that. Then run: sudo dnf install \\ git automake autoconf gettext-devel gperf gawk libtool bison flex \\ sqlite-devel libconfuse-devel libunistring-devel mxml-devel libevent-devel \\ avahi-devel libgcrypt-devel zlib-devel alsa-lib-devel ffmpeg-devel \\ libplist-devel libsodium-devel json-c-devel libwebsockets-devel \\ libcurl-devel protobuf-c-devel Clone the OwnTone repo: git clone https://github.com/owntone/owntone-server.git cd owntone-server Then run the following: autoreconf -i ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user make sudo make install Using --enable-install-user means that make install will also add system user and group for owntone. With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Now edit /etc/owntone.conf . Note the guide at the top highlighting which settings that normally require modification. Start the server with sudo systemctl start owntone and check that it is running with sudo systemctl status owntone . See the Documentation for usage information.","title":"Quick version for Fedora"},{"location":"installation/#quick-version-for-freebsd","text":"There is a script in the 'scripts' folder that will at least attempt to do all the work for you. And should the script not work for you, you can still look through it and use it as an installation guide.","title":"Quick version for FreeBSD"},{"location":"installation/#quick-version-for-macos-using-homebrew","text":"This workflow file used for building OwnTone via Github actions includes all the steps that you need to execute: .github/workflows/macos.yml","title":"Quick version for macOS (using Homebrew)"},{"location":"installation/#quick-version-for-macos-using-macports","text":"Caution: 1) this approach may be out of date, consider using the Homebrew method above since it is continuously tested. 2) macports requires many downloads and lots of time to install (and sometimes build) ports... you'll want a decent network connection and some patience! Install macports (which requires Xcode): https://www.macports.org/install.php sudo port install \\ autoconf automake libtool pkgconfig git gperf bison flex libgcrypt \\ libunistring libconfuse ffmpeg libevent json-c libwebsockets curl \\ libplist libsodium protobuf-c Download, configure, build and install the Mini-XML library: http://www.msweet.org/projects.php/Mini-XML Download, configure, build and install the libinotify library: https://github.com/libinotify-kqueue/libinotify-kqueue Add the following to .bashrc : # add /usr/local to pkg-config path export PKG_CONFIG_PATH = /usr/local/lib/pkgconfig:/opt/local/lib/pkgconfig # libunistring doesn't support pkg-config, set overrides export LIBUNISTRING_CFLAGS = -I/opt/local/include export LIBUNISTRING_LIBS = \"-L/opt/local/lib -lunistring\" Optional features require the following additional ports: Feature Configure argument Ports Chromecast --enable-chromecast gnutls Pulseaudio --with-pulseaudio pulseaudio Clone the OwnTone repo: git clone https://github.com/owntone/owntone-server.git cd owntone-server Finally, configure, build and install, adding configure arguments for optional features: autoreconf -i ./configure make sudo make install Note: if for some reason you've installed the avahi port, you need to add --without-avahi to configure above. Edit /usr/local/etc/owntone.conf and change the uid to a nice system daemon (eg: unknown), and run the following: sudo mkdir -p /usr/local/var/run sudo mkdir -p /usr/local/var/log # or change logfile in conf sudo chown unknown /usr/local/var/cache/owntone # or change conf Run OwnTone: sudo /usr/local/sbin/owntone Verify it's running (you need to Ctrl + C to stop dns-sd): dns-sd -B _daap._tcp","title":"\"Quick\" version for macOS (using macports)"},{"location":"installation/#long-version-requirements","text":"Required tools: autotools: autoconf 2.63+, automake 1.10+, libtool 2.2. Run autoreconf -i at the top of the source tree to generate the build system. gettext: libunistring requires iconv and gettext provides the autotools macro definitions for iconv. gperf bison 3.0+ (yacc is not sufficient) flex (lex is not sufficient) Libraries: Avahi client libraries (avahi-client), 0.6.24 minimum from http://avahi.org/ sqlite3 3.5.0+ with unlock notify API enabled (read below) from http://sqlite.org/download.html ffmpeg (libav) from http://ffmpeg.org/ libconfuse from http://www.nongnu.org/confuse/ libevent 2.0+ (best with 2.1.4+) from http://libevent.org/ MiniXML (aka mxml or libmxml) from http://minixml.org/software.php gcrypt 1.2.0+ from http://gnupg.org/download/index.en.html#libgcrypt zlib from http://zlib.net/ libunistring 0.9.3+ from http://www.gnu.org/software/libunistring/#downloading libjson-c from https://github.com/json-c/json-c/wiki libcurl from http://curl.haxx.se/libcurl/ libplist 0.16+ from http://github.com/JonathanBeck/libplist/downloads libsodium from https://download.libsodium.org/doc/ libprotobuf-c from https://github.com/protobuf-c/protobuf-c/wiki libasound (optional - ALSA local audio) often already installed as part of your distro libpulse (optional - Pulseaudio local audio) from https://www.freedesktop.org/wiki/Software/PulseAudio/Download/ libgnutls (optional - Chromecast support) from http://www.gnutls.org/ libwebsockets 2.0.2+ (optional - websocket support) from https://libwebsockets.org/ If using binary packages, remember that you need the development packages to build OwnTone (usually named -dev or -devel). sqlite3 needs to be built with support for the unlock notify API; this isn't always the case in binary packages, so you may need to rebuild sqlite3 to enable the unlock notify API (you can check for the presence of the sqlite3_unlock_notify symbol in the sqlite3 library). Refer to the sqlite3 documentation, look for SQLITE_ENABLE_UNLOCK_NOTIFY .","title":"Long version - requirements"},{"location":"installation/#long-version-building-and-installing","text":"Start by generating the build system by running autoreconf -i . This will generate the configure script and Makefile.in . To display the configure options run ./configure --help . Support for Spotify is optional. Use --disable-spotify to disable this feature. Support for LastFM scrobbling is optional. Use --enable-lastfm to enable this feature. Support for the MPD protocol is optional. Use --disable-mpd to disable this feature. Support for Chromecast devices is optional. Use --enable-chromecast to enable this feature. The player web interface is optional. Use --disable-webinterface to disable this feature. If enabled, sudo make install will install the prebuild html, js, css files. The prebuild files are: htdocs/index.html htdocs/player/* The source for the player web interface is located under the web-src folder and requires nodejs >= 6.0 to be built. In the web-src folder run npm install to install all dependencies for the player web interface. After that run npm run build . This will build the web interface and update the htdocs folder. (See Web interface for more informations) Building with libwebsockets is required if you want the web interface. It will be enabled if the library is present (with headers). Use --without-libwebsockets to disable. Building with Pulseaudio is optional. It will be enabled if the library is present (with headers). Use --without-pulseaudio to disable. Recommended build settings: ./configure --prefix = /usr --sysconfdir = /etc --localstatedir = /var --enable-install-user After configure run the usual make, and if that went well, sudo make install . With the above configure arguments, a systemd service file will be installed to /etc/systemd/system/owntone.service so that the server will start on boot. Use --disable-install-systemd if you don't want that. Using --enable-install-user means that make install will also add a system user and group for owntone. After installation: edit the configuration file, /etc/owntone.conf make sure the Avahi daemon is installed and running (Debian: apt install avahi-daemon ) OwnTone will drop privileges to any user you specify in the configuration file if it's started as root. This user must have read permission to your library and read/write permissions to the database location ( $localstatedir/cache/owntone by default).","title":"Long version - building and installing"},{"location":"installation/#non-priviliged-user-version-for-development","text":"OwnTone is meant to be run as system wide daemon, but for development purposes you may want to run it isolated to your regular user. The following description assumes that you want all runtime data stored in $HOME/owntone_data and the source in $HOME/projects/owntone-server . Prepare directories for runtime data: mkdir -p $HOME /owntone_data/etc mkdir -p $HOME /owntone_data/media Copy one or more mp3 file to test with to owntone_data/media . Checkout OwnTone and configure build: cd $HOME /projects git clone https://github.com/owntone/owntone-server.git cd owntone-server autoreconf -vi ./configure --prefix = $HOME /owntone_data/usr --sysconfdir = $HOME /owntone_data/etc --localstatedir = $HOME /owntone_data/var Build and install runtime: make install Edit owntone_data/etc/owntone.conf , find the following configuration settings and set them to these values: uid = ${USER} loglevel = \"debug\" directories = { \"${HOME}/owntone_data/media\" } Run the server: ./src/owntone -f (you can also use the copy of the binary in $HOME/owntone_data/usr/sbin )","title":"Non-priviliged user version (for development)"},{"location":"json-api/","text":"OwnTone API Endpoint Reference \u00b6 Available API endpoints: Player : control playback, volume, shuffle/repeat modes Outputs / Speakers : list available outputs and enable/disable outputs Queue : list, add or modify the current queue Library : list playlists, artists, albums and tracks from your library or trigger library rescan Search : search for playlists, artists, albums and tracks Server info : get server information Settings : list and change settings for the player web interface Push notifications : receive push notifications JSON-Object model: Queue item Playlist Artist Album Track Player \u00b6 Method Endpoint Description GET /api/player Get player status PUT /api/player/play, /api/player/pause, /api/player/stop, /api/player/toggle Start, pause or stop playback PUT /api/player/next, /api/player/previous Skip forward or backward PUT /api/player/shuffle Set shuffle mode PUT /api/player/consume Set consume mode PUT /api/player/repeat Set repeat mode PUT /api/player/volume Set master volume or volume for a specific output PUT /api/player/seek Seek to a position in the currently playing track Get player status \u00b6 Endpoint GET /api/player Response Key Type Value state string play , pause or stop repeat string off , all or single consume boolean true if consume mode is enabled shuffle boolean true if shuffle mode is enabled volume integer Master volume in percent (0 - 100) item_id integer The current playing queue item id item_length_ms integer Total length in milliseconds of the current queue item item_progress_ms integer Progress into the current queue item in milliseconds Example curl -X GET \"http://localhost:3689/api/player\" { \"state\" : \"pause\" , \"repeat\" : \"off\" , \"consume\" : false , \"shuffle\" : false , \"volume\" : 50 , \"item_id\" : 269 , \"item_length_ms\" : 278093 , \"item_progress_ms\" : 3674 } Control playback \u00b6 Start or resume, pause, stop playback. Endpoint PUT /api/player/play PUT /api/player/pause PUT /api/player/stop PUT /api/player/toggle Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/play\" curl -X PUT \"http://localhost:3689/api/player/pause\" curl -X PUT \"http://localhost:3689/api/player/stop\" curl -X PUT \"http://localhost:3689/api/player/toggle\" Skip tracks \u00b6 Skip forward or backward Endpoint PUT /api/player/next PUT /api/player/previous Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/next\" curl -X PUT \"http://localhost:3689/api/player/previous\" Set shuffle mode \u00b6 Enable or disable shuffle mode Endpoint PUT /api/player/shuffle Query parameters Parameter Value state The new shuffle state, should be either true or false Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/shuffle?state=true\" Set consume mode \u00b6 Enable or disable consume mode Endpoint PUT /api/player/consume Query parameters Parameter Value state The new consume state, should be either true or false Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/consume?state=true\" Set repeat mode \u00b6 Change repeat mode Endpoint PUT /api/player/repeat Query parameters Parameter Value state The new repeat mode, should be either off , all or single Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/repeat?state=all\" Set volume \u00b6 Change master volume or volume of a specific output. Endpoint PUT /api/player/volume Query parameters Parameter Value volume The new volume (0 - 100) step The increase or decrease volume by the given amount (-100 - 100) output_id (Optional) If an output id is given, only the volume of this output will be changed. If parameter is omited, the master volume will be changed. Either volume or step must be present as query parameter Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/volume?volume=50\" curl -X PUT \"http://localhost:3689/api/player/volume?step=-5\" curl -X PUT \"http://localhost:3689/api/player/volume?volume=50&output_id=0\" Seek \u00b6 Seek to a position in the currently playing track. Endpoint PUT /api/player/seek Query parameters Parameter Value position_ms The new position in milliseconds to seek to seek_ms A relative amount of milliseconds to seek to Response On success returns the HTTP 204 No Content success status response code. Example Seek to position: curl -X PUT \"http://localhost:3689/api/player/seek?position_ms=2000\" Relative seeking (skip 30 seconds backwards): curl -X PUT \"http://localhost:3689/api/player/seek?seek_ms=-30000\" Outputs / Speakers \u00b6 Method Endpoint Description GET /api/outputs Get a list of available outputs PUT /api/outputs/set Set enabled outputs GET /api/outputs/{id} Get an output PUT /api/outputs/{id} Change an output setting PUT /api/outputs/{id}/toggle Enable or disable an output, depending on the current state Get a list of available outputs \u00b6 Endpoint GET /api/outputs Response Key Type Value outputs array Array of output objects output object Key Type Value id string Output id name string Output name type string Type of the output: AirPlay , Chromecast , ALSA , Pulseaudio , fifo selected boolean true if output is enabled has_password boolean true if output is password protected requires_auth boolean true if output requires authentication needs_auth_key boolean true if output requires an authorization key (device verification) volume integer Volume in percent (0 - 100) Example curl -X GET \"http://localhost:3689/api/outputs\" { \"outputs\" : [ { \"id\" : \"123456789012345\" , \"name\" : \"kitchen\" , \"type\" : \"AirPlay\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 0 }, { \"id\" : \"0\" , \"name\" : \"Computer\" , \"type\" : \"ALSA\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 19 }, { \"id\" : \"100\" , \"name\" : \"daapd-fifo\" , \"type\" : \"fifo\" , \"selected\" : false , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 0 } ] } Set enabled outputs \u00b6 Set the enabled outputs by passing an array of output ids. The server enables all outputs with the given ids and disables the remaining outputs. Endpoint PUT /api/outputs/set Body parameters Parameter Type Value outputs array Array of output ids Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/set\" --data \"{\\\"outputs\\\":[\\\"198018693182577\\\",\\\"0\\\"]}\" Get an output \u00b6 Get an output Endpoint GET /api/outputs/{id} Path parameters Parameter Value id Output id Response On success returns the HTTP 200 OK success status response code. With the response body holding the output object . Example curl -X GET \"http://localhost:3689/api/outputs/0\" { \"id\" : \"0\" , \"name\" : \"Computer\" , \"type\" : \"ALSA\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 3 } Change an output \u00b6 Enable or disable an output and change its volume. Endpoint PUT /api/outputs/{id} Path parameters Parameter Value id Output id Body parameters Parameter Type Value selected boolean (Optional) true to enable and false to disable the output volume integer (Optional) Volume in percent (0 - 100) pin string (Optional) PIN for device verification Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/0\" --data \"{\\\"selected\\\":true, \\\"volume\\\": 50}\" Toggle an output \u00b6 Enable or disable an output, depending on its current state Endpoint PUT /api/outputs/{id}/toggle Path parameters Parameter Value id Output id Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/0/toggle\" Queue \u00b6 Method Endpoint Description GET /api/queue Get a list of queue items PUT /api/queue/clear Remove all items from the queue POST /api/queue/items/add Add items to the queue PUT /api/queue/items/{id}|now_playing Updating a queue item in the queue DELETE /api/queue/items/{id} Remove a queue item from the queue List queue items \u00b6 Lists the items in the current queue Endpoint GET /api/queue Query parameters Parameter Value id (Optional) If a queue item id is given, only the item with the id will be returend. Use id=now_playing to get the currently playing item. start (Optional) If a start and an end position is given, only the items from start (included) to end (excluded) will be returned. If only a start position is given, only the item at this position will be returned. end (Optional) See start parameter Response Key Type Value version integer Version number of the current queue count integer Number of items in the current queue items array Array of queue item objects Example curl -X GET \"http://localhost:3689/api/queue\" { \"version\" : 833 , \"count\" : 20 , \"items\" : [ { \"id\" : 12122 , \"position\" : 0 , \"track_id\" : 10749 , \"title\" : \"Angels\" , \"artist\" : \"The xx\" , \"artist_sort\" : \"xx, The\" , \"album\" : \"Coexist\" , \"album_sort\" : \"Coexist\" , \"albumartist\" : \"The xx\" , \"albumartist_sort\" : \"xx, The\" , \"genre\" : \"Indie Rock\" , \"year\" : 2012 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 171735 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/The xx/Coexist/01 Angels.mp3\" , \"uri\" : \"library:track:10749\" }, ... ] } Clearing the queue \u00b6 Remove all items form the current queue Endpoint PUT /api/queue/clear Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/clear\" Adding items to the queue \u00b6 Add tracks, playlists artists or albums to the current queue Endpoint POST /api/queue/items/add Query parameters Parameter Value uris Comma seperated list of resource identifiers ( track , playlist , artist or album object uri ) expression A smart playlist query expression identifying the tracks that will be added to the queue. position (Optional) If a position is given, new items are inserted starting from this position into the queue. playback (Optional) If the playback parameter is set to start , playback will be started after adding the new items. playback_from_position (Optional) If the playback parameter is set to start , playback will be started with the queue item at the position given in playback_from_position . clear (Optional) If the clear parameter is set to true , the queue will be cleared before adding the new items. shuffle (Optional) If the shuffle parameter is set to true , the shuffle mode is activated. If it is set to something else, the shuffle mode is deactivated. To leave the shuffle mode untouched the parameter should be ommited. limit (Optional) Maximum number of tracks to add Either the uris or the expression parameter must be set. If both are set the uris parameter takes presedence and the expression parameter will be ignored. Response On success returns the HTTP 200 OK success status response code. Key Type Value count integer number of tracks added to the queue Example Add new items by uri: curl -X POST \"http://localhost:3689/api/queue/items/add?uris=library:playlist:68,library:artist:2932599850102967727\" { \"count\" : 42 } Add new items by query language: curl -X POST \"http://localhost:3689/api/queue/items/add?expression=media_kind+is+music\" { \"count\" : 42 } Clear current queue, add 10 new random tracks of genre Pop and start playback curl -X POST \"http://localhost:3689/api/queue/items/add?limit=10&clear=true&playback=start&expression=genre+is+%22Pop%22+order+by+random+desc\" { \"count\" : 10 } Updating a queue item \u00b6 Update or move a queue item in the current queue Endpoint PUT /api/queue/items/{id} or PUT /api/queue/items/now_playing Path parameters Parameter Value id Queue item id (or use now_playing to update the currenly playing track) Query parameters Parameter Value new_position The new position for the queue item in the current queue. title New track title album New album title artist New artist album_artist New album artist composer New composer genre New genre artwork_url New URL to track artwork Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/items/3?new_position=0\" curl -X PUT \"http://localhost:3689/api/queue/items/3?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\" curl -X PUT \"http://localhost:3689/api/queue/items/now_playing?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\" Removing a queue item \u00b6 Remove a queue item from the current queue Endpoint DELETE /api/queue/items/{id} Path parameters Parameter Value id Queue item id Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/items/2\" Library \u00b6 Method Endpoint Description GET /api/library Get library information GET /api/library/playlists Get a list of playlists GET /api/library/playlists/{id} Get a playlist PUT /api/library/playlists/{id} Update a playlist attribute DELETE /api/library/playlists/{id} Delete a playlist GET /api/library/playlists/{id}/tracks Get list of tracks for a playlist PUT /api/library/playlists/{id}/tracks Update play count of tracks for a playlist GET /api/library/playlists/{id}/playlists Get list of playlists for a playlist folder GET /api/library/artists Get a list of artists GET /api/library/artists/{id} Get an artist GET /api/library/artists/{id}/albums Get list of albums for an artist GET /api/library/albums Get a list of albums GET /api/library/albums/{id} Get an album GET /api/library/albums/{id}/tracks Get list of tracks for an album GET /api/library/tracks/{id} Get a track GET /api/library/tracks/{id}/playlists Get list of playlists for a track PUT /api/library/tracks Update multiple track properties PUT /api/library/tracks/{id} Update single track properties GET /api/library/genres Get list of genres GET /api/library/count Get count of tracks, artists and albums GET /api/library/files Get list of directories in the local library POST /api/library/add Add an item to the library PUT /api/update Trigger a library rescan PUT /api/rescan Trigger a library metadata rescan PUT /api/library/backup Request library backup db Library information \u00b6 List some library stats Endpoint GET /api/library Response Key Type Value songs integer Array of playlist objects db_playtime integer Total playtime of all songs in the library artists integer Number of album artists in the library albums integer Number of albums in the library started_at string Server startup time (timestamp in ISO 8601 format) updated_at string Last library update (timestamp in ISO 8601 format) updating boolean true if library rescan is in progress Example curl -X GET \"http://localhost:3689/api/library\" { \"songs\" : 217 , \"db_playtime\" : 66811 , \"artists\" : 9 , \"albums\" : 19 , \"started_at\" : \"2018-11-19T19:06:08Z\" , \"updated_at\" : \"2018-11-19T19:06:16Z\" , \"updating\" : false } List playlists \u00b6 Lists all playlists in your library (does not return playlist folders) Endpoint GET /api/library/playlists Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlists to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists in the library offset integer Requested offset of the first playlist limit integer Requested maximum number of playlists Example curl -X GET \"http://localhost:3689/api/library/playlists\" { \"items\" : [ { \"id\" : 1 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } Get a playlist \u00b6 Get a specific playlists in your library Endpoint GET /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Response On success returns the HTTP 200 OK success status response code. With the response body holding the playlist object . Example curl -X GET \"http://localhost:3689/api/library/playlists/1\" { \"id\" : 1 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" } Update a playlist \u00b6 Update attributes of a specific playlists in your library Endpoint PUT /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Query parameters Parameter Value query_limit For RSS feeds, this sets how many podcasts to retrieve Example curl -X PUT \"http://localhost:3689/api/library/playlists/25?query_limit=20\" Delete a playlist \u00b6 Delete a playlist, e.g. a RSS feed Endpoint DELETE /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Example curl -X DELETE \"http://localhost:3689/api/library/playlists/25\" List playlist tracks \u00b6 Lists the tracks in a playlists Endpoint GET /api/library/playlists/{id}/tracks Path parameters Parameter Value id Playlist id Query parameters Parameter Value offset (Optional) Offset of the first track to return limit (Optional) Maximum number of tracks to return Response Key Type Value items array Array of track objects total integer Total number of tracks in the playlist offset integer Requested offset of the first track limit integer Requested maximum number of tracks Example curl -X GET \"http://localhost:3689/api/library/playlists/1/tracks\" { \"items\" : [ { \"id\" : 10766 , \"title\" : \"Solange wir tanzen\" , \"artist\" : \"Heinrich\" , \"artist_sort\" : \"Heinrich\" , \"album\" : \"Solange wir tanzen\" , \"album_sort\" : \"Solange wir tanzen\" , \"albumartist\" : \"Heinrich\" , \"albumartist_sort\" : \"Heinrich\" , \"genre\" : \"Electronica\" , \"year\" : 2014 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 223085 , \"play_count\" : 2 , \"skip_count\" : 1 , \"time_played\" : \"2018-02-23T10:31:20Z\" , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Heinrich/Solange wir tanzen/01 Solange wir tanzen.mp3\" , \"uri\" : \"library:track:10766\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } Update playlist tracks \u00b6 Updates the play count for tracks in a playlists Endpoint PUT /api/library/playlists/{id}/tracks Path parameters Parameter Value id Playlist id Query parameters Parameter Value play_count Either increment , played or reset . increment will increment play_count and update time_played , played will be like increment but only where play_count is 0, reset will set play_count and skip_count to zero and delete time_played and time_skipped Example curl -X PUT \"http://localhost:3689/api/library/playlists/1/tracks?play_count=played\" List playlists in a playlist folder \u00b6 Lists the playlists in a playlist folder Note : The root playlist folder has id 0. Endpoint GET /api/library/playlists/{id}/playlists Path parameters Parameter Value id Playlist id Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlist to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists in the playlist folder offset integer Requested offset of the first playlist limit integer Requested maximum number of playlist Example curl -X GET \"http://localhost:3689/api/library/playlists/0/tracks\" { \"items\" : [ { \"id\" : 11 , \"name\" : \"Spotify\" , \"path\" : \"spotify:playlistfolder\" , \"parent_id\" : \"0\" , \"smart_playlist\" : false , \"folder\" : true , \"uri\" : \"library:playlist:11\" }, { \"id\" : 8 , \"name\" : \"bytefm\" , \"path\" : \"/srv/music/Playlists/bytefm.m3u\" , \"parent_id\" : \"0\" , \"smart_playlist\" : false , \"folder\" : false , \"uri\" : \"library:playlist:8\" } ], \"total\" : 2 , \"offset\" : 0 , \"limit\" : -1 } List artists \u00b6 Lists the artists in your library Endpoint GET /api/library/artists Query parameters Parameter Value offset (Optional) Offset of the first artist to return limit (Optional) Maximum number of artists to return Response Key Type Value items array Array of artist objects total integer Total number of artists in the library offset integer Requested offset of the first artist limit integer Requested maximum number of artists Example curl -X GET \"http://localhost:3689/api/library/artists\" { \"items\" : [ { \"id\" : \"3815427709949443149\" , \"name\" : \"ABAY\" , \"name_sort\" : \"ABAY\" , \"album_count\" : 1 , \"track_count\" : 10 , \"length_ms\" : 2951554 , \"uri\" : \"library:artist:3815427709949443149\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } Get an artist \u00b6 Get a specific artist in your library Endpoint GET /api/library/artists/{id} Path parameters Parameter Value id Artist id Response On success returns the HTTP 200 OK success status response code. With the response body holding the artist object . Example curl -X GET \"http://localhost:3689/api/library/artists/3815427709949443149\" { \"id\" : \"3815427709949443149\" , \"name\" : \"ABAY\" , \"name_sort\" : \"ABAY\" , \"album_count\" : 1 , \"track_count\" : 10 , \"length_ms\" : 2951554 , \"uri\" : \"library:artist:3815427709949443149\" } List artist albums \u00b6 Lists the albums of an artist Endpoint GET /api/library/artists/{id}/albums Path parameters Parameter Value id Artist id Query parameters Parameter Value offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums of this artist offset integer Requested offset of the first album limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/library/artists/32561671101664759/albums\" { \"items\" : [ { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } List albums \u00b6 Lists the albums in your library Endpoint GET /api/library/albums Query parameters Parameter Value offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums in the library offset integer Requested offset of the first albums limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/library/albums\" { \"items\" : [ { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } Get an album \u00b6 Get a specific album in your library Endpoint GET /api/library/albums/{id} Path parameters Parameter Value id Album id Response On success returns the HTTP 200 OK success status response code. With the response body holding the album object . Example curl -X GET \"http://localhost:3689/api/library/albums/8009851123233197743\" { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" } List album tracks \u00b6 Lists the tracks in an album Endpoint GET /api/library/albums/{id}/tracks Path parameters Parameter Value id Album id Query parameters Parameter Value offset (Optional) Offset of the first track to return limit (Optional) Maximum number of tracks to return Response Key Type Value items array Array of track objects total integer Total number of tracks offset integer Requested offset of the first track limit integer Requested maximum number of tracks Example curl -X GET \"http://localhost:3689/api/library/albums/1/tracks\" { \"items\" : [ { \"id\" : 10766 , \"title\" : \"Solange wir tanzen\" , \"artist\" : \"Heinrich\" , \"artist_sort\" : \"Heinrich\" , \"album\" : \"Solange wir tanzen\" , \"album_sort\" : \"Solange wir tanzen\" , \"albumartist\" : \"Heinrich\" , \"albumartist_sort\" : \"Heinrich\" , \"genre\" : \"Electronica\" , \"year\" : 2014 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 223085 , \"play_count\" : 2 , \"last_time_played\" : \"2018-02-23T10:31:20Z\" , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Heinrich/Solange wir tanzen/01 Solange wir tanzen.mp3\" , \"uri\" : \"library:track:10766\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 } Get a track \u00b6 Get a specific track in your library Endpoint GET /api/library/tracks/{id} Path parameters Parameter Value id Track id Response On success returns the HTTP 200 OK success status response code. With the response body holding the track object . Example curl -X GET \"http://localhost:3689/api/library/track/1\" { \"id\" : 1 , \"title\" : \"Pardon Me\" , \"title_sort\" : \"Pardon Me\" , \"artist\" : \"Incubus\" , \"artist_sort\" : \"Incubus\" , \"album\" : \"Make Yourself\" , \"album_sort\" : \"Make Yourself\" , \"album_id\" : \"6683985628074308431\" , \"album_artist\" : \"Incubus\" , \"album_artist_sort\" : \"Incubus\" , \"album_artist_id\" : \"4833612337650426236\" , \"composer\" : \"Alex Katunich/Brandon Boyd/Chris Kilmore/Jose Antonio Pasillas II/Mike Einziger\" , \"genre\" : \"Alternative Rock\" , \"year\" : 2001 , \"track_number\" : 12 , \"disc_number\" : 1 , \"length_ms\" : 223170 , \"rating\" : 0 , \"usermark\" : 0 , \"play_count\" : 0 , \"skip_count\" : 0 , \"time_added\" : \"2019-01-20T11:58:29Z\" , \"date_released\" : \"2001-05-27\" , \"seek_ms\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Incubus/Make Yourself/12 Pardon Me.mp3\" , \"uri\" : \"library:track:1\" , \"artwork_url\" : \"/artwork/item/1\" } List playlists for a track \u00b6 Get the list of playlists that contain a track (does not return smart playlists) Endpoint GET /api/library/tracks/{id}/playlists Path parameters Parameter Value id Track id Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlist to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists offset integer Requested offset of the first playlist limit integer Requested maximum number of playlists Example curl -X GET \"http://localhost:3689/api/library/tracks/27/playlists\" { \"items\" : [ { \"id\" : 1 , \"name\" : \"playlist\" , \"path\" : \"/music/srv/playlist.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" }, ... ], \"total\" : 2 , \"offset\" : 0 , \"limit\" : -1 } Update track properties \u00b6 Change properties of one or more tracks (supported properties are \"rating\", \"play_count\" and \"usermark\") Endpoint PUT /api/library/tracks Body parameters Parameter Type Value tracks array Array of track objects Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT -d '{ \"tracks\": [ { \"id\": 1, \"rating\": 100, \"usermark\": 4 }, { \"id\": 2, \"usermark\": 3 } ] }' \"http://localhost:3689/api/library/tracks\" Endpoint PUT /api/library/tracks/{id} Path parameters Parameter Value id Track id Query parameters Parameter Value rating The new rating (0 - 100) play_count Either increment or reset . increment will increment play_count and update time_played , reset will set play_count and skip_count to zero and delete time_played and time_skipped usermark The new usermark (>= 0) Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/library/tracks/1?rating=100\" curl -X PUT \"http://localhost:3689/api/library/tracks/1?play_count=increment\" List genres \u00b6 Get list of genres Endpoint GET /api/library/genres Response Key Type Value items array Array of browse-info objects total integer Total number of genres in the library offset integer Requested offset of the first genre limit integer Requested maximum number of genres Example curl -X GET \"http://localhost:3689/api/library/genres\" { \"items\" : [ { \"name\" : \"Classical\" }, { \"name\" : \"Drum & Bass\" }, { \"name\" : \"Pop\" }, { \"name\" : \"Rock/Pop\" }, { \"name\" : \"'90s Alternative\" } ], \"total\" : 5 , \"offset\" : 0 , \"limit\" : -1 } List albums for genre \u00b6 Lists the albums in a genre Endpoint GET api/search?type=albums&expression=genre+is+\\\"{genre name}\\\"\" Query parameters Parameter Value genre genre name (uri encoded and html esc seq for chars: '/&) offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums in the library offset integer Requested offset of the first albums limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Pop\\\"\" curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Rock%2FPop\\\"\" # Rock/Pop curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Drum%20%26%20Bass\\\"\" # Drum & Bass curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"%2790s%20Alternative\\\"\" # '90 Alternative { \"albums\" : { \"items\" : [ { \"id\" : \"320189328729146437\" , \"name\" : \"Best Ever\" , \"name_sort\" : \"Best Ever\" , \"artist\" : \"ABC\" , \"artist_id\" : \"8760559201889050080\" , \"track_count\" : 1 , \"length_ms\" : 3631 , \"uri\" : \"library:album:320189328729146437\" }, { \"id\" : \"7964595866631625723\" , \"name\" : \"Greatest Hits\" , \"name_sort\" : \"Greatest Hits\" , \"artist\" : \"Marvin Gaye\" , \"artist_id\" : \"5261930703203735930\" , \"track_count\" : 2 , \"length_ms\" : 7262 , \"uri\" : \"library:album:7964595866631625723\" }, { \"id\" : \"3844610748145176456\" , \"name\" : \"The Very Best of Etta\" , \"name_sort\" : \"Very Best of Etta\" , \"artist\" : \"Etta James\" , \"artist_id\" : \"2627182178555864595\" , \"track_count\" : 1 , \"length_ms\" : 177926 , \"uri\" : \"library:album:3844610748145176456\" } ], \"total\" : 3 , \"offset\" : 0 , \"limit\" : -1 } } Get count of tracks, artists and albums \u00b6 Get information about the number of tracks, artists and albums and the total playtime Endpoint GET /api/library/count Query parameters Parameter Value expression (Optional) The smart playlist query expression, if this parameter is omitted returns the information for the whole library Response Key Type Value tracks integer Number of tracks matching the expression artists integer Number of artists matching the expression albums integer Number of albums matching the expression db_playtime integer Total playtime in milliseconds of all tracks matching the expression Example curl -X GET \"http://localhost:3689/api/library/count?expression=data_kind+is+file\" { \"tracks\" : 6811 , \"artists\" : 355 , \"albums\" : 646 , \"db_playtime\" : 1590767 } List local directories \u00b6 List the local directories and the directory contents (tracks and playlists) Endpoint GET /api/library/files Query parameters Parameter Value directory (Optional) A path to a directory in your local library. Response Key Type Value directories array Array of directory objects containing the sub directories tracks object paging object containing track objects that matches the directory playlists object paging object containing playlist objects that matches the directory Example curl -X GET \"http://localhost:3689/api/library/files?directory=/music/srv\" { \"directories\" : [ { \"path\" : \"/music/srv/Audiobooks\" }, { \"path\" : \"/music/srv/Music\" }, { \"path\" : \"/music/srv/Playlists\" }, { \"path\" : \"/music/srv/Podcasts\" } ], \"tracks\" : { \"items\" : [ { \"id\" : 1 , \"title\" : \"input.pipe\" , \"artist\" : \"Unknown artist\" , \"artist_sort\" : \"Unknown artist\" , \"album\" : \"Unknown album\" , \"album_sort\" : \"Unknown album\" , \"album_id\" : \"4201163758598356043\" , \"album_artist\" : \"Unknown artist\" , \"album_artist_sort\" : \"Unknown artist\" , \"album_artist_id\" : \"4187901437947843388\" , \"genre\" : \"Unknown genre\" , \"year\" : 0 , \"track_number\" : 0 , \"disc_number\" : 0 , \"length_ms\" : 0 , \"play_count\" : 0 , \"skip_count\" : 0 , \"time_added\" : \"2018-11-24T08:41:35Z\" , \"seek_ms\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"pipe\" , \"path\" : \"/music/srv/input.pipe\" , \"uri\" : \"library:track:1\" , \"artwork_url\" : \"/artwork/item/1\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : -1 }, \"playlists\" : { \"items\" : [ { \"id\" : 8 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : true , \"uri\" : \"library:playlist:8\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : -1 } } Trigger rescan \u00b6 Trigger a library rescan Endpoint PUT /api/update Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/update\" { \"songs\" : 217 , \"db_playtime\" : 66811 , \"artists\" : 9 , \"albums\" : 19 , \"started_at\" : \"2018-11-19T19:06:08Z\" , \"updated_at\" : \"2018-11-19T19:06:16Z\" , \"updating\" : false } Trigger metadata rescan \u00b6 Trigger a library metadata rescan even if files have not been updated. Maintenence method. Endpoint PUT /api/rescan Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/rescan\" Backup DB \u00b6 Request a library backup - configuration must be enabled and point to a valid writable path. Maintenance method. Endpoint PUT /api/library/backup Response On success returns the HTTP 200 OK success status response code. If backups are not enabled returns HTTP 503 Service Unavailable response code. Otherwise a HTTP 500 Internal Server Error response is returned. Example curl -X PUT \"http://localhost:3689/api/library/backup\" Search \u00b6 Method Endpoint Description GET /api/search Search for playlists, artists, albums, tracks,genres by a simple search term GET /api/search Search by complex query expression Search by search term \u00b6 Search for playlists, artists, albums, tracks, genres that include the given query in their title (case insensitive matching). Endpoint GET /api/search Query parameters Parameter Value query The search keyword type Comma separated list of the result types ( playlist , artist , album , track , genre ) media_kind (Optional) Filter results by media kind ( music , movie , podcast , audiobook , musicvideo , tvshow ). Filter only applies to artist, album and track result types. offset (Optional) Offset of the first item to return for each type limit (Optional) Maximum number of items to return for each type Response Key Type Value tracks object paging object containing track objects that matches the query artists object paging object containing artist objects that matches the query albums object paging object containing album objects that matches the query playlists object paging object containing playlist objects that matches the query Example Search for all tracks, artists, albums and playlists that contain \"the\" in their title and return the first two results for each type: curl -X GET \"http://localhost:3689/api/search?type=tracks,artists,albums,playlists&query=the&offset=0&limit=2\" { \"tracks\" : { \"items\" : [ { \"id\" : 35 , \"title\" : \"Another Love\" , \"artist\" : \"Tom Odell\" , \"artist_sort\" : \"Tom Odell\" , \"album\" : \"Es is was es is\" , \"album_sort\" : \"Es is was es is\" , \"album_id\" : \"6494853621007413058\" , \"album_artist\" : \"Various artists\" , \"album_artist_sort\" : \"Various artists\" , \"album_artist_id\" : \"8395563705718003786\" , \"genre\" : \"Singer/Songwriter\" , \"year\" : 2013 , \"track_number\" : 7 , \"disc_number\" : 1 , \"length_ms\" : 251030 , \"play_count\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Compilations/Es is was es is/07 Another Love.m4a\" , \"uri\" : \"library:track:35\" }, { \"id\" : 215 , \"title\" : \"Away From the Sun\" , \"artist\" : \"3 Doors Down\" , \"artist_sort\" : \"3 Doors Down\" , \"album\" : \"Away From the Sun\" , \"album_sort\" : \"Away From the Sun\" , \"album_id\" : \"8264078270267374619\" , \"album_artist\" : \"3 Doors Down\" , \"album_artist_sort\" : \"3 Doors Down\" , \"album_artist_id\" : \"5030128490104968038\" , \"genre\" : \"Rock\" , \"year\" : 2002 , \"track_number\" : 2 , \"disc_number\" : 1 , \"length_ms\" : 233278 , \"play_count\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Away From the Sun/02 Away From the Sun.mp3\" , \"uri\" : \"library:track:215\" } ], \"total\" : 14 , \"offset\" : 0 , \"limit\" : 2 }, \"artists\" : { \"items\" : [ { \"id\" : \"8737690491750445895\" , \"name\" : \"The xx\" , \"name_sort\" : \"xx, The\" , \"album_count\" : 2 , \"track_count\" : 25 , \"length_ms\" : 5229196 , \"uri\" : \"library:artist:8737690491750445895\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : 2 }, \"albums\" : { \"items\" : [ { \"id\" : \"8264078270267374619\" , \"name\" : \"Away From the Sun\" , \"name_sort\" : \"Away From the Sun\" , \"artist\" : \"3 Doors Down\" , \"artist_id\" : \"5030128490104968038\" , \"track_count\" : 12 , \"length_ms\" : 2818174 , \"uri\" : \"library:album:8264078270267374619\" }, { \"id\" : \"6835720495312674468\" , \"name\" : \"The Better Life\" , \"name_sort\" : \"Better Life\" , \"artist\" : \"3 Doors Down\" , \"artist_id\" : \"5030128490104968038\" , \"track_count\" : 11 , \"length_ms\" : 2393332 , \"uri\" : \"library:album:6835720495312674468\" } ], \"total\" : 3 , \"offset\" : 0 , \"limit\" : 2 }, \"playlists\" : { \"items\" : [], \"total\" : 0 , \"offset\" : 0 , \"limit\" : 2 } } Search by query language \u00b6 Search for artists, albums, tracks by a smart playlist query expression (see README_SMARTPL.md for the expression syntax). Endpoint GET /api/search Query parameters Parameter Value expression The smart playlist query expression type Comma separated list of the result types ( artist , album , track offset (Optional) Offset of the first item to return for each type limit (Optional) Maximum number of items to return for each type Response Key Type Value tracks object paging object containing track objects that matches the query artists object paging object containing artist objects that matches the query albums object paging object containing album objects that matches the query Example Search for music tracks ordered descending by the time added to the library and limit result to 2 items: curl -X GET \"http://localhost:3689/api/search?type=tracks&expression=media_kind+is+music+order+by+time_added+desc&offset=0&limit=2\" Server info \u00b6 Method Endpoint Description GET /api/config Get configuration information Config \u00b6 Endpoint GET /api/config Response Key Type Value version string Server version websocket_port integer Port number for the websocket (or 0 if websocket is disabled) buildoptions array Array of strings indicating which features are supported by the server Example curl -X GET \"http://localhost:3689/api/config\" { \"websocket_port\" : 3688 , \"version\" : \"25.0\" , \"buildoptions\" : [ \"ffmpeg\" , \"iTunes XML\" , \"Spotify\" , \"LastFM\" , \"MPD\" , \"Device verification\" , \"Websockets\" , \"ALSA\" ] } Settings \u00b6 Method Endpoint Description GET /api/settings Get all available categories GET /api/settings/{category-name} Get all available options for a category GET /api/settings/{category-name}/{option-name} Get a single setting option PUT /api/settings/{category-name}/{option-name} Change the value of a setting option DELETE /api/settings/{category-name}/{option-name} Reset a setting option to its default List categories \u00b6 List all settings categories with their options Endpoint GET /api/settings Response Key Type Value categories array Array of settings category objects Example curl -X GET \"http://localhost:3689/api/settings\" { \"categories\" : [ { \"name\" : \"webinterface\" , \"options\" : [ { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true }, { \"name\" : \"show_composer_for_genre\" , \"type\" : 2 , \"value\" : \"classical\" } ] } ] } Get a category \u00b6 Get a settings category with their options Endpoint GET /api/settings/{category-name} Response Returns a settings category object Example curl -X GET \"http://localhost:3689/api/settings/webinterface\" { \"name\" : \"webinterface\" , \"options\" : [ { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true }, { \"name\" : \"show_composer_for_genre\" , \"type\" : 2 , \"value\" : \"classical\" } ] } Get an option \u00b6 Get a single settings option Endpoint GET /api/settings/{category-name}/{option-name} Response Returns a settings option object Example curl -X GET \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\" { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true } Change an option value \u00b6 Get a single settings option Endpoint PUT /api/settings/{category-name}/{option-name} Request Key Type Value name string Option name value (integer / boolean / string) New option value Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\" --data \"{\\\"name\\\":\\\"show_composer_now_playing\\\",\\\"value\\\":true}\" Delete an option \u00b6 Delete a single settings option (thus resetting it to default) Endpoint DELETE /api/settings/{category-name}/{option-name} Response On success returns the HTTP 204 No Content success status response code. Example curl -X DELETE \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\" Push notifications \u00b6 If the server was built with websocket support it exposes a websocket at localhost:3688 to inform clients of changes (e. g. player state or library updates). The port depends on the server configuration and can be read using the /api/config endpoint. After connecting to the websocket, the client should send a message containing the event types it is interested in. After that the server will send a message each time one of the events occurred. Message Key Type Value notify array Array of event types Event types Type Description update Library update started or finished database Library database changed (new/modified/deleted tracks) outputs An output was enabled or disabled player Player state changes options Playback option changes (shuffle, repeat, consume mode) volume Volume changes queue Queue changes Example curl --include \\ --no-buffer \\ --header \"Connection: Upgrade\" \\ --header \"Upgrade: websocket\" \\ --header \"Host: localhost:3688\" \\ --header \"Origin: http://localhost:3688\" \\ --header \"Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ==\" \\ --header \"Sec-WebSocket-Version: 13\" \\ --header \"Sec-WebSocket-Protocol: notify\" \\ http://localhost:3688/ \\ --data \"{ \\\"notify\\\": [ \\\"player\\\" ] }\" { \"notify\" : [ \"player\" ] } Object model \u00b6 queue item object \u00b6 Key Type Value id string Item id position integer Position in the queue (starting with zero) track_id string Track id title string Title artist string Track artist name artist_sort string Track artist sort name album string Album name album_sort string Album sort name album_id string Album id album_artist string Album artist name album_artist_sort string Album artist sort name album_artist_id string Album artist id composer string Composer (optional) genre string Genre year integer Release year track_number integer Track number disc_number integer Disc number length_ms integer Track length in milliseconds media_kind string Media type of this track: music , movie , podcast , audiobook , musicvideo , tvshow data_kind string Data type of this track: file , url , spotify , pipe path string Path uri string Resource identifier artwork_url string (optional) Artwork url type string file (codec) type (ie mp3/flac/...) bitrate string file bitrate (ie 192/128/...) samplerate string file sample rate (ie 44100/48000/...) channel string file channel (ie mono/stereo/xx ch)) playlist object \u00b6 Key Type Value id string Playlist id name string Playlist name path string Path parent_id integer Playlist id of the parent (folder) playlist type string Type of this playlist: special , folder , smart , plain smart_playlist boolean true if playlist is a smart playlist folder boolean true if it is a playlist folder uri string Resource identifier artist object \u00b6 Key Type Value id string Artist id name string Artist name name_sort string Artist sort name album_count integer Number of albums track_count integer Number of tracks length_ms integer Total length of tracks in milliseconds uri string Resource identifier artwork_url string (optional) Artwork url album object \u00b6 Key Type Value id string Album id name string Album name name_sort string Album sort name artist_id string Album artist id artist string Album artist name track_count integer Number of tracks length_ms integer Total length of tracks in milliseconds uri string Resource identifier artwork_url string (optional) Artwork url track object \u00b6 Key Type Value id integer Track id title string Title title_sort string Sort title artist string Track artist name artist_sort string Track artist sort name album string Album name album_sort string Album sort name album_id string Album id album_artist string Album artist name album_artist_sort string Album artist sort name album_artist_id string Album artist id composer string Track composer genre string Genre comment string Comment year integer Release year track_number integer Track number disc_number integer Disc number length_ms integer Track length in milliseconds rating integer Track rating (ranges from 0 to 100) play_count integer How many times the track was played skip_count integer How many times the track was skipped time_played string Timestamp in ISO 8601 format time_skipped string Timestamp in ISO 8601 format time_added string Timestamp in ISO 8601 format date_released string Date in the format yyyy-mm-dd seek_ms integer Resume point in milliseconds (available only for podcasts and audiobooks) media_kind string Media type of this track: music , movie , podcast , audiobook , musicvideo , tvshow data_kind string Data type of this track: file , url , spotify , pipe path string Path uri string Resource identifier artwork_url string (optional) Artwork url usermark integer User review marking of track (ranges from 0) paging object \u00b6 Key Type Value items array Array of result objects total integer Total number of items offset integer Requested offset of the first item limit integer Requested maximum number of items browse-info object \u00b6 Key Type Value name string Name (depends on the type of the query) name_sort string Sort name artist_count integer Number of artists album_count integer Number of albums track_count integer Number of tracks time_played string Timestamp in ISO 8601 format time_added string Timestamp in ISO 8601 format directory object \u00b6 Key Type Value path string Directory path category object \u00b6 Key Type Value name string Category name options array Array of option in this category option object \u00b6 Key Type Value name string Option name type integer The type of the value for this option ( 0 : integer, 1 : boolean, 2 : string) value (integer / boolean / string) Current value for this option Artwork urls \u00b6 Artwork urls in queue item , artist , album and track objects can be either relative urls or absolute urls to the artwork image. Absolute artwork urls are pointing to external artwork images (e. g. for radio streams that provide artwork metadata), while relative artwork urls are served from the server. It is possible to add the query parameters maxwidth and/or maxheight to relative artwork urls, in order to get a smaller image (the server only scales down never up). Note that even if a relative artwork url attribute is present, it is not guaranteed to exist.","title":"JSON API"},{"location":"json-api/#owntone-api-endpoint-reference","text":"Available API endpoints: Player : control playback, volume, shuffle/repeat modes Outputs / Speakers : list available outputs and enable/disable outputs Queue : list, add or modify the current queue Library : list playlists, artists, albums and tracks from your library or trigger library rescan Search : search for playlists, artists, albums and tracks Server info : get server information Settings : list and change settings for the player web interface Push notifications : receive push notifications JSON-Object model: Queue item Playlist Artist Album Track","title":"OwnTone API Endpoint Reference"},{"location":"json-api/#player","text":"Method Endpoint Description GET /api/player Get player status PUT /api/player/play, /api/player/pause, /api/player/stop, /api/player/toggle Start, pause or stop playback PUT /api/player/next, /api/player/previous Skip forward or backward PUT /api/player/shuffle Set shuffle mode PUT /api/player/consume Set consume mode PUT /api/player/repeat Set repeat mode PUT /api/player/volume Set master volume or volume for a specific output PUT /api/player/seek Seek to a position in the currently playing track","title":"Player"},{"location":"json-api/#get-player-status","text":"Endpoint GET /api/player Response Key Type Value state string play , pause or stop repeat string off , all or single consume boolean true if consume mode is enabled shuffle boolean true if shuffle mode is enabled volume integer Master volume in percent (0 - 100) item_id integer The current playing queue item id item_length_ms integer Total length in milliseconds of the current queue item item_progress_ms integer Progress into the current queue item in milliseconds Example curl -X GET \"http://localhost:3689/api/player\" { \"state\" : \"pause\" , \"repeat\" : \"off\" , \"consume\" : false , \"shuffle\" : false , \"volume\" : 50 , \"item_id\" : 269 , \"item_length_ms\" : 278093 , \"item_progress_ms\" : 3674 }","title":"Get player status"},{"location":"json-api/#control-playback","text":"Start or resume, pause, stop playback. Endpoint PUT /api/player/play PUT /api/player/pause PUT /api/player/stop PUT /api/player/toggle Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/play\" curl -X PUT \"http://localhost:3689/api/player/pause\" curl -X PUT \"http://localhost:3689/api/player/stop\" curl -X PUT \"http://localhost:3689/api/player/toggle\"","title":"Control playback"},{"location":"json-api/#skip-tracks","text":"Skip forward or backward Endpoint PUT /api/player/next PUT /api/player/previous Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/next\" curl -X PUT \"http://localhost:3689/api/player/previous\"","title":"Skip tracks"},{"location":"json-api/#set-shuffle-mode","text":"Enable or disable shuffle mode Endpoint PUT /api/player/shuffle Query parameters Parameter Value state The new shuffle state, should be either true or false Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/shuffle?state=true\"","title":"Set shuffle mode"},{"location":"json-api/#set-consume-mode","text":"Enable or disable consume mode Endpoint PUT /api/player/consume Query parameters Parameter Value state The new consume state, should be either true or false Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/consume?state=true\"","title":"Set consume mode"},{"location":"json-api/#set-repeat-mode","text":"Change repeat mode Endpoint PUT /api/player/repeat Query parameters Parameter Value state The new repeat mode, should be either off , all or single Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/repeat?state=all\"","title":"Set repeat mode"},{"location":"json-api/#set-volume","text":"Change master volume or volume of a specific output. Endpoint PUT /api/player/volume Query parameters Parameter Value volume The new volume (0 - 100) step The increase or decrease volume by the given amount (-100 - 100) output_id (Optional) If an output id is given, only the volume of this output will be changed. If parameter is omited, the master volume will be changed. Either volume or step must be present as query parameter Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/player/volume?volume=50\" curl -X PUT \"http://localhost:3689/api/player/volume?step=-5\" curl -X PUT \"http://localhost:3689/api/player/volume?volume=50&output_id=0\"","title":"Set volume"},{"location":"json-api/#seek","text":"Seek to a position in the currently playing track. Endpoint PUT /api/player/seek Query parameters Parameter Value position_ms The new position in milliseconds to seek to seek_ms A relative amount of milliseconds to seek to Response On success returns the HTTP 204 No Content success status response code. Example Seek to position: curl -X PUT \"http://localhost:3689/api/player/seek?position_ms=2000\" Relative seeking (skip 30 seconds backwards): curl -X PUT \"http://localhost:3689/api/player/seek?seek_ms=-30000\"","title":"Seek"},{"location":"json-api/#outputs-speakers","text":"Method Endpoint Description GET /api/outputs Get a list of available outputs PUT /api/outputs/set Set enabled outputs GET /api/outputs/{id} Get an output PUT /api/outputs/{id} Change an output setting PUT /api/outputs/{id}/toggle Enable or disable an output, depending on the current state","title":"Outputs / Speakers"},{"location":"json-api/#get-a-list-of-available-outputs","text":"Endpoint GET /api/outputs Response Key Type Value outputs array Array of output objects output object Key Type Value id string Output id name string Output name type string Type of the output: AirPlay , Chromecast , ALSA , Pulseaudio , fifo selected boolean true if output is enabled has_password boolean true if output is password protected requires_auth boolean true if output requires authentication needs_auth_key boolean true if output requires an authorization key (device verification) volume integer Volume in percent (0 - 100) Example curl -X GET \"http://localhost:3689/api/outputs\" { \"outputs\" : [ { \"id\" : \"123456789012345\" , \"name\" : \"kitchen\" , \"type\" : \"AirPlay\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 0 }, { \"id\" : \"0\" , \"name\" : \"Computer\" , \"type\" : \"ALSA\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 19 }, { \"id\" : \"100\" , \"name\" : \"daapd-fifo\" , \"type\" : \"fifo\" , \"selected\" : false , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 0 } ] }","title":"Get a list of available outputs"},{"location":"json-api/#set-enabled-outputs","text":"Set the enabled outputs by passing an array of output ids. The server enables all outputs with the given ids and disables the remaining outputs. Endpoint PUT /api/outputs/set Body parameters Parameter Type Value outputs array Array of output ids Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/set\" --data \"{\\\"outputs\\\":[\\\"198018693182577\\\",\\\"0\\\"]}\"","title":"Set enabled outputs"},{"location":"json-api/#get-an-output","text":"Get an output Endpoint GET /api/outputs/{id} Path parameters Parameter Value id Output id Response On success returns the HTTP 200 OK success status response code. With the response body holding the output object . Example curl -X GET \"http://localhost:3689/api/outputs/0\" { \"id\" : \"0\" , \"name\" : \"Computer\" , \"type\" : \"ALSA\" , \"selected\" : true , \"has_password\" : false , \"requires_auth\" : false , \"needs_auth_key\" : false , \"volume\" : 3 }","title":"Get an output"},{"location":"json-api/#change-an-output","text":"Enable or disable an output and change its volume. Endpoint PUT /api/outputs/{id} Path parameters Parameter Value id Output id Body parameters Parameter Type Value selected boolean (Optional) true to enable and false to disable the output volume integer (Optional) Volume in percent (0 - 100) pin string (Optional) PIN for device verification Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/0\" --data \"{\\\"selected\\\":true, \\\"volume\\\": 50}\"","title":"Change an output"},{"location":"json-api/#toggle-an-output","text":"Enable or disable an output, depending on its current state Endpoint PUT /api/outputs/{id}/toggle Path parameters Parameter Value id Output id Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/outputs/0/toggle\"","title":"Toggle an output"},{"location":"json-api/#queue","text":"Method Endpoint Description GET /api/queue Get a list of queue items PUT /api/queue/clear Remove all items from the queue POST /api/queue/items/add Add items to the queue PUT /api/queue/items/{id}|now_playing Updating a queue item in the queue DELETE /api/queue/items/{id} Remove a queue item from the queue","title":"Queue"},{"location":"json-api/#list-queue-items","text":"Lists the items in the current queue Endpoint GET /api/queue Query parameters Parameter Value id (Optional) If a queue item id is given, only the item with the id will be returend. Use id=now_playing to get the currently playing item. start (Optional) If a start and an end position is given, only the items from start (included) to end (excluded) will be returned. If only a start position is given, only the item at this position will be returned. end (Optional) See start parameter Response Key Type Value version integer Version number of the current queue count integer Number of items in the current queue items array Array of queue item objects Example curl -X GET \"http://localhost:3689/api/queue\" { \"version\" : 833 , \"count\" : 20 , \"items\" : [ { \"id\" : 12122 , \"position\" : 0 , \"track_id\" : 10749 , \"title\" : \"Angels\" , \"artist\" : \"The xx\" , \"artist_sort\" : \"xx, The\" , \"album\" : \"Coexist\" , \"album_sort\" : \"Coexist\" , \"albumartist\" : \"The xx\" , \"albumartist_sort\" : \"xx, The\" , \"genre\" : \"Indie Rock\" , \"year\" : 2012 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 171735 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/The xx/Coexist/01 Angels.mp3\" , \"uri\" : \"library:track:10749\" }, ... ] }","title":"List queue items"},{"location":"json-api/#clearing-the-queue","text":"Remove all items form the current queue Endpoint PUT /api/queue/clear Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/clear\"","title":"Clearing the queue"},{"location":"json-api/#adding-items-to-the-queue","text":"Add tracks, playlists artists or albums to the current queue Endpoint POST /api/queue/items/add Query parameters Parameter Value uris Comma seperated list of resource identifiers ( track , playlist , artist or album object uri ) expression A smart playlist query expression identifying the tracks that will be added to the queue. position (Optional) If a position is given, new items are inserted starting from this position into the queue. playback (Optional) If the playback parameter is set to start , playback will be started after adding the new items. playback_from_position (Optional) If the playback parameter is set to start , playback will be started with the queue item at the position given in playback_from_position . clear (Optional) If the clear parameter is set to true , the queue will be cleared before adding the new items. shuffle (Optional) If the shuffle parameter is set to true , the shuffle mode is activated. If it is set to something else, the shuffle mode is deactivated. To leave the shuffle mode untouched the parameter should be ommited. limit (Optional) Maximum number of tracks to add Either the uris or the expression parameter must be set. If both are set the uris parameter takes presedence and the expression parameter will be ignored. Response On success returns the HTTP 200 OK success status response code. Key Type Value count integer number of tracks added to the queue Example Add new items by uri: curl -X POST \"http://localhost:3689/api/queue/items/add?uris=library:playlist:68,library:artist:2932599850102967727\" { \"count\" : 42 } Add new items by query language: curl -X POST \"http://localhost:3689/api/queue/items/add?expression=media_kind+is+music\" { \"count\" : 42 } Clear current queue, add 10 new random tracks of genre Pop and start playback curl -X POST \"http://localhost:3689/api/queue/items/add?limit=10&clear=true&playback=start&expression=genre+is+%22Pop%22+order+by+random+desc\" { \"count\" : 10 }","title":"Adding items to the queue"},{"location":"json-api/#updating-a-queue-item","text":"Update or move a queue item in the current queue Endpoint PUT /api/queue/items/{id} or PUT /api/queue/items/now_playing Path parameters Parameter Value id Queue item id (or use now_playing to update the currenly playing track) Query parameters Parameter Value new_position The new position for the queue item in the current queue. title New track title album New album title artist New artist album_artist New album artist composer New composer genre New genre artwork_url New URL to track artwork Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/items/3?new_position=0\" curl -X PUT \"http://localhost:3689/api/queue/items/3?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\" curl -X PUT \"http://localhost:3689/api/queue/items/now_playing?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\"","title":"Updating a queue item"},{"location":"json-api/#removing-a-queue-item","text":"Remove a queue item from the current queue Endpoint DELETE /api/queue/items/{id} Path parameters Parameter Value id Queue item id Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/queue/items/2\"","title":"Removing a queue item"},{"location":"json-api/#library","text":"Method Endpoint Description GET /api/library Get library information GET /api/library/playlists Get a list of playlists GET /api/library/playlists/{id} Get a playlist PUT /api/library/playlists/{id} Update a playlist attribute DELETE /api/library/playlists/{id} Delete a playlist GET /api/library/playlists/{id}/tracks Get list of tracks for a playlist PUT /api/library/playlists/{id}/tracks Update play count of tracks for a playlist GET /api/library/playlists/{id}/playlists Get list of playlists for a playlist folder GET /api/library/artists Get a list of artists GET /api/library/artists/{id} Get an artist GET /api/library/artists/{id}/albums Get list of albums for an artist GET /api/library/albums Get a list of albums GET /api/library/albums/{id} Get an album GET /api/library/albums/{id}/tracks Get list of tracks for an album GET /api/library/tracks/{id} Get a track GET /api/library/tracks/{id}/playlists Get list of playlists for a track PUT /api/library/tracks Update multiple track properties PUT /api/library/tracks/{id} Update single track properties GET /api/library/genres Get list of genres GET /api/library/count Get count of tracks, artists and albums GET /api/library/files Get list of directories in the local library POST /api/library/add Add an item to the library PUT /api/update Trigger a library rescan PUT /api/rescan Trigger a library metadata rescan PUT /api/library/backup Request library backup db","title":"Library"},{"location":"json-api/#library-information","text":"List some library stats Endpoint GET /api/library Response Key Type Value songs integer Array of playlist objects db_playtime integer Total playtime of all songs in the library artists integer Number of album artists in the library albums integer Number of albums in the library started_at string Server startup time (timestamp in ISO 8601 format) updated_at string Last library update (timestamp in ISO 8601 format) updating boolean true if library rescan is in progress Example curl -X GET \"http://localhost:3689/api/library\" { \"songs\" : 217 , \"db_playtime\" : 66811 , \"artists\" : 9 , \"albums\" : 19 , \"started_at\" : \"2018-11-19T19:06:08Z\" , \"updated_at\" : \"2018-11-19T19:06:16Z\" , \"updating\" : false }","title":"Library information"},{"location":"json-api/#list-playlists","text":"Lists all playlists in your library (does not return playlist folders) Endpoint GET /api/library/playlists Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlists to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists in the library offset integer Requested offset of the first playlist limit integer Requested maximum number of playlists Example curl -X GET \"http://localhost:3689/api/library/playlists\" { \"items\" : [ { \"id\" : 1 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List playlists"},{"location":"json-api/#get-a-playlist","text":"Get a specific playlists in your library Endpoint GET /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Response On success returns the HTTP 200 OK success status response code. With the response body holding the playlist object . Example curl -X GET \"http://localhost:3689/api/library/playlists/1\" { \"id\" : 1 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" }","title":"Get a playlist"},{"location":"json-api/#update-a-playlist","text":"Update attributes of a specific playlists in your library Endpoint PUT /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Query parameters Parameter Value query_limit For RSS feeds, this sets how many podcasts to retrieve Example curl -X PUT \"http://localhost:3689/api/library/playlists/25?query_limit=20\"","title":"Update a playlist"},{"location":"json-api/#delete-a-playlist","text":"Delete a playlist, e.g. a RSS feed Endpoint DELETE /api/library/playlists/{id} Path parameters Parameter Value id Playlist id Example curl -X DELETE \"http://localhost:3689/api/library/playlists/25\"","title":"Delete a playlist"},{"location":"json-api/#list-playlist-tracks","text":"Lists the tracks in a playlists Endpoint GET /api/library/playlists/{id}/tracks Path parameters Parameter Value id Playlist id Query parameters Parameter Value offset (Optional) Offset of the first track to return limit (Optional) Maximum number of tracks to return Response Key Type Value items array Array of track objects total integer Total number of tracks in the playlist offset integer Requested offset of the first track limit integer Requested maximum number of tracks Example curl -X GET \"http://localhost:3689/api/library/playlists/1/tracks\" { \"items\" : [ { \"id\" : 10766 , \"title\" : \"Solange wir tanzen\" , \"artist\" : \"Heinrich\" , \"artist_sort\" : \"Heinrich\" , \"album\" : \"Solange wir tanzen\" , \"album_sort\" : \"Solange wir tanzen\" , \"albumartist\" : \"Heinrich\" , \"albumartist_sort\" : \"Heinrich\" , \"genre\" : \"Electronica\" , \"year\" : 2014 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 223085 , \"play_count\" : 2 , \"skip_count\" : 1 , \"time_played\" : \"2018-02-23T10:31:20Z\" , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Heinrich/Solange wir tanzen/01 Solange wir tanzen.mp3\" , \"uri\" : \"library:track:10766\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List playlist tracks"},{"location":"json-api/#update-playlist-tracks","text":"Updates the play count for tracks in a playlists Endpoint PUT /api/library/playlists/{id}/tracks Path parameters Parameter Value id Playlist id Query parameters Parameter Value play_count Either increment , played or reset . increment will increment play_count and update time_played , played will be like increment but only where play_count is 0, reset will set play_count and skip_count to zero and delete time_played and time_skipped Example curl -X PUT \"http://localhost:3689/api/library/playlists/1/tracks?play_count=played\"","title":"Update playlist tracks"},{"location":"json-api/#list-playlists-in-a-playlist-folder","text":"Lists the playlists in a playlist folder Note : The root playlist folder has id 0. Endpoint GET /api/library/playlists/{id}/playlists Path parameters Parameter Value id Playlist id Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlist to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists in the playlist folder offset integer Requested offset of the first playlist limit integer Requested maximum number of playlist Example curl -X GET \"http://localhost:3689/api/library/playlists/0/tracks\" { \"items\" : [ { \"id\" : 11 , \"name\" : \"Spotify\" , \"path\" : \"spotify:playlistfolder\" , \"parent_id\" : \"0\" , \"smart_playlist\" : false , \"folder\" : true , \"uri\" : \"library:playlist:11\" }, { \"id\" : 8 , \"name\" : \"bytefm\" , \"path\" : \"/srv/music/Playlists/bytefm.m3u\" , \"parent_id\" : \"0\" , \"smart_playlist\" : false , \"folder\" : false , \"uri\" : \"library:playlist:8\" } ], \"total\" : 2 , \"offset\" : 0 , \"limit\" : -1 }","title":"List playlists in a playlist folder"},{"location":"json-api/#list-artists","text":"Lists the artists in your library Endpoint GET /api/library/artists Query parameters Parameter Value offset (Optional) Offset of the first artist to return limit (Optional) Maximum number of artists to return Response Key Type Value items array Array of artist objects total integer Total number of artists in the library offset integer Requested offset of the first artist limit integer Requested maximum number of artists Example curl -X GET \"http://localhost:3689/api/library/artists\" { \"items\" : [ { \"id\" : \"3815427709949443149\" , \"name\" : \"ABAY\" , \"name_sort\" : \"ABAY\" , \"album_count\" : 1 , \"track_count\" : 10 , \"length_ms\" : 2951554 , \"uri\" : \"library:artist:3815427709949443149\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List artists"},{"location":"json-api/#get-an-artist","text":"Get a specific artist in your library Endpoint GET /api/library/artists/{id} Path parameters Parameter Value id Artist id Response On success returns the HTTP 200 OK success status response code. With the response body holding the artist object . Example curl -X GET \"http://localhost:3689/api/library/artists/3815427709949443149\" { \"id\" : \"3815427709949443149\" , \"name\" : \"ABAY\" , \"name_sort\" : \"ABAY\" , \"album_count\" : 1 , \"track_count\" : 10 , \"length_ms\" : 2951554 , \"uri\" : \"library:artist:3815427709949443149\" }","title":"Get an artist"},{"location":"json-api/#list-artist-albums","text":"Lists the albums of an artist Endpoint GET /api/library/artists/{id}/albums Path parameters Parameter Value id Artist id Query parameters Parameter Value offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums of this artist offset integer Requested offset of the first album limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/library/artists/32561671101664759/albums\" { \"items\" : [ { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List artist albums"},{"location":"json-api/#list-albums","text":"Lists the albums in your library Endpoint GET /api/library/albums Query parameters Parameter Value offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums in the library offset integer Requested offset of the first albums limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/library/albums\" { \"items\" : [ { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List albums"},{"location":"json-api/#get-an-album","text":"Get a specific album in your library Endpoint GET /api/library/albums/{id} Path parameters Parameter Value id Album id Response On success returns the HTTP 200 OK success status response code. With the response body holding the album object . Example curl -X GET \"http://localhost:3689/api/library/albums/8009851123233197743\" { \"id\" : \"8009851123233197743\" , \"name\" : \"Add Violence\" , \"name_sort\" : \"Add Violence\" , \"artist\" : \"Nine Inch Nails\" , \"artist_id\" : \"32561671101664759\" , \"track_count\" : 5 , \"length_ms\" : 1634961 , \"uri\" : \"library:album:8009851123233197743\" }","title":"Get an album"},{"location":"json-api/#list-album-tracks","text":"Lists the tracks in an album Endpoint GET /api/library/albums/{id}/tracks Path parameters Parameter Value id Album id Query parameters Parameter Value offset (Optional) Offset of the first track to return limit (Optional) Maximum number of tracks to return Response Key Type Value items array Array of track objects total integer Total number of tracks offset integer Requested offset of the first track limit integer Requested maximum number of tracks Example curl -X GET \"http://localhost:3689/api/library/albums/1/tracks\" { \"items\" : [ { \"id\" : 10766 , \"title\" : \"Solange wir tanzen\" , \"artist\" : \"Heinrich\" , \"artist_sort\" : \"Heinrich\" , \"album\" : \"Solange wir tanzen\" , \"album_sort\" : \"Solange wir tanzen\" , \"albumartist\" : \"Heinrich\" , \"albumartist_sort\" : \"Heinrich\" , \"genre\" : \"Electronica\" , \"year\" : 2014 , \"track_number\" : 1 , \"disc_number\" : 1 , \"length_ms\" : 223085 , \"play_count\" : 2 , \"last_time_played\" : \"2018-02-23T10:31:20Z\" , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Heinrich/Solange wir tanzen/01 Solange wir tanzen.mp3\" , \"uri\" : \"library:track:10766\" }, ... ], \"total\" : 20 , \"offset\" : 0 , \"limit\" : -1 }","title":"List album tracks"},{"location":"json-api/#get-a-track","text":"Get a specific track in your library Endpoint GET /api/library/tracks/{id} Path parameters Parameter Value id Track id Response On success returns the HTTP 200 OK success status response code. With the response body holding the track object . Example curl -X GET \"http://localhost:3689/api/library/track/1\" { \"id\" : 1 , \"title\" : \"Pardon Me\" , \"title_sort\" : \"Pardon Me\" , \"artist\" : \"Incubus\" , \"artist_sort\" : \"Incubus\" , \"album\" : \"Make Yourself\" , \"album_sort\" : \"Make Yourself\" , \"album_id\" : \"6683985628074308431\" , \"album_artist\" : \"Incubus\" , \"album_artist_sort\" : \"Incubus\" , \"album_artist_id\" : \"4833612337650426236\" , \"composer\" : \"Alex Katunich/Brandon Boyd/Chris Kilmore/Jose Antonio Pasillas II/Mike Einziger\" , \"genre\" : \"Alternative Rock\" , \"year\" : 2001 , \"track_number\" : 12 , \"disc_number\" : 1 , \"length_ms\" : 223170 , \"rating\" : 0 , \"usermark\" : 0 , \"play_count\" : 0 , \"skip_count\" : 0 , \"time_added\" : \"2019-01-20T11:58:29Z\" , \"date_released\" : \"2001-05-27\" , \"seek_ms\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Incubus/Make Yourself/12 Pardon Me.mp3\" , \"uri\" : \"library:track:1\" , \"artwork_url\" : \"/artwork/item/1\" }","title":"Get a track"},{"location":"json-api/#list-playlists-for-a-track","text":"Get the list of playlists that contain a track (does not return smart playlists) Endpoint GET /api/library/tracks/{id}/playlists Path parameters Parameter Value id Track id Query parameters Parameter Value offset (Optional) Offset of the first playlist to return limit (Optional) Maximum number of playlist to return Response Key Type Value items array Array of playlist objects total integer Total number of playlists offset integer Requested offset of the first playlist limit integer Requested maximum number of playlists Example curl -X GET \"http://localhost:3689/api/library/tracks/27/playlists\" { \"items\" : [ { \"id\" : 1 , \"name\" : \"playlist\" , \"path\" : \"/music/srv/playlist.m3u\" , \"smart_playlist\" : false , \"uri\" : \"library:playlist:1\" }, ... ], \"total\" : 2 , \"offset\" : 0 , \"limit\" : -1 }","title":"List playlists for a track"},{"location":"json-api/#update-track-properties","text":"Change properties of one or more tracks (supported properties are \"rating\", \"play_count\" and \"usermark\") Endpoint PUT /api/library/tracks Body parameters Parameter Type Value tracks array Array of track objects Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT -d '{ \"tracks\": [ { \"id\": 1, \"rating\": 100, \"usermark\": 4 }, { \"id\": 2, \"usermark\": 3 } ] }' \"http://localhost:3689/api/library/tracks\" Endpoint PUT /api/library/tracks/{id} Path parameters Parameter Value id Track id Query parameters Parameter Value rating The new rating (0 - 100) play_count Either increment or reset . increment will increment play_count and update time_played , reset will set play_count and skip_count to zero and delete time_played and time_skipped usermark The new usermark (>= 0) Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/library/tracks/1?rating=100\" curl -X PUT \"http://localhost:3689/api/library/tracks/1?play_count=increment\"","title":"Update track properties"},{"location":"json-api/#list-genres","text":"Get list of genres Endpoint GET /api/library/genres Response Key Type Value items array Array of browse-info objects total integer Total number of genres in the library offset integer Requested offset of the first genre limit integer Requested maximum number of genres Example curl -X GET \"http://localhost:3689/api/library/genres\" { \"items\" : [ { \"name\" : \"Classical\" }, { \"name\" : \"Drum & Bass\" }, { \"name\" : \"Pop\" }, { \"name\" : \"Rock/Pop\" }, { \"name\" : \"'90s Alternative\" } ], \"total\" : 5 , \"offset\" : 0 , \"limit\" : -1 }","title":"List genres"},{"location":"json-api/#list-albums-for-genre","text":"Lists the albums in a genre Endpoint GET api/search?type=albums&expression=genre+is+\\\"{genre name}\\\"\" Query parameters Parameter Value genre genre name (uri encoded and html esc seq for chars: '/&) offset (Optional) Offset of the first album to return limit (Optional) Maximum number of albums to return Response Key Type Value items array Array of album objects total integer Total number of albums in the library offset integer Requested offset of the first albums limit integer Requested maximum number of albums Example curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Pop\\\"\" curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Rock%2FPop\\\"\" # Rock/Pop curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"Drum%20%26%20Bass\\\"\" # Drum & Bass curl -X GET \"http://localhost:3689/api/search?type=albums&expression=genre+is+\\\"%2790s%20Alternative\\\"\" # '90 Alternative { \"albums\" : { \"items\" : [ { \"id\" : \"320189328729146437\" , \"name\" : \"Best Ever\" , \"name_sort\" : \"Best Ever\" , \"artist\" : \"ABC\" , \"artist_id\" : \"8760559201889050080\" , \"track_count\" : 1 , \"length_ms\" : 3631 , \"uri\" : \"library:album:320189328729146437\" }, { \"id\" : \"7964595866631625723\" , \"name\" : \"Greatest Hits\" , \"name_sort\" : \"Greatest Hits\" , \"artist\" : \"Marvin Gaye\" , \"artist_id\" : \"5261930703203735930\" , \"track_count\" : 2 , \"length_ms\" : 7262 , \"uri\" : \"library:album:7964595866631625723\" }, { \"id\" : \"3844610748145176456\" , \"name\" : \"The Very Best of Etta\" , \"name_sort\" : \"Very Best of Etta\" , \"artist\" : \"Etta James\" , \"artist_id\" : \"2627182178555864595\" , \"track_count\" : 1 , \"length_ms\" : 177926 , \"uri\" : \"library:album:3844610748145176456\" } ], \"total\" : 3 , \"offset\" : 0 , \"limit\" : -1 } }","title":"List albums for genre"},{"location":"json-api/#get-count-of-tracks-artists-and-albums","text":"Get information about the number of tracks, artists and albums and the total playtime Endpoint GET /api/library/count Query parameters Parameter Value expression (Optional) The smart playlist query expression, if this parameter is omitted returns the information for the whole library Response Key Type Value tracks integer Number of tracks matching the expression artists integer Number of artists matching the expression albums integer Number of albums matching the expression db_playtime integer Total playtime in milliseconds of all tracks matching the expression Example curl -X GET \"http://localhost:3689/api/library/count?expression=data_kind+is+file\" { \"tracks\" : 6811 , \"artists\" : 355 , \"albums\" : 646 , \"db_playtime\" : 1590767 }","title":"Get count of tracks, artists and albums"},{"location":"json-api/#list-local-directories","text":"List the local directories and the directory contents (tracks and playlists) Endpoint GET /api/library/files Query parameters Parameter Value directory (Optional) A path to a directory in your local library. Response Key Type Value directories array Array of directory objects containing the sub directories tracks object paging object containing track objects that matches the directory playlists object paging object containing playlist objects that matches the directory Example curl -X GET \"http://localhost:3689/api/library/files?directory=/music/srv\" { \"directories\" : [ { \"path\" : \"/music/srv/Audiobooks\" }, { \"path\" : \"/music/srv/Music\" }, { \"path\" : \"/music/srv/Playlists\" }, { \"path\" : \"/music/srv/Podcasts\" } ], \"tracks\" : { \"items\" : [ { \"id\" : 1 , \"title\" : \"input.pipe\" , \"artist\" : \"Unknown artist\" , \"artist_sort\" : \"Unknown artist\" , \"album\" : \"Unknown album\" , \"album_sort\" : \"Unknown album\" , \"album_id\" : \"4201163758598356043\" , \"album_artist\" : \"Unknown artist\" , \"album_artist_sort\" : \"Unknown artist\" , \"album_artist_id\" : \"4187901437947843388\" , \"genre\" : \"Unknown genre\" , \"year\" : 0 , \"track_number\" : 0 , \"disc_number\" : 0 , \"length_ms\" : 0 , \"play_count\" : 0 , \"skip_count\" : 0 , \"time_added\" : \"2018-11-24T08:41:35Z\" , \"seek_ms\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"pipe\" , \"path\" : \"/music/srv/input.pipe\" , \"uri\" : \"library:track:1\" , \"artwork_url\" : \"/artwork/item/1\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : -1 }, \"playlists\" : { \"items\" : [ { \"id\" : 8 , \"name\" : \"radio\" , \"path\" : \"/music/srv/radio.m3u\" , \"smart_playlist\" : true , \"uri\" : \"library:playlist:8\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : -1 } }","title":"List local directories"},{"location":"json-api/#trigger-rescan","text":"Trigger a library rescan Endpoint PUT /api/update Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/update\" { \"songs\" : 217 , \"db_playtime\" : 66811 , \"artists\" : 9 , \"albums\" : 19 , \"started_at\" : \"2018-11-19T19:06:08Z\" , \"updated_at\" : \"2018-11-19T19:06:16Z\" , \"updating\" : false }","title":"Trigger rescan"},{"location":"json-api/#trigger-metadata-rescan","text":"Trigger a library metadata rescan even if files have not been updated. Maintenence method. Endpoint PUT /api/rescan Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/rescan\"","title":"Trigger metadata rescan"},{"location":"json-api/#backup-db","text":"Request a library backup - configuration must be enabled and point to a valid writable path. Maintenance method. Endpoint PUT /api/library/backup Response On success returns the HTTP 200 OK success status response code. If backups are not enabled returns HTTP 503 Service Unavailable response code. Otherwise a HTTP 500 Internal Server Error response is returned. Example curl -X PUT \"http://localhost:3689/api/library/backup\"","title":"Backup DB"},{"location":"json-api/#search","text":"Method Endpoint Description GET /api/search Search for playlists, artists, albums, tracks,genres by a simple search term GET /api/search Search by complex query expression","title":"Search"},{"location":"json-api/#search-by-search-term","text":"Search for playlists, artists, albums, tracks, genres that include the given query in their title (case insensitive matching). Endpoint GET /api/search Query parameters Parameter Value query The search keyword type Comma separated list of the result types ( playlist , artist , album , track , genre ) media_kind (Optional) Filter results by media kind ( music , movie , podcast , audiobook , musicvideo , tvshow ). Filter only applies to artist, album and track result types. offset (Optional) Offset of the first item to return for each type limit (Optional) Maximum number of items to return for each type Response Key Type Value tracks object paging object containing track objects that matches the query artists object paging object containing artist objects that matches the query albums object paging object containing album objects that matches the query playlists object paging object containing playlist objects that matches the query Example Search for all tracks, artists, albums and playlists that contain \"the\" in their title and return the first two results for each type: curl -X GET \"http://localhost:3689/api/search?type=tracks,artists,albums,playlists&query=the&offset=0&limit=2\" { \"tracks\" : { \"items\" : [ { \"id\" : 35 , \"title\" : \"Another Love\" , \"artist\" : \"Tom Odell\" , \"artist_sort\" : \"Tom Odell\" , \"album\" : \"Es is was es is\" , \"album_sort\" : \"Es is was es is\" , \"album_id\" : \"6494853621007413058\" , \"album_artist\" : \"Various artists\" , \"album_artist_sort\" : \"Various artists\" , \"album_artist_id\" : \"8395563705718003786\" , \"genre\" : \"Singer/Songwriter\" , \"year\" : 2013 , \"track_number\" : 7 , \"disc_number\" : 1 , \"length_ms\" : 251030 , \"play_count\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Compilations/Es is was es is/07 Another Love.m4a\" , \"uri\" : \"library:track:35\" }, { \"id\" : 215 , \"title\" : \"Away From the Sun\" , \"artist\" : \"3 Doors Down\" , \"artist_sort\" : \"3 Doors Down\" , \"album\" : \"Away From the Sun\" , \"album_sort\" : \"Away From the Sun\" , \"album_id\" : \"8264078270267374619\" , \"album_artist\" : \"3 Doors Down\" , \"album_artist_sort\" : \"3 Doors Down\" , \"album_artist_id\" : \"5030128490104968038\" , \"genre\" : \"Rock\" , \"year\" : 2002 , \"track_number\" : 2 , \"disc_number\" : 1 , \"length_ms\" : 233278 , \"play_count\" : 0 , \"media_kind\" : \"music\" , \"data_kind\" : \"file\" , \"path\" : \"/music/srv/Away From the Sun/02 Away From the Sun.mp3\" , \"uri\" : \"library:track:215\" } ], \"total\" : 14 , \"offset\" : 0 , \"limit\" : 2 }, \"artists\" : { \"items\" : [ { \"id\" : \"8737690491750445895\" , \"name\" : \"The xx\" , \"name_sort\" : \"xx, The\" , \"album_count\" : 2 , \"track_count\" : 25 , \"length_ms\" : 5229196 , \"uri\" : \"library:artist:8737690491750445895\" } ], \"total\" : 1 , \"offset\" : 0 , \"limit\" : 2 }, \"albums\" : { \"items\" : [ { \"id\" : \"8264078270267374619\" , \"name\" : \"Away From the Sun\" , \"name_sort\" : \"Away From the Sun\" , \"artist\" : \"3 Doors Down\" , \"artist_id\" : \"5030128490104968038\" , \"track_count\" : 12 , \"length_ms\" : 2818174 , \"uri\" : \"library:album:8264078270267374619\" }, { \"id\" : \"6835720495312674468\" , \"name\" : \"The Better Life\" , \"name_sort\" : \"Better Life\" , \"artist\" : \"3 Doors Down\" , \"artist_id\" : \"5030128490104968038\" , \"track_count\" : 11 , \"length_ms\" : 2393332 , \"uri\" : \"library:album:6835720495312674468\" } ], \"total\" : 3 , \"offset\" : 0 , \"limit\" : 2 }, \"playlists\" : { \"items\" : [], \"total\" : 0 , \"offset\" : 0 , \"limit\" : 2 } }","title":"Search by search term"},{"location":"json-api/#search-by-query-language","text":"Search for artists, albums, tracks by a smart playlist query expression (see README_SMARTPL.md for the expression syntax). Endpoint GET /api/search Query parameters Parameter Value expression The smart playlist query expression type Comma separated list of the result types ( artist , album , track offset (Optional) Offset of the first item to return for each type limit (Optional) Maximum number of items to return for each type Response Key Type Value tracks object paging object containing track objects that matches the query artists object paging object containing artist objects that matches the query albums object paging object containing album objects that matches the query Example Search for music tracks ordered descending by the time added to the library and limit result to 2 items: curl -X GET \"http://localhost:3689/api/search?type=tracks&expression=media_kind+is+music+order+by+time_added+desc&offset=0&limit=2\"","title":"Search by query language"},{"location":"json-api/#server-info","text":"Method Endpoint Description GET /api/config Get configuration information","title":"Server info"},{"location":"json-api/#config","text":"Endpoint GET /api/config Response Key Type Value version string Server version websocket_port integer Port number for the websocket (or 0 if websocket is disabled) buildoptions array Array of strings indicating which features are supported by the server Example curl -X GET \"http://localhost:3689/api/config\" { \"websocket_port\" : 3688 , \"version\" : \"25.0\" , \"buildoptions\" : [ \"ffmpeg\" , \"iTunes XML\" , \"Spotify\" , \"LastFM\" , \"MPD\" , \"Device verification\" , \"Websockets\" , \"ALSA\" ] }","title":"Config"},{"location":"json-api/#settings","text":"Method Endpoint Description GET /api/settings Get all available categories GET /api/settings/{category-name} Get all available options for a category GET /api/settings/{category-name}/{option-name} Get a single setting option PUT /api/settings/{category-name}/{option-name} Change the value of a setting option DELETE /api/settings/{category-name}/{option-name} Reset a setting option to its default","title":"Settings"},{"location":"json-api/#list-categories","text":"List all settings categories with their options Endpoint GET /api/settings Response Key Type Value categories array Array of settings category objects Example curl -X GET \"http://localhost:3689/api/settings\" { \"categories\" : [ { \"name\" : \"webinterface\" , \"options\" : [ { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true }, { \"name\" : \"show_composer_for_genre\" , \"type\" : 2 , \"value\" : \"classical\" } ] } ] }","title":"List categories"},{"location":"json-api/#get-a-category","text":"Get a settings category with their options Endpoint GET /api/settings/{category-name} Response Returns a settings category object Example curl -X GET \"http://localhost:3689/api/settings/webinterface\" { \"name\" : \"webinterface\" , \"options\" : [ { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true }, { \"name\" : \"show_composer_for_genre\" , \"type\" : 2 , \"value\" : \"classical\" } ] }","title":"Get a category"},{"location":"json-api/#get-an-option","text":"Get a single settings option Endpoint GET /api/settings/{category-name}/{option-name} Response Returns a settings option object Example curl -X GET \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\" { \"name\" : \"show_composer_now_playing\" , \"type\" : 1 , \"value\" : true }","title":"Get an option"},{"location":"json-api/#change-an-option-value","text":"Get a single settings option Endpoint PUT /api/settings/{category-name}/{option-name} Request Key Type Value name string Option name value (integer / boolean / string) New option value Response On success returns the HTTP 204 No Content success status response code. Example curl -X PUT \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\" --data \"{\\\"name\\\":\\\"show_composer_now_playing\\\",\\\"value\\\":true}\"","title":"Change an option value"},{"location":"json-api/#delete-an-option","text":"Delete a single settings option (thus resetting it to default) Endpoint DELETE /api/settings/{category-name}/{option-name} Response On success returns the HTTP 204 No Content success status response code. Example curl -X DELETE \"http://localhost:3689/api/settings/webinterface/show_composer_now_playing\"","title":"Delete an option"},{"location":"json-api/#push-notifications","text":"If the server was built with websocket support it exposes a websocket at localhost:3688 to inform clients of changes (e. g. player state or library updates). The port depends on the server configuration and can be read using the /api/config endpoint. After connecting to the websocket, the client should send a message containing the event types it is interested in. After that the server will send a message each time one of the events occurred. Message Key Type Value notify array Array of event types Event types Type Description update Library update started or finished database Library database changed (new/modified/deleted tracks) outputs An output was enabled or disabled player Player state changes options Playback option changes (shuffle, repeat, consume mode) volume Volume changes queue Queue changes Example curl --include \\ --no-buffer \\ --header \"Connection: Upgrade\" \\ --header \"Upgrade: websocket\" \\ --header \"Host: localhost:3688\" \\ --header \"Origin: http://localhost:3688\" \\ --header \"Sec-WebSocket-Key: SGVsbG8sIHdvcmxkIQ==\" \\ --header \"Sec-WebSocket-Version: 13\" \\ --header \"Sec-WebSocket-Protocol: notify\" \\ http://localhost:3688/ \\ --data \"{ \\\"notify\\\": [ \\\"player\\\" ] }\" { \"notify\" : [ \"player\" ] }","title":"Push notifications"},{"location":"json-api/#object-model","text":"","title":"Object model"},{"location":"json-api/#queue-item-object","text":"Key Type Value id string Item id position integer Position in the queue (starting with zero) track_id string Track id title string Title artist string Track artist name artist_sort string Track artist sort name album string Album name album_sort string Album sort name album_id string Album id album_artist string Album artist name album_artist_sort string Album artist sort name album_artist_id string Album artist id composer string Composer (optional) genre string Genre year integer Release year track_number integer Track number disc_number integer Disc number length_ms integer Track length in milliseconds media_kind string Media type of this track: music , movie , podcast , audiobook , musicvideo , tvshow data_kind string Data type of this track: file , url , spotify , pipe path string Path uri string Resource identifier artwork_url string (optional) Artwork url type string file (codec) type (ie mp3/flac/...) bitrate string file bitrate (ie 192/128/...) samplerate string file sample rate (ie 44100/48000/...) channel string file channel (ie mono/stereo/xx ch))","title":"queue item object"},{"location":"json-api/#playlist-object","text":"Key Type Value id string Playlist id name string Playlist name path string Path parent_id integer Playlist id of the parent (folder) playlist type string Type of this playlist: special , folder , smart , plain smart_playlist boolean true if playlist is a smart playlist folder boolean true if it is a playlist folder uri string Resource identifier","title":"playlist object"},{"location":"json-api/#artist-object","text":"Key Type Value id string Artist id name string Artist name name_sort string Artist sort name album_count integer Number of albums track_count integer Number of tracks length_ms integer Total length of tracks in milliseconds uri string Resource identifier artwork_url string (optional) Artwork url","title":"artist object"},{"location":"json-api/#album-object","text":"Key Type Value id string Album id name string Album name name_sort string Album sort name artist_id string Album artist id artist string Album artist name track_count integer Number of tracks length_ms integer Total length of tracks in milliseconds uri string Resource identifier artwork_url string (optional) Artwork url","title":"album object"},{"location":"json-api/#track-object","text":"Key Type Value id integer Track id title string Title title_sort string Sort title artist string Track artist name artist_sort string Track artist sort name album string Album name album_sort string Album sort name album_id string Album id album_artist string Album artist name album_artist_sort string Album artist sort name album_artist_id string Album artist id composer string Track composer genre string Genre comment string Comment year integer Release year track_number integer Track number disc_number integer Disc number length_ms integer Track length in milliseconds rating integer Track rating (ranges from 0 to 100) play_count integer How many times the track was played skip_count integer How many times the track was skipped time_played string Timestamp in ISO 8601 format time_skipped string Timestamp in ISO 8601 format time_added string Timestamp in ISO 8601 format date_released string Date in the format yyyy-mm-dd seek_ms integer Resume point in milliseconds (available only for podcasts and audiobooks) media_kind string Media type of this track: music , movie , podcast , audiobook , musicvideo , tvshow data_kind string Data type of this track: file , url , spotify , pipe path string Path uri string Resource identifier artwork_url string (optional) Artwork url usermark integer User review marking of track (ranges from 0)","title":"track object"},{"location":"json-api/#paging-object","text":"Key Type Value items array Array of result objects total integer Total number of items offset integer Requested offset of the first item limit integer Requested maximum number of items","title":"paging object"},{"location":"json-api/#browse-info-object","text":"Key Type Value name string Name (depends on the type of the query) name_sort string Sort name artist_count integer Number of artists album_count integer Number of albums track_count integer Number of tracks time_played string Timestamp in ISO 8601 format time_added string Timestamp in ISO 8601 format","title":"browse-info object"},{"location":"json-api/#directory-object","text":"Key Type Value path string Directory path","title":"directory object"},{"location":"json-api/#category-object","text":"Key Type Value name string Category name options array Array of option in this category","title":"category object"},{"location":"json-api/#option-object","text":"Key Type Value name string Option name type integer The type of the value for this option ( 0 : integer, 1 : boolean, 2 : string) value (integer / boolean / string) Current value for this option","title":"option object"},{"location":"json-api/#artwork-urls","text":"Artwork urls in queue item , artist , album and track objects can be either relative urls or absolute urls to the artwork image. Absolute artwork urls are pointing to external artwork images (e. g. for radio streams that provide artwork metadata), while relative artwork urls are served from the server. It is possible to add the query parameters maxwidth and/or maxheight to relative artwork urls, in order to get a smaller image (the server only scales down never up). Note that even if a relative artwork url attribute is present, it is not guaranteed to exist.","title":"Artwork urls"},{"location":"library/","text":"Library \u00b6 The library is scanned in bulk mode at startup, but the server will be available even while this scan is in progress. You can follow the progress of the scan in the log file or via the web interface. When the scan is complete you will see the log message: \"Bulk library scan completed in X sec\". The very first scan will take longer than subsequent startup scans, since every file gets analyzed. At the following startups the server looks for changed files and only analyzis those. Updates to the library are reflected in real time after the initial scan, so you do not need to manually start rescans. The directories are monitored for changes and rescanned on the fly. Note that if you have your library on a network mount then real time updating may not work. Read below about what to do in that case. If you change any of the directory settings in the library section of the configuration file a rescan is required before the new setting will take effect. You can do this by using \"Update library\" from the web interface. Symlinks are supported and dereferenced, but it is best to use them for directories only. Files starting with . (dot) and _ (underscore) are ignored. Pipes (for e.g. multiroom with Shairport-sync) \u00b6 Some programs, like for instance Shairport-sync, can be configured to output audio to a named pipe. If this pipe is placed in the library, OwnTone will automatically detect that it is there, and when there is audio being written to it, playback of the audio will be autostarted (and stopped). Using this feature, OwnTone can act as an AirPlay multiroom \"router\": You can have an AirPlay source (e.g. your iPhone) send audio Shairport-sync, which forwards it to OwnTone through the pipe, which then plays it on whatever speakers you have selected (through Remote). The format of the audio being written to the pipe must be PCM16. You can also start playback of pipes manually. You will find them in remotes listed under \"Unknown artist\" and \"Unknown album\". The track title will be the name of the pipe. Shairport-sync can write metadata to a pipe, and OwnTone can read this. This requires that the metadata pipe has the same filename as the audio pipe plus a \".metadata\" suffix. Say Shairport-sync is configured to write audio to \"/foo/bar/pipe\", then the metadata pipe should be \"/foo/bar/pipe.metadata\". Libraries on network mounts \u00b6 Most network filesharing protocols do not offer notifications when the library is changed. So that means OwnTone cannot update its database in real time. Instead you can schedule a cron job to update the database. The first step in doing this is to add two entries to the 'directories' configuration item in owntone.conf: directories = { \"/some/local/dir\", \"/your/network/mount/library\" } Now you can make a cron job that runs this command: touch /some/local/dir/trigger.init-rescan When OwnTone detects a file with filename ending .init-rescan it will perform a bulk scan similar to the startup scan. Alternatively, you can force a metadata scan of the library even if the files have not changed by creating a filename ending .meta-rescan . Supported formats \u00b6 OwnTone should support pretty much all audio formats. It relies on libav (or ffmpeg) to extract metadata and decode the files on the fly when the client doesn't support the format. Formats are attributed a code, so any new format will need to be explicitely added. Currently supported: MPEG4: mp4a, mp4v AAC: alac MP3 (and friends): mpeg FLAC: flac OGG VORBIS: ogg Musepack: mpc WMA: wma (WMA Pro), wmal (WMA Lossless), wmav (WMA video) AIFF: aif WAV: wav Monkey's audio: ape Troubleshooting library issues \u00b6 If you place a file with the filename ending .full-rescan in your library, you can trigger a full rescan of your library. This will clear all music and playlists from OwnTone's database and initiate a fresh bulk scan. Pairing and speaker information will be kept. Only use this for troubleshooting, it is not necessary during normal operation.","title":"Library"},{"location":"library/#library","text":"The library is scanned in bulk mode at startup, but the server will be available even while this scan is in progress. You can follow the progress of the scan in the log file or via the web interface. When the scan is complete you will see the log message: \"Bulk library scan completed in X sec\". The very first scan will take longer than subsequent startup scans, since every file gets analyzed. At the following startups the server looks for changed files and only analyzis those. Updates to the library are reflected in real time after the initial scan, so you do not need to manually start rescans. The directories are monitored for changes and rescanned on the fly. Note that if you have your library on a network mount then real time updating may not work. Read below about what to do in that case. If you change any of the directory settings in the library section of the configuration file a rescan is required before the new setting will take effect. You can do this by using \"Update library\" from the web interface. Symlinks are supported and dereferenced, but it is best to use them for directories only. Files starting with . (dot) and _ (underscore) are ignored.","title":"Library"},{"location":"library/#pipes-for-eg-multiroom-with-shairport-sync","text":"Some programs, like for instance Shairport-sync, can be configured to output audio to a named pipe. If this pipe is placed in the library, OwnTone will automatically detect that it is there, and when there is audio being written to it, playback of the audio will be autostarted (and stopped). Using this feature, OwnTone can act as an AirPlay multiroom \"router\": You can have an AirPlay source (e.g. your iPhone) send audio Shairport-sync, which forwards it to OwnTone through the pipe, which then plays it on whatever speakers you have selected (through Remote). The format of the audio being written to the pipe must be PCM16. You can also start playback of pipes manually. You will find them in remotes listed under \"Unknown artist\" and \"Unknown album\". The track title will be the name of the pipe. Shairport-sync can write metadata to a pipe, and OwnTone can read this. This requires that the metadata pipe has the same filename as the audio pipe plus a \".metadata\" suffix. Say Shairport-sync is configured to write audio to \"/foo/bar/pipe\", then the metadata pipe should be \"/foo/bar/pipe.metadata\".","title":"Pipes (for e.g. multiroom with Shairport-sync)"},{"location":"library/#libraries-on-network-mounts","text":"Most network filesharing protocols do not offer notifications when the library is changed. So that means OwnTone cannot update its database in real time. Instead you can schedule a cron job to update the database. The first step in doing this is to add two entries to the 'directories' configuration item in owntone.conf: directories = { \"/some/local/dir\", \"/your/network/mount/library\" } Now you can make a cron job that runs this command: touch /some/local/dir/trigger.init-rescan When OwnTone detects a file with filename ending .init-rescan it will perform a bulk scan similar to the startup scan. Alternatively, you can force a metadata scan of the library even if the files have not changed by creating a filename ending .meta-rescan .","title":"Libraries on network mounts"},{"location":"library/#supported-formats","text":"OwnTone should support pretty much all audio formats. It relies on libav (or ffmpeg) to extract metadata and decode the files on the fly when the client doesn't support the format. Formats are attributed a code, so any new format will need to be explicitely added. Currently supported: MPEG4: mp4a, mp4v AAC: alac MP3 (and friends): mpeg FLAC: flac OGG VORBIS: ogg Musepack: mpc WMA: wma (WMA Pro), wmal (WMA Lossless), wmav (WMA video) AIFF: aif WAV: wav Monkey's audio: ape","title":"Supported formats"},{"location":"library/#troubleshooting-library-issues","text":"If you place a file with the filename ending .full-rescan in your library, you can trigger a full rescan of your library. This will clear all music and playlists from OwnTone's database and initiate a fresh bulk scan. Pairing and speaker information will be kept. Only use this for troubleshooting, it is not necessary during normal operation.","title":"Troubleshooting library issues"},{"location":"playlists/","text":"Playlists and internet radio \u00b6 OwnTone supports M3U and PLS playlists. Just drop your playlist somewhere in your library with an .m3u or .pls extension and it will pick it up. From the web interface, and some mpd clients, you can also create and modify playlists by saving the current queue. Click the \"Save\" button. Note that this requires that allow_modifying_stored_playlists is enabled in the configuration file, and that the server has write access to default_playlist_directory . If the playlist contains an http URL it will be added as an internet radio station, and the URL will be probed for Shoutcast (ICY) metadata. If the radio station provides artwork, OwnTone will download it during playback and send it to any remotes or AirPlay devices requesting it. Instead of downloading M3U's from your radio stations, you can also make an empty M3U file and insert links in it to the M3U's of your radio stations. Radio streams can only be played by OwnTone, so that means they will not be available to play in DAAP clients like iTunes. The server can import playlists from iTunes Music Library XML files. By default, metadata from our parsers is preferred over what's in the iTunes DB; use itunes_overrides = true if you prefer iTunes' metadata. OwnTone has support for smart playlists. How to create a smart playlist is documented in Smart playlists . If you're not satisfied with internet radio metadata that OwnTone shows, then you can read about tweaking it in Radio streams .","title":"Playlists & radio"},{"location":"playlists/#playlists-and-internet-radio","text":"OwnTone supports M3U and PLS playlists. Just drop your playlist somewhere in your library with an .m3u or .pls extension and it will pick it up. From the web interface, and some mpd clients, you can also create and modify playlists by saving the current queue. Click the \"Save\" button. Note that this requires that allow_modifying_stored_playlists is enabled in the configuration file, and that the server has write access to default_playlist_directory . If the playlist contains an http URL it will be added as an internet radio station, and the URL will be probed for Shoutcast (ICY) metadata. If the radio station provides artwork, OwnTone will download it during playback and send it to any remotes or AirPlay devices requesting it. Instead of downloading M3U's from your radio stations, you can also make an empty M3U file and insert links in it to the M3U's of your radio stations. Radio streams can only be played by OwnTone, so that means they will not be available to play in DAAP clients like iTunes. The server can import playlists from iTunes Music Library XML files. By default, metadata from our parsers is preferred over what's in the iTunes DB; use itunes_overrides = true if you prefer iTunes' metadata. OwnTone has support for smart playlists. How to create a smart playlist is documented in Smart playlists . If you're not satisfied with internet radio metadata that OwnTone shows, then you can read about tweaking it in Radio streams .","title":"Playlists and internet radio"},{"location":"smart-playlists/","text":"OwnTone smart playlists \u00b6 To add a smart playlist to the server, create a new text file with a filename ending with .smartpl; the filename doesn't matter, only the .smartpl ending does. The file must be placed somewhere in your library folder. Syntax \u00b6 The contents of a smart playlist must follow the syntax: \"Playlist Name\" { expression } There is exactly one smart playlist allowed for a .smartpl file. An expression consists of: field-name operator operand Where valid field-names (with their types) are: artist (string) album_artist (string) album (string) title (string) genre (string) composer (string) comment (string) path (string) type (string) grouping (string) data_kind (enumeration) media_kind (enumeration) play_count (integer) skip_count (integer) rating (integer) year (integer) compilation (integer) track (integer) disc (integer) time_added (date) time_modified (date) time_played (date) time_skipped (date) random (special) file_size (integer) Valid operators include: is , includes , starts with , ends with (string) > , < , <= , >= , = (int) after , before (date) is (enumeration) The is operator must exactly match the field value, while the includes operator matches a substring. The starts with operator matches, if the value starts with the given prefix, and ends with matches the opposite. All these matches are case-insensitive. Valid operands include: \"string value\" (string) integer (int) Valid operands for the enumeration data_kind are: file url spotify pipe Valid operands for the enumeration media_kind are: music movie podcast audiobook tvshow Multiple expressions can be anded or ored together, using the keywords OR and AND . The unary not operator is also supported using the keyword NOT . It is possible to define the sort order and limit the number of items by adding an order clause and/or a limit clause after the last expression: \"Playlist Name\" { expression ORDER BY field-name sort-direction LIMIT limit } \"sort-direction\" is either ASC (ascending) or DESC (descending). \"limit\" is the maximum number of items. There is additionally a special random field-name that can be used in conjunction with limit to select a random number of items based on current expression. Examples \u00b6 \"techno\" { genre includes \"techno\" and artist includes \"zombie\" } This would match songs by \"Rob Zombie\" or \"White Zombie\", as well as those with a genre of \"Techno-Industrial\" or \"Trance/Techno\", for example. \"techno 2015\" { genre includes \"techno\" and artist includes \"zombie\" and not genre includes \"industrial\" } This would exclude e. g. songs with the genre \"Techno-Industrial\". \"Local music\" { data_kind is file and media_kind is music } This would match all songs added as files to the library that are not placed under the folders for podcasts, audiobooks. \"Unplayed podcasts and audiobooks\" { play_count = 0 and (media_kind is podcast or media_kind is audiobook) } This would match any podcast and audiobook file that was never played. \"Recently added music\" { media_kind is music order by time_added desc limit 10 } This would match the last 10 music files added to the library. \"Random 10 Rated Pop songs\" { rating > 0 and genre is \"Pop\" and media_kind is music order by random desc limit 10 } This generates a random set of, maximum of 10, rated Pop music tracks every time the playlist is queried. Date operand syntax \u00b6 One example of a valid date is a date in yyyy-mm-dd format: \"Files added after January 1, 2004\" { time_added after 2004-01-01 } There are also some special date keywords: today , yesterday , this week , last week , last month , last year These dates refer to the start of that period; today means 00:00hrs of today, this week means current Monday 00:00hrs, last week means the previous Monday 00:00hrs, last month is the first day of the previous month at 00:00hrs etc. A valid date can also be made by applying an interval to a date. Intervals can be defined as days , weeks , months , years . As an example, a valid date might be: 3 weeks before today or 3 weeks ago Examples: \"Recently Added\" { time_added after 2 weeks ago } This matches all songs added in the last 2 weeks. \"Recently played audiobooks\" { time_played after last week and media_kind is audiobook } This matches all audiobooks played since the start of the last Monday 00:00AM. All dates, except for YYYY-DD-HH , are relative to the day of when the server evaluates the smartpl query; time_added after today run on a Monday would match against items added since Monday 00:00hrs and evaluating the same smartpl on Friday would only match against added on Friday 00:00hrs. Note that time_added after 4 weeks ago and time_added after last month are subtly different; the former is exactly 4 weeks ago (from today) whereas the latter is the first day of the previous month. Differences to mt-daapd smart playlists \u00b6 The syntax is really close to the mt-daapd smart playlist syntax (see http://sourceforge.net/p/mt-daapd/code/HEAD/tree/tags/release-0.2.4.2/contrib/mt-daapd.playlist ). Even this documentation is based on the file linked above. Some differences are: only one smart playlist per file the not operator must be placed before an expression and not before the operator || , && , ! are not supported (use or , and , not ) comments are not supported","title":"Smart playlists"},{"location":"smart-playlists/#owntone-smart-playlists","text":"To add a smart playlist to the server, create a new text file with a filename ending with .smartpl; the filename doesn't matter, only the .smartpl ending does. The file must be placed somewhere in your library folder.","title":"OwnTone smart playlists"},{"location":"smart-playlists/#syntax","text":"The contents of a smart playlist must follow the syntax: \"Playlist Name\" { expression } There is exactly one smart playlist allowed for a .smartpl file. An expression consists of: field-name operator operand Where valid field-names (with their types) are: artist (string) album_artist (string) album (string) title (string) genre (string) composer (string) comment (string) path (string) type (string) grouping (string) data_kind (enumeration) media_kind (enumeration) play_count (integer) skip_count (integer) rating (integer) year (integer) compilation (integer) track (integer) disc (integer) time_added (date) time_modified (date) time_played (date) time_skipped (date) random (special) file_size (integer) Valid operators include: is , includes , starts with , ends with (string) > , < , <= , >= , = (int) after , before (date) is (enumeration) The is operator must exactly match the field value, while the includes operator matches a substring. The starts with operator matches, if the value starts with the given prefix, and ends with matches the opposite. All these matches are case-insensitive. Valid operands include: \"string value\" (string) integer (int) Valid operands for the enumeration data_kind are: file url spotify pipe Valid operands for the enumeration media_kind are: music movie podcast audiobook tvshow Multiple expressions can be anded or ored together, using the keywords OR and AND . The unary not operator is also supported using the keyword NOT . It is possible to define the sort order and limit the number of items by adding an order clause and/or a limit clause after the last expression: \"Playlist Name\" { expression ORDER BY field-name sort-direction LIMIT limit } \"sort-direction\" is either ASC (ascending) or DESC (descending). \"limit\" is the maximum number of items. There is additionally a special random field-name that can be used in conjunction with limit to select a random number of items based on current expression.","title":"Syntax"},{"location":"smart-playlists/#examples","text":"\"techno\" { genre includes \"techno\" and artist includes \"zombie\" } This would match songs by \"Rob Zombie\" or \"White Zombie\", as well as those with a genre of \"Techno-Industrial\" or \"Trance/Techno\", for example. \"techno 2015\" { genre includes \"techno\" and artist includes \"zombie\" and not genre includes \"industrial\" } This would exclude e. g. songs with the genre \"Techno-Industrial\". \"Local music\" { data_kind is file and media_kind is music } This would match all songs added as files to the library that are not placed under the folders for podcasts, audiobooks. \"Unplayed podcasts and audiobooks\" { play_count = 0 and (media_kind is podcast or media_kind is audiobook) } This would match any podcast and audiobook file that was never played. \"Recently added music\" { media_kind is music order by time_added desc limit 10 } This would match the last 10 music files added to the library. \"Random 10 Rated Pop songs\" { rating > 0 and genre is \"Pop\" and media_kind is music order by random desc limit 10 } This generates a random set of, maximum of 10, rated Pop music tracks every time the playlist is queried.","title":"Examples"},{"location":"smart-playlists/#date-operand-syntax","text":"One example of a valid date is a date in yyyy-mm-dd format: \"Files added after January 1, 2004\" { time_added after 2004-01-01 } There are also some special date keywords: today , yesterday , this week , last week , last month , last year These dates refer to the start of that period; today means 00:00hrs of today, this week means current Monday 00:00hrs, last week means the previous Monday 00:00hrs, last month is the first day of the previous month at 00:00hrs etc. A valid date can also be made by applying an interval to a date. Intervals can be defined as days , weeks , months , years . As an example, a valid date might be: 3 weeks before today or 3 weeks ago Examples: \"Recently Added\" { time_added after 2 weeks ago } This matches all songs added in the last 2 weeks. \"Recently played audiobooks\" { time_played after last week and media_kind is audiobook } This matches all audiobooks played since the start of the last Monday 00:00AM. All dates, except for YYYY-DD-HH , are relative to the day of when the server evaluates the smartpl query; time_added after today run on a Monday would match against items added since Monday 00:00hrs and evaluating the same smartpl on Friday would only match against added on Friday 00:00hrs. Note that time_added after 4 weeks ago and time_added after last month are subtly different; the former is exactly 4 weeks ago (from today) whereas the latter is the first day of the previous month.","title":"Date operand syntax"},{"location":"smart-playlists/#differences-to-mt-daapd-smart-playlists","text":"The syntax is really close to the mt-daapd smart playlist syntax (see http://sourceforge.net/p/mt-daapd/code/HEAD/tree/tags/release-0.2.4.2/contrib/mt-daapd.playlist ). Even this documentation is based on the file linked above. Some differences are: only one smart playlist per file the not operator must be placed before an expression and not before the operator || , && , ! are not supported (use or , and , not ) comments are not supported","title":"Differences to mt-daapd smart playlists"},{"location":"advanced/multiple-instances/","text":"Running Multiple Instances \u00b6 To run multiple instances of owntone on a server, you should copy /etc/owntone.conf to /etc/owntone-zone.conf (for each zone ) and modify the following to be unique across all instances: the three port settings ( general -> websocket_port , library -> port , and mpd -> port ) the database paths ( general -> db_path , db_backup_path , and db_cache_path ) the service name ( library -> name ). you probably also want to disable local output (set audio -> type = \"disabled\" ). Then run owntone -c /etc/owntone-zone.conf to run owntone with the new zone configuration. Owntone has a systemd template which lets you run this automatically on systems that use systemd. You can start or enable the service for a zone by sudo systemctl start owntone@zone and check that it is running with sudo systemctl status owntone@zone . Use sudo systemctl enable ownton@zone to get the service to start on reboot.","title":"Multiple instances"},{"location":"advanced/multiple-instances/#running-multiple-instances","text":"To run multiple instances of owntone on a server, you should copy /etc/owntone.conf to /etc/owntone-zone.conf (for each zone ) and modify the following to be unique across all instances: the three port settings ( general -> websocket_port , library -> port , and mpd -> port ) the database paths ( general -> db_path , db_backup_path , and db_cache_path ) the service name ( library -> name ). you probably also want to disable local output (set audio -> type = \"disabled\" ). Then run owntone -c /etc/owntone-zone.conf to run owntone with the new zone configuration. Owntone has a systemd template which lets you run this automatically on systems that use systemd. You can start or enable the service for a zone by sudo systemctl start owntone@zone and check that it is running with sudo systemctl status owntone@zone . Use sudo systemctl enable ownton@zone to get the service to start on reboot.","title":"Running Multiple Instances"},{"location":"advanced/outputs-alsa/","text":"OwnTone and ALSA \u00b6 ALSA is one of the main output configuration options for local audio; when using ALSA you will typically let the system select the soundcard on your machine as the default device/sound card - a mixer associated with the ALSA device is used for volume control. However if your machine has multiple sound cards and your system chooses the wrong playback device, you will need to manually select the card and mixer to complete the OwnTone configuration. Quick introduction to ALSA devices \u00b6 ALSA devices can be addressed in a number ways but traditionally we have referred to them using the hardware prefix, card number and optionally device number with something like hw:0 or hw:0,1 . In ALSA configuration terms card X, device Y is known as hw:X,Y . ALSA has other prefixes for each card and most importantly plughw . The plughw performs transparent sample format and sample rate conversions and maybe a better choice for many users rather than hw: which would fail when provided unsupported audio formats/sample rates. Alternative ALSA names can be used to refer to physical ALSA devices and can be useful in a number of ways: more descriptive rather than being a card number consistent for USB numeration - USB ALSA devices may not have the same card number across reboots/reconnects The ALSA device information required for configuration the server can be deterined using aplay , as described in the rest of this document, but OwnTone can also assist; when configured to log at INFO level the following information is provided during startup: laudio: Available ALSA playback mixer(s) on hw:0 CARD=Intel (HDA Intel): 'Master' 'Headphone' 'Speaker' 'PCM' 'Mic' 'Beep' laudio: Available ALSA playback mixer(s) on hw:1 CARD=E30 (E30): 'E30 ' laudio: Available ALSA playback mixer(s) on hw:2 CARD=Seri (Plantronics Blackwire 3210 Seri): 'Sidetone' 'Headset' The CARD= string is the alternate ALSA name for the device and can be used in place of the traditional hw:x name. On this machine the server reports that it can see the onboard HDA Intel sound card and two additional sound cards: a Topping E30 DAC and a Plantronics Headset which are both USB devices. We can address the first ALSA device as hw:0 or hw:CARD=Intel or hw:Intel or plughw:Intel , the second ALSA device as hw:1 or hw:E30 and so forth. The latter 2 devices being on USB will mean that hw:1 may not always refer to hw:E30 and thus in such a case using the alternate name is useful. Configuring the server \u00b6 OwnTone can support a single ALSA device or multiple ALSA devices. # example audio section for server for a single soundcard audio { nickname = \"Computer\" type = \"alsa\" card = \"hw:1\" # defaults to 'default' mixer = \"Analogue\" # defaults to 'PCM' or 'Master' mixer_device = \"hw:1\" # defaults to same as 'card' value } Multiple devices can be made available to OwnTone using seperate alsa { .. } sections. audio { type = \"alsa\" } alsa \"hw:1\" { nickname = \"Computer\" mixer = \"Analogue\" mixer_device = \"hw:1\" } alsa \"hw:2\" { nickname = \"Second ALSA device\" } NB: When introducing alsa { .. } section(s) the ALSA specific configuration in the audio { .. } section will be ignored. If there is only one sound card, verify if the default sound device is correct for playback, we will use the aplay utility. # generate some audio if you don't have a wav file to hand $ sox -n -c 2 -r 44100 -b 16 -C 128 /tmp/sine441.wav synth 30 sin 500-100 fade h 0.2 30 0.2 $ aplay -Ddefault /tmp/sine441.wav If you can hear music played then you are good to use default for the server configuration. If you can not hear anything from the aplay firstly verify (using alsamixer ) that the sound card is not muted. If the card is not muted AND there is no sound you can try the options below to determine the card and mixer for configuring the server. Automatically Determine ALL relevant the sound card information \u00b6 As shown above, OwnTone can help, consider the information that logged: laudio: Available ALSA playback mixer(s) on hw:0 CARD=Intel (HDA Intel): 'Master' 'Headphone' 'Speaker' 'PCM' 'Mic' 'Beep' laudio: Available ALSA playback mixer(s) on hw:1 CARD=E30 (E30): 'E30 ' laudio: Available ALSA playback mixer(s) on hw:2 CARD=Seri (Plantronics Blackwire 3210 Seri): 'Sidetone' 'Headset' Using the information above, we can see 3 soundcards that we could use with OwnTone with the first soundcard having a number of seperate mixer devices (volume control) for headphone and the interal speakers - we'll configure the server to use both these and also the E30 device. The server configuration for theese multiple outputs would be: # using ALSA device alias where possible alsa \"hw:Intel\" { nickname = \"Computer - Speaker\" mixer = \"Speaker\" } alsa \"hw:Intel\" { nickname = \"Computer - Headphones\" mixer = \"Headphone\" } alsa \"plughw:E30\" { # this E30 device only support S32_LE so we can use the 'plughw' prefix to # add transparent conversion support of more common S16/S24_LE formats nickname = \"E30 DAC\" mixer = \"E30 \" mixer_device = \"hw:E30\" } NB: it is troublesome to use hw or plughw ALSA addressing when running OwnTone on a machine with pulseaudio and if you wish to use refer to ALSA devices directly that you stop pulseaudio . Manually Determining the sound cards you have / ALSA can see \u00b6 The example below is how I determined the correct sound card and mixer values for a Raspberry Pi that has an additional DAC card (hat) mounted. Of course using the log output from the server would have given the same results. Use aplay -l to list all the sound cards and their order as known to the system - you can have multiple card X, device Y entries; some cards can also have multiple playback devices such as the RPI's onboard soundcard which feeds both headphone (card 0, device 0) and HDMI (card 0, device 1). $ aplay -l **** List of PLAYBACK Hardware Devices **** card 0: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA] Subdevices: 6/7 Subdevice #0: subdevice #0 Subdevice #1: subdevice #1 Subdevice #2: subdevice #2 Subdevice #3: subdevice #3 Subdevice #4: subdevice #4 Subdevice #5: subdevice #5 Subdevice #6: subdevice #6 card 0: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI] Subdevices: 1/1 Subdevice #0: subdevice #0 card 1: IQaudIODAC [IQaudIODAC], device 0: IQaudIO DAC HiFi pcm512x-hifi-0 [] Subdevices: 1/1 Subdevice #0: subdevice #0 On this machine we see the second sound card installed, an IQaudIODAC dac hat, and identified as card 1 device 0 . This is the playback device we want to be used by the server. hw:1,0 is the IQaudIODAC that we want to use - we verify audiable playback through that sound card using aplay -Dhw:1 /tmp/sine441.wav . If the card has only one device, we can simply refer to the sound card using hw:X so in this case where the IQaudIODAC only has one device, we can refer to this card as hw:1 or hw:1,0 . Use aplay -L to get more information about the PCM devices defined on the system. $ aplay -L null Discard all samples (playback) or generate zero samples (capture) default:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device sysdefault:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device dmix:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct sample mixing device dmix:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct sample mixing device dsnoop:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct sample snooping device dsnoop:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct sample snooping device hw:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct hardware device without any conversions hw:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct hardware device without any conversions plughw:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Hardware device with all software conversions plughw:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Hardware device with all software conversions default:CARD=IQaudIODAC IQaudIODAC, Default Audio Device sysdefault:CARD=IQaudIODAC IQaudIODAC, Default Audio Device dmix:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct sample mixing device dsnoop:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct sample snooping device hw:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct hardware device without any conversions plughw:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Hardware device with all software conversions For the server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"hw:1\" # mixer=TBD # mixer_device=TBD } Mixer name \u00b6 Once you have the card number (determined from aplay -l ) we can inspect/confirm the name of the mixer that can be used for playback (it may NOT be PCM as expected by the server). In this example, the card 1 is of interest and thus we use -c 1 with the following command: $ amixer -c 1 Simple mixer control 'DSP Program',0 Capabilities: enum Items: 'FIR interpolation with de-emphasis' 'Low latency IIR with de-emphasis' 'High attenuation with de-emphasis' 'Fixed process flow' 'Ringing-less low latency FIR' Item0: 'Ringing-less low latency FIR' Simple mixer control 'Analogue',0 Capabilities: pvolume Playback channels: Front Left - Front Right Limits: Playback 0 - 1 Mono: Front Left: Playback 1 [100%] [0.00dB] Front Right: Playback 1 [100%] [0.00dB] Simple mixer control 'Analogue Playback Boost',0 Capabilities: volume Playback channels: Front Left - Front Right Capture channels: Front Left - Front Right Limits: 0 - 1 Front Left: 0 [0%] [0.00dB] Front Right: 0 [0%] [0.00dB] ... This card has multiple controls but we want to find a mixer control listed with a pvolume (playback) capability - in this case that mixer value required for the server configuration is called Analogue . For the server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"hw:1\" mixer=\"Analogue\" # mixer_device=TBD } Mixer device \u00b6 This is the name of the underlying physical device used for the mixer - it is typically the same value as the value of card in which case a value is not required by the server configuration. An example of when you want to change explicitly configure this is if you need to use a dmix device (see below). Handling Devices that cannot concurrently play multiple audio streams \u00b6 Some devices such as various RPI DAC boards (IQaudio DAC, Allo Boss DAC...) cannot have multiple streams openned at the same time/cannot play multiple sound files at the same time. This results in Device or resource busy errors. You can confirm if your sound card has this problem by using the example below once have determined the names/cards information as above. Using our hw:1 device we try: # generate some audio $ sox -n -c 2 -r 44100 -b 16 -C 128 /tmp/sine441.wav synth 30 sin 500-100 fade h 0.2 30 0.2 # attempt to play 2 files at the same time $ aplay -v -Dhw:1 /tmp/sine441.wav & Playing WAVE '/tmp/sine441.wav' : Signed 16 bit Little Endian, Rate 44100 Hz, Stereo Hardware PCM card 1 'IQaudIODAC' device 0 subdevice 0 Its setup is: stream : PLAYBACK access : RW_INTERLEAVED format : S16_LE subformat : STD channels : 2 rate : 44100 exact rate : 44100 (44100/1) msbits : 16 buffer_size : 22052 period_size : 5513 period_time : 125011 tstamp_mode : NONE tstamp_type : MONOTONIC period_step : 1 avail_min : 5513 period_event : 0 start_threshold : 22052 stop_threshold : 22052 silence_threshold: 0 silence_size : 0 boundary : 1445199872 appl_ptr : 0 hw_ptr : 0 $ aplay -v -Dhw:1 /tmp/sine441.wav aplay: main:788: audio open error: Device or resource busy In this instance this device cannot open multiple streams - OwnTone can handle this situation transparently with some audio being truncated from the end of the current file as the server prepares to play the following track. If this handling is causing you problems you may wish to use ALSA's dmix functionally which provides a software mixing module. We will need to define a dmix component and configure the server to use that as it's sound card. The downside to the dmix approach will be the need to fix a samplerate (48000 being the default) for this software mixing module meaning any files that have a mismatched samplerate will be resampled. ALSA dmix configuration/setup \u00b6 A dmix device can be defined in /etc/asound.conf or ~/.asoundrc for the same user running OwnTone. We will need to know the underlying physical soundcard to be used: in our examples above, hw:1,0 / card 1, device 0 representing our IQaudIODAC as per output of aplay -l . We also take the buffer_size and period_size from the output of playing a sound file via aplay -v . # use 'dac' as the name of the device: \"aplay -Ddac ....\" pcm.!dac { type plug slave.pcm \"dmixer\" hint.description \"IQAudio DAC s/w dmix enabled device\" } pcm.dmixer { type dmix ipc_key 1024 # need to be uniq value ipc_key_add_uid false # multiple concurrent different users ipc_perm 0666 # multi-user sharing permissions slave { pcm \"hw:1,0\" # points at the underlying device - could also simply be hw:1 period_time 0 period_size 4096 # from the output of aplay -v buffer_size 22052 # from the output of aplay -v rate 44100 # locked in sample rate for resampling on dmix device } hint.description \"IQAudio DAC s/w dmix device\" } ctl.dmixer { type hw card 1 # underlying device device 0 } Running aplay -L we will see our newly defined devices dac and dmixer $ aplay -L null Discard all samples (playback) or generate zero samples (capture) dac IQAudio DAC s/w dmix enabled device dmixer IQAudio DAC s/w dmix device default:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device ... At this point we are able to rerun the concurrent aplay commands (adding -Ddac to specify the playback device to use) to verify ALSA configuration. If there is only one card on the machine you may use pcm.!default instead of pcm.!dac - there is less configuration to be done later since many ALSA applications will use the device called default by default. Furthermore on RPI you can explicitly disable the onboard sound card to leave us with only the IQaudIODAC board enabled (won't affect HDMI sound output) by commenting out #dtparam=audio=on in /boot/config.txt and rebooting. Config with dmix \u00b6 We will use the newly defined card named dac which uses the underlying hw:1 device as per /etc/asound.conf or ~/.asoundrc configuration. Note that the mixer_device is now required and must refer to the real device (see the slave.pcm value) and not the named device (ie dac ) that we created and are using for the card configuration value. For the final server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"dac\" mixer=\"Analogue\" mixer_device=\"hw:1\" } Setting up an Audio Equalizer \u00b6 There exists an ALSA equalizer plugin. On debian (incl Raspberry Pi) systems you can install this plugin by apt install libasound2-plugin-equal ; this is not currently available on Fedora (FC31) but can be easily built from source after installing the dependant ladspa package. Once installed the user must setup a virtual device and use this device in the server configuration. If you wish to use your hw:0 device for output: # /etc/asound.conf ctl.equal { type equal; # library /usr/lib64/ladspa/caps.so } pcm.equal { type plug; slave.pcm { type equal; ## must be plughw:x,y and not hw:x,y slave.pcm \"plughw:0,0\"; # library /usr/lib64/ladspa/caps.so } hint.description \"equalised device\" } and in owntone.conf alsa \"equal\" { nickname = \"Equalised Output\" # adjust accordingly for mixer with pvolume capability mixer = \"PCM\" mixer_device = \"hw:0\" } Using the web UI and on the outputs selection you should see an output called Equalised Output which you should select and set the volume. When starting playback for any audio tracks you should hopefully hear the output. In a terminal, run alsamixer -Dequal and you'll see the eqaliser - to test that this is all working, go and drop the upper frequencies and boosting the bass frequencies and give it a second - if this changes the sound profile from your speakers, well done, its done and you can adjust the equalizer as you desire. Note however, the equalizer appears to require a plughw device which means you cannnot use this equalizer with a dmix output chain. Troubleshooting \u00b6 Errors in log Failed to open configured mixer element when selecting output device Errors in log Invalid CTL or Failed to attach mixer when playing/adjusting volume mixer value is wrong. Verify name of mixer value in server config against the names from all devices capable of playback using amixer -c <card number> . Assume the device is card 1: (IFS=$'\\n' CARD=1 for i in $(amixer -c ${CARD} scontrols | awk -F\\' '{ print $2 }'); do amixer -c ${CARD} sget \"$i\" | grep Capabilities | grep -q pvolume && echo $i done ) Look at the names output and choose the one that fits. The outputs can be something like: # laptop Master Headphone Speaker PCM Mic Beep # RPI with no additional DAC, card = 0 PCM # RPI with additional DAC hat (IQAudioDAC, using a pcm512x chip) Analogue Digital No sound during playback - valid mixer/verified by aplay Check that the mixer is not muted or volume set to 0. Using the value of mixer as per server config and unmute or set volume to max. Assume the device is card 1 and mixer = Analogue : amixer -c 1 set Analogue unmute ## some mixers can not be muted resulting in \"invalid command\" amixer -c 1 set Analogue 100% An example of a device with volume turned all the way down - notice the Playback values are 0 [0%]`: Simple mixer control 'Analogue',0 Capabilities: pvolume Playback channels: Front Left - Front Right Limits: Playback 0 - 1 Mono: Front Left: Playback 0 [0%] [-6.00dB] Front Right: Playback 0 [0%] [-6.00dB] Server stops playing after moving to new track in paly queue, Error in log Could not open playback device The log contains these log lines: [2019-06-19 20:52:51] [ LOG] laudio: open '/dev/snd/pcmC0D0p' failed (-16)[2019-06-19 20:52:51] [ LOG] laudio: Could not open playback device: Device or resource busy [2019-06-19 20:52:51] [ LOG] laudio: Device 'hw' does not support quality (48000/16/2), falling back to default [2019-06-19 20:52:51] [ LOG] laudio: open '/dev/snd/pcmC0D0p' failed (-16)[2019-06-19 20:52:51] [ LOG] laudio: Could not open playback device: Device or resource busy [2019-06-19 20:52:51] [ LOG] laudio: ALSA device failed setting fallback quality[2019-06-19 20:52:51] [ LOG] player: The ALSA device 'Computer' FAILED If you have a RPI with a DAC hat with a pcm512x chip will affect you. This is because the server wants to open the audio device for the next audio track whilst current track is still playing but the hardware does not allow this - see the comments above regarding determining concurrrent playback. This error will occur for output hardware that do not support concurrent device open and the server plays 2 files of different bitrate (44.1khz and 48khz) back to back. If you observe the error, you will need to use the dmix configuration as mentioned above.","title":"Alsa"},{"location":"advanced/outputs-alsa/#owntone-and-alsa","text":"ALSA is one of the main output configuration options for local audio; when using ALSA you will typically let the system select the soundcard on your machine as the default device/sound card - a mixer associated with the ALSA device is used for volume control. However if your machine has multiple sound cards and your system chooses the wrong playback device, you will need to manually select the card and mixer to complete the OwnTone configuration.","title":"OwnTone and ALSA"},{"location":"advanced/outputs-alsa/#quick-introduction-to-alsa-devices","text":"ALSA devices can be addressed in a number ways but traditionally we have referred to them using the hardware prefix, card number and optionally device number with something like hw:0 or hw:0,1 . In ALSA configuration terms card X, device Y is known as hw:X,Y . ALSA has other prefixes for each card and most importantly plughw . The plughw performs transparent sample format and sample rate conversions and maybe a better choice for many users rather than hw: which would fail when provided unsupported audio formats/sample rates. Alternative ALSA names can be used to refer to physical ALSA devices and can be useful in a number of ways: more descriptive rather than being a card number consistent for USB numeration - USB ALSA devices may not have the same card number across reboots/reconnects The ALSA device information required for configuration the server can be deterined using aplay , as described in the rest of this document, but OwnTone can also assist; when configured to log at INFO level the following information is provided during startup: laudio: Available ALSA playback mixer(s) on hw:0 CARD=Intel (HDA Intel): 'Master' 'Headphone' 'Speaker' 'PCM' 'Mic' 'Beep' laudio: Available ALSA playback mixer(s) on hw:1 CARD=E30 (E30): 'E30 ' laudio: Available ALSA playback mixer(s) on hw:2 CARD=Seri (Plantronics Blackwire 3210 Seri): 'Sidetone' 'Headset' The CARD= string is the alternate ALSA name for the device and can be used in place of the traditional hw:x name. On this machine the server reports that it can see the onboard HDA Intel sound card and two additional sound cards: a Topping E30 DAC and a Plantronics Headset which are both USB devices. We can address the first ALSA device as hw:0 or hw:CARD=Intel or hw:Intel or plughw:Intel , the second ALSA device as hw:1 or hw:E30 and so forth. The latter 2 devices being on USB will mean that hw:1 may not always refer to hw:E30 and thus in such a case using the alternate name is useful.","title":"Quick introduction to ALSA devices"},{"location":"advanced/outputs-alsa/#configuring-the-server","text":"OwnTone can support a single ALSA device or multiple ALSA devices. # example audio section for server for a single soundcard audio { nickname = \"Computer\" type = \"alsa\" card = \"hw:1\" # defaults to 'default' mixer = \"Analogue\" # defaults to 'PCM' or 'Master' mixer_device = \"hw:1\" # defaults to same as 'card' value } Multiple devices can be made available to OwnTone using seperate alsa { .. } sections. audio { type = \"alsa\" } alsa \"hw:1\" { nickname = \"Computer\" mixer = \"Analogue\" mixer_device = \"hw:1\" } alsa \"hw:2\" { nickname = \"Second ALSA device\" } NB: When introducing alsa { .. } section(s) the ALSA specific configuration in the audio { .. } section will be ignored. If there is only one sound card, verify if the default sound device is correct for playback, we will use the aplay utility. # generate some audio if you don't have a wav file to hand $ sox -n -c 2 -r 44100 -b 16 -C 128 /tmp/sine441.wav synth 30 sin 500-100 fade h 0.2 30 0.2 $ aplay -Ddefault /tmp/sine441.wav If you can hear music played then you are good to use default for the server configuration. If you can not hear anything from the aplay firstly verify (using alsamixer ) that the sound card is not muted. If the card is not muted AND there is no sound you can try the options below to determine the card and mixer for configuring the server.","title":"Configuring the server"},{"location":"advanced/outputs-alsa/#automatically-determine-all-relevant-the-sound-card-information","text":"As shown above, OwnTone can help, consider the information that logged: laudio: Available ALSA playback mixer(s) on hw:0 CARD=Intel (HDA Intel): 'Master' 'Headphone' 'Speaker' 'PCM' 'Mic' 'Beep' laudio: Available ALSA playback mixer(s) on hw:1 CARD=E30 (E30): 'E30 ' laudio: Available ALSA playback mixer(s) on hw:2 CARD=Seri (Plantronics Blackwire 3210 Seri): 'Sidetone' 'Headset' Using the information above, we can see 3 soundcards that we could use with OwnTone with the first soundcard having a number of seperate mixer devices (volume control) for headphone and the interal speakers - we'll configure the server to use both these and also the E30 device. The server configuration for theese multiple outputs would be: # using ALSA device alias where possible alsa \"hw:Intel\" { nickname = \"Computer - Speaker\" mixer = \"Speaker\" } alsa \"hw:Intel\" { nickname = \"Computer - Headphones\" mixer = \"Headphone\" } alsa \"plughw:E30\" { # this E30 device only support S32_LE so we can use the 'plughw' prefix to # add transparent conversion support of more common S16/S24_LE formats nickname = \"E30 DAC\" mixer = \"E30 \" mixer_device = \"hw:E30\" } NB: it is troublesome to use hw or plughw ALSA addressing when running OwnTone on a machine with pulseaudio and if you wish to use refer to ALSA devices directly that you stop pulseaudio .","title":"Automatically Determine ALL relevant the sound card information"},{"location":"advanced/outputs-alsa/#manually-determining-the-sound-cards-you-have-alsa-can-see","text":"The example below is how I determined the correct sound card and mixer values for a Raspberry Pi that has an additional DAC card (hat) mounted. Of course using the log output from the server would have given the same results. Use aplay -l to list all the sound cards and their order as known to the system - you can have multiple card X, device Y entries; some cards can also have multiple playback devices such as the RPI's onboard soundcard which feeds both headphone (card 0, device 0) and HDMI (card 0, device 1). $ aplay -l **** List of PLAYBACK Hardware Devices **** card 0: ALSA [bcm2835 ALSA], device 0: bcm2835 ALSA [bcm2835 ALSA] Subdevices: 6/7 Subdevice #0: subdevice #0 Subdevice #1: subdevice #1 Subdevice #2: subdevice #2 Subdevice #3: subdevice #3 Subdevice #4: subdevice #4 Subdevice #5: subdevice #5 Subdevice #6: subdevice #6 card 0: ALSA [bcm2835 ALSA], device 1: bcm2835 ALSA [bcm2835 IEC958/HDMI] Subdevices: 1/1 Subdevice #0: subdevice #0 card 1: IQaudIODAC [IQaudIODAC], device 0: IQaudIO DAC HiFi pcm512x-hifi-0 [] Subdevices: 1/1 Subdevice #0: subdevice #0 On this machine we see the second sound card installed, an IQaudIODAC dac hat, and identified as card 1 device 0 . This is the playback device we want to be used by the server. hw:1,0 is the IQaudIODAC that we want to use - we verify audiable playback through that sound card using aplay -Dhw:1 /tmp/sine441.wav . If the card has only one device, we can simply refer to the sound card using hw:X so in this case where the IQaudIODAC only has one device, we can refer to this card as hw:1 or hw:1,0 . Use aplay -L to get more information about the PCM devices defined on the system. $ aplay -L null Discard all samples (playback) or generate zero samples (capture) default:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device sysdefault:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device dmix:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct sample mixing device dmix:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct sample mixing device dsnoop:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct sample snooping device dsnoop:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct sample snooping device hw:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Direct hardware device without any conversions hw:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Direct hardware device without any conversions plughw:CARD=ALSA,DEV=0 bcm2835 ALSA, bcm2835 ALSA Hardware device with all software conversions plughw:CARD=ALSA,DEV=1 bcm2835 ALSA, bcm2835 IEC958/HDMI Hardware device with all software conversions default:CARD=IQaudIODAC IQaudIODAC, Default Audio Device sysdefault:CARD=IQaudIODAC IQaudIODAC, Default Audio Device dmix:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct sample mixing device dsnoop:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct sample snooping device hw:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Direct hardware device without any conversions plughw:CARD=IQaudIODAC,DEV=0 IQaudIODAC, Hardware device with all software conversions For the server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"hw:1\" # mixer=TBD # mixer_device=TBD }","title":"Manually Determining the sound cards you have / ALSA can see"},{"location":"advanced/outputs-alsa/#mixer-name","text":"Once you have the card number (determined from aplay -l ) we can inspect/confirm the name of the mixer that can be used for playback (it may NOT be PCM as expected by the server). In this example, the card 1 is of interest and thus we use -c 1 with the following command: $ amixer -c 1 Simple mixer control 'DSP Program',0 Capabilities: enum Items: 'FIR interpolation with de-emphasis' 'Low latency IIR with de-emphasis' 'High attenuation with de-emphasis' 'Fixed process flow' 'Ringing-less low latency FIR' Item0: 'Ringing-less low latency FIR' Simple mixer control 'Analogue',0 Capabilities: pvolume Playback channels: Front Left - Front Right Limits: Playback 0 - 1 Mono: Front Left: Playback 1 [100%] [0.00dB] Front Right: Playback 1 [100%] [0.00dB] Simple mixer control 'Analogue Playback Boost',0 Capabilities: volume Playback channels: Front Left - Front Right Capture channels: Front Left - Front Right Limits: 0 - 1 Front Left: 0 [0%] [0.00dB] Front Right: 0 [0%] [0.00dB] ... This card has multiple controls but we want to find a mixer control listed with a pvolume (playback) capability - in this case that mixer value required for the server configuration is called Analogue . For the server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"hw:1\" mixer=\"Analogue\" # mixer_device=TBD }","title":"Mixer name"},{"location":"advanced/outputs-alsa/#mixer-device","text":"This is the name of the underlying physical device used for the mixer - it is typically the same value as the value of card in which case a value is not required by the server configuration. An example of when you want to change explicitly configure this is if you need to use a dmix device (see below).","title":"Mixer device"},{"location":"advanced/outputs-alsa/#handling-devices-that-cannot-concurrently-play-multiple-audio-streams","text":"Some devices such as various RPI DAC boards (IQaudio DAC, Allo Boss DAC...) cannot have multiple streams openned at the same time/cannot play multiple sound files at the same time. This results in Device or resource busy errors. You can confirm if your sound card has this problem by using the example below once have determined the names/cards information as above. Using our hw:1 device we try: # generate some audio $ sox -n -c 2 -r 44100 -b 16 -C 128 /tmp/sine441.wav synth 30 sin 500-100 fade h 0.2 30 0.2 # attempt to play 2 files at the same time $ aplay -v -Dhw:1 /tmp/sine441.wav & Playing WAVE '/tmp/sine441.wav' : Signed 16 bit Little Endian, Rate 44100 Hz, Stereo Hardware PCM card 1 'IQaudIODAC' device 0 subdevice 0 Its setup is: stream : PLAYBACK access : RW_INTERLEAVED format : S16_LE subformat : STD channels : 2 rate : 44100 exact rate : 44100 (44100/1) msbits : 16 buffer_size : 22052 period_size : 5513 period_time : 125011 tstamp_mode : NONE tstamp_type : MONOTONIC period_step : 1 avail_min : 5513 period_event : 0 start_threshold : 22052 stop_threshold : 22052 silence_threshold: 0 silence_size : 0 boundary : 1445199872 appl_ptr : 0 hw_ptr : 0 $ aplay -v -Dhw:1 /tmp/sine441.wav aplay: main:788: audio open error: Device or resource busy In this instance this device cannot open multiple streams - OwnTone can handle this situation transparently with some audio being truncated from the end of the current file as the server prepares to play the following track. If this handling is causing you problems you may wish to use ALSA's dmix functionally which provides a software mixing module. We will need to define a dmix component and configure the server to use that as it's sound card. The downside to the dmix approach will be the need to fix a samplerate (48000 being the default) for this software mixing module meaning any files that have a mismatched samplerate will be resampled.","title":"Handling Devices that cannot concurrently play multiple audio streams"},{"location":"advanced/outputs-alsa/#alsa-dmix-configurationsetup","text":"A dmix device can be defined in /etc/asound.conf or ~/.asoundrc for the same user running OwnTone. We will need to know the underlying physical soundcard to be used: in our examples above, hw:1,0 / card 1, device 0 representing our IQaudIODAC as per output of aplay -l . We also take the buffer_size and period_size from the output of playing a sound file via aplay -v . # use 'dac' as the name of the device: \"aplay -Ddac ....\" pcm.!dac { type plug slave.pcm \"dmixer\" hint.description \"IQAudio DAC s/w dmix enabled device\" } pcm.dmixer { type dmix ipc_key 1024 # need to be uniq value ipc_key_add_uid false # multiple concurrent different users ipc_perm 0666 # multi-user sharing permissions slave { pcm \"hw:1,0\" # points at the underlying device - could also simply be hw:1 period_time 0 period_size 4096 # from the output of aplay -v buffer_size 22052 # from the output of aplay -v rate 44100 # locked in sample rate for resampling on dmix device } hint.description \"IQAudio DAC s/w dmix device\" } ctl.dmixer { type hw card 1 # underlying device device 0 } Running aplay -L we will see our newly defined devices dac and dmixer $ aplay -L null Discard all samples (playback) or generate zero samples (capture) dac IQAudio DAC s/w dmix enabled device dmixer IQAudio DAC s/w dmix device default:CARD=ALSA bcm2835 ALSA, bcm2835 ALSA Default Audio Device ... At this point we are able to rerun the concurrent aplay commands (adding -Ddac to specify the playback device to use) to verify ALSA configuration. If there is only one card on the machine you may use pcm.!default instead of pcm.!dac - there is less configuration to be done later since many ALSA applications will use the device called default by default. Furthermore on RPI you can explicitly disable the onboard sound card to leave us with only the IQaudIODAC board enabled (won't affect HDMI sound output) by commenting out #dtparam=audio=on in /boot/config.txt and rebooting.","title":"ALSA dmix configuration/setup"},{"location":"advanced/outputs-alsa/#config-with-dmix","text":"We will use the newly defined card named dac which uses the underlying hw:1 device as per /etc/asound.conf or ~/.asoundrc configuration. Note that the mixer_device is now required and must refer to the real device (see the slave.pcm value) and not the named device (ie dac ) that we created and are using for the card configuration value. For the final server configuration, we will use: audio { nickname = \"Computer\" type = \"alsa\" card=\"dac\" mixer=\"Analogue\" mixer_device=\"hw:1\" }","title":"Config with dmix"},{"location":"advanced/outputs-alsa/#setting-up-an-audio-equalizer","text":"There exists an ALSA equalizer plugin. On debian (incl Raspberry Pi) systems you can install this plugin by apt install libasound2-plugin-equal ; this is not currently available on Fedora (FC31) but can be easily built from source after installing the dependant ladspa package. Once installed the user must setup a virtual device and use this device in the server configuration. If you wish to use your hw:0 device for output: # /etc/asound.conf ctl.equal { type equal; # library /usr/lib64/ladspa/caps.so } pcm.equal { type plug; slave.pcm { type equal; ## must be plughw:x,y and not hw:x,y slave.pcm \"plughw:0,0\"; # library /usr/lib64/ladspa/caps.so } hint.description \"equalised device\" } and in owntone.conf alsa \"equal\" { nickname = \"Equalised Output\" # adjust accordingly for mixer with pvolume capability mixer = \"PCM\" mixer_device = \"hw:0\" } Using the web UI and on the outputs selection you should see an output called Equalised Output which you should select and set the volume. When starting playback for any audio tracks you should hopefully hear the output. In a terminal, run alsamixer -Dequal and you'll see the eqaliser - to test that this is all working, go and drop the upper frequencies and boosting the bass frequencies and give it a second - if this changes the sound profile from your speakers, well done, its done and you can adjust the equalizer as you desire. Note however, the equalizer appears to require a plughw device which means you cannnot use this equalizer with a dmix output chain.","title":"Setting up an Audio Equalizer"},{"location":"advanced/outputs-alsa/#troubleshooting","text":"Errors in log Failed to open configured mixer element when selecting output device Errors in log Invalid CTL or Failed to attach mixer when playing/adjusting volume mixer value is wrong. Verify name of mixer value in server config against the names from all devices capable of playback using amixer -c <card number> . Assume the device is card 1: (IFS=$'\\n' CARD=1 for i in $(amixer -c ${CARD} scontrols | awk -F\\' '{ print $2 }'); do amixer -c ${CARD} sget \"$i\" | grep Capabilities | grep -q pvolume && echo $i done ) Look at the names output and choose the one that fits. The outputs can be something like: # laptop Master Headphone Speaker PCM Mic Beep # RPI with no additional DAC, card = 0 PCM # RPI with additional DAC hat (IQAudioDAC, using a pcm512x chip) Analogue Digital No sound during playback - valid mixer/verified by aplay Check that the mixer is not muted or volume set to 0. Using the value of mixer as per server config and unmute or set volume to max. Assume the device is card 1 and mixer = Analogue : amixer -c 1 set Analogue unmute ## some mixers can not be muted resulting in \"invalid command\" amixer -c 1 set Analogue 100% An example of a device with volume turned all the way down - notice the Playback values are 0 [0%]`: Simple mixer control 'Analogue',0 Capabilities: pvolume Playback channels: Front Left - Front Right Limits: Playback 0 - 1 Mono: Front Left: Playback 0 [0%] [-6.00dB] Front Right: Playback 0 [0%] [-6.00dB] Server stops playing after moving to new track in paly queue, Error in log Could not open playback device The log contains these log lines: [2019-06-19 20:52:51] [ LOG] laudio: open '/dev/snd/pcmC0D0p' failed (-16)[2019-06-19 20:52:51] [ LOG] laudio: Could not open playback device: Device or resource busy [2019-06-19 20:52:51] [ LOG] laudio: Device 'hw' does not support quality (48000/16/2), falling back to default [2019-06-19 20:52:51] [ LOG] laudio: open '/dev/snd/pcmC0D0p' failed (-16)[2019-06-19 20:52:51] [ LOG] laudio: Could not open playback device: Device or resource busy [2019-06-19 20:52:51] [ LOG] laudio: ALSA device failed setting fallback quality[2019-06-19 20:52:51] [ LOG] player: The ALSA device 'Computer' FAILED If you have a RPI with a DAC hat with a pcm512x chip will affect you. This is because the server wants to open the audio device for the next audio track whilst current track is still playing but the hardware does not allow this - see the comments above regarding determining concurrrent playback. This error will occur for output hardware that do not support concurrent device open and the server plays 2 files of different bitrate (44.1khz and 48khz) back to back. If you observe the error, you will need to use the dmix configuration as mentioned above.","title":"Troubleshooting"},{"location":"advanced/outputs-pulse/","text":"OwnTone and Pulseaudio \u00b6 You have the choice of runnning Pulseaudio either in system mode or user mode. For headless servers, i.e. systems without desktop users, system mode is recommended. If there is a desktop user logged in most of the time, a setup with network access via localhost only for daemons is a more appropriate solution, since the normal user administration (with, e.g., pulseaudio -k ) works as advertised. Also, the user specific configuration for pulseaudio is preserved across sessions as expected. System mode User mode System Mode with Bluetooth support \u00b6 Credit: Rob Pope This guide was written based on headless Debian Jessie platforms. Most of the instructions will require that you are root. Step 1: Setting up Pulseaudio \u00b6 If you see a \"Connection refused\" error when starting the server, then you will probably need to setup Pulseaudio to run in system mode [1]. This means that the Pulseaudio daemon will be started during boot and be available to all users. How to start Pulseaudio depends on your distribution, but in many cases you will need to add a pulseaudio.service file to /etc/systemd/system with the following content: # systemd service file for Pulseaudio running in system mode [Unit] Description=Pulseaudio sound server Before=sound.target [Service] ExecStart=/usr/bin/pulseaudio --system --disallow-exit [Install] WantedBy=multi-user.target If you want Bluetooth support, you must also configure Pulseaudio to load the Bluetooth module. First install it (Debian: apt install pulseaudio-module-bluetooth ) and then add the following to /etc/pulse/system.pa: #### Enable Bluetooth .ifexists module-bluetooth-discover.so load-module module-bluetooth-discover .endif Now you need to make sure that Pulseaudio can communicate with the Bluetooth daemon through D-Bus. On Raspbian this is already enabled, and you can skip this step. Otherwise do one of the following: Add the pulse user to the bluetooth group: adduser pulse bluetooth Edit /etc/dbus-1/system.d/bluetooth.conf and change the policy for <policy context=\"default\"\\> to \"allow\" Phew, almost done with Pulseaudio! Now you should: enable system mode on boot with systemctl enable pulseaudio reboot (or at least restart dbus and pulseaudio) check that the Bluetooth module is loaded with pactl list modules short Step 2: Setting up the server \u00b6 Add the user the server is running as (typically \"owntone\") to the \"pulse-access\" group: adduser owntone pulse-access Now (re)start the server. Step 3: Adding a Bluetooth device \u00b6 To connect with the device, run bluetoothctl and then: power on agent on scan on **Note MAC address of BT Speaker** pair [MAC address] **Type Pin if prompted** trust [MAC address] connect [MAC address] Now the speaker should appear. You can also verify that Pulseaudio has detected the speaker with pactl list sinks short . User Mode with Network Access \u00b6 Credit: wolfmanx and this blog Step 1: Copy system pulseaudio configuration to the users home directory \u00b6 mkdir -p ~/.pulse cp /etc/pulse/default.pa ~/.pulse/ Step 2: Enable TCP access from localhost only \u00b6 Edit the file ~/.pulse/default.pa , adding the following line at the end: load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1 Step 3: Restart the pulseaudio deamon \u00b6 pulseaudio -k # OR pulseaudio -D Step 4: Adjust configuration file \u00b6 In the audio section of /etc/owntone.conf , set server to localhost : server = \"localhost\" [1] Note that Pulseaudio will warn against system mode. However, in this use case it is actually the solution recommended by the Pulseaudio folks themselves .","title":"Pulse audio"},{"location":"advanced/outputs-pulse/#owntone-and-pulseaudio","text":"You have the choice of runnning Pulseaudio either in system mode or user mode. For headless servers, i.e. systems without desktop users, system mode is recommended. If there is a desktop user logged in most of the time, a setup with network access via localhost only for daemons is a more appropriate solution, since the normal user administration (with, e.g., pulseaudio -k ) works as advertised. Also, the user specific configuration for pulseaudio is preserved across sessions as expected. System mode User mode","title":"OwnTone and Pulseaudio"},{"location":"advanced/outputs-pulse/#system-mode-with-bluetooth-support","text":"Credit: Rob Pope This guide was written based on headless Debian Jessie platforms. Most of the instructions will require that you are root.","title":"System Mode with Bluetooth support"},{"location":"advanced/outputs-pulse/#step-1-setting-up-pulseaudio","text":"If you see a \"Connection refused\" error when starting the server, then you will probably need to setup Pulseaudio to run in system mode [1]. This means that the Pulseaudio daemon will be started during boot and be available to all users. How to start Pulseaudio depends on your distribution, but in many cases you will need to add a pulseaudio.service file to /etc/systemd/system with the following content: # systemd service file for Pulseaudio running in system mode [Unit] Description=Pulseaudio sound server Before=sound.target [Service] ExecStart=/usr/bin/pulseaudio --system --disallow-exit [Install] WantedBy=multi-user.target If you want Bluetooth support, you must also configure Pulseaudio to load the Bluetooth module. First install it (Debian: apt install pulseaudio-module-bluetooth ) and then add the following to /etc/pulse/system.pa: #### Enable Bluetooth .ifexists module-bluetooth-discover.so load-module module-bluetooth-discover .endif Now you need to make sure that Pulseaudio can communicate with the Bluetooth daemon through D-Bus. On Raspbian this is already enabled, and you can skip this step. Otherwise do one of the following: Add the pulse user to the bluetooth group: adduser pulse bluetooth Edit /etc/dbus-1/system.d/bluetooth.conf and change the policy for <policy context=\"default\"\\> to \"allow\" Phew, almost done with Pulseaudio! Now you should: enable system mode on boot with systemctl enable pulseaudio reboot (or at least restart dbus and pulseaudio) check that the Bluetooth module is loaded with pactl list modules short","title":"Step 1: Setting up Pulseaudio"},{"location":"advanced/outputs-pulse/#step-2-setting-up-the-server","text":"Add the user the server is running as (typically \"owntone\") to the \"pulse-access\" group: adduser owntone pulse-access Now (re)start the server.","title":"Step 2: Setting up the server"},{"location":"advanced/outputs-pulse/#step-3-adding-a-bluetooth-device","text":"To connect with the device, run bluetoothctl and then: power on agent on scan on **Note MAC address of BT Speaker** pair [MAC address] **Type Pin if prompted** trust [MAC address] connect [MAC address] Now the speaker should appear. You can also verify that Pulseaudio has detected the speaker with pactl list sinks short .","title":"Step 3: Adding a Bluetooth device"},{"location":"advanced/outputs-pulse/#user-mode-with-network-access","text":"Credit: wolfmanx and this blog","title":"User Mode with Network Access"},{"location":"advanced/outputs-pulse/#step-1-copy-system-pulseaudio-configuration-to-the-users-home-directory","text":"mkdir -p ~/.pulse cp /etc/pulse/default.pa ~/.pulse/","title":"Step 1: Copy system pulseaudio configuration to the users home directory"},{"location":"advanced/outputs-pulse/#step-2-enable-tcp-access-from-localhost-only","text":"Edit the file ~/.pulse/default.pa , adding the following line at the end: load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1","title":"Step 2: Enable TCP access from localhost only"},{"location":"advanced/outputs-pulse/#step-3-restart-the-pulseaudio-deamon","text":"pulseaudio -k # OR pulseaudio -D","title":"Step 3: Restart the pulseaudio deamon"},{"location":"advanced/outputs-pulse/#step-4-adjust-configuration-file","text":"In the audio section of /etc/owntone.conf , set server to localhost : server = \"localhost\" [1] Note that Pulseaudio will warn against system mode. However, in this use case it is actually the solution recommended by the Pulseaudio folks themselves .","title":"Step 4: Adjust configuration file"},{"location":"advanced/radio-streams/","text":"OwnTone and Radio Stream tweaking \u00b6 Radio streams have many different ways in how metadata is sent. Many should just work as expected, but a few may require some tweaking. If you are not seeing expected title, track, artist, artwork in clients or web UI, the following may help. First, understand what and how the particular stream is sending information. ffprobe is a command that can be used to interegrate most of the stream information. ffprobe <http://stream.url> should give you some useful output, look at the Metadata section, below is an example. Metadata: icy-br : 320 icy-description : DJ-mixed blend of modern and classic rock, electronica, world music, and more. Always 100% commercial-free icy-genre : Eclectic icy-name : Radio Paradise (320k aac) icy-pub : 1 icy-url : https://radioparadise.com StreamTitle : Depeche Mode - Strangelove StreamUrl : http://img.radioparadise.com/covers/l/B000002LCI.jpg In the example above, all tags are populated with correct information, no modifications to the server configuration should be needed. Note that StreamUrl points to the artwork image file. Below is another example that will require some tweaks to the server, Notice icy-name is blank and StreamUrl doesn't point to an image. Metadata: icy-br : 127 icy-pub : 0 icy-description : Unspecified description icy-url : icy-genre : various icy-name : StreamTitle : Pour Some Sugar On Me - Def Leppard StreamUrl : https://radio.stream.domain/api9/eventdata/49790578 In the above, first fix is the blank name, second is the image artwork. 1) Set stream name/title via the M3U file \u00b6 Set the name with an EXTINF tag in the m3u playlist file: #EXTM3U #EXTINF:-1, - My Radio Stream Name http://radio.stream.domain/stream.url The format is basically #EXTINF:<length>, <Artist Name> - <Artist Title> . Length is -1 since it's a stream, <Artist Name> was left blank since StreamTitle is accurate in the Metadata but <Artist Title> was set to My Radio Stream Name since icy-name was blank. 2) StreamUrl is a JSON file with metadata \u00b6 If StreamUrl does not point directly to an artwork file then the link may be to a json file that contains an artwork link. If so, you can make the server download the file automatically and search for an artwork link, and also track duration. Try to download the file, e.g. with curl \"https://radio.stream.domain/api9/eventdata/49790578\" . Let's assume you get something like this: { \"eventId\": 49793707, \"eventStart\": \"2020-05-08 16:23:03\", \"eventFinish\": \"2020-05-08 16:27:21\", \"eventDuration\": 254, \"eventType\": \"Song\", \"eventSongTitle\": \"Pour Some Sugar On Me\", \"eventSongArtist\": \"Def Leppard\", \"eventImageUrl\": \"https://radio.stream.domain/artist/1-1/320x320/562.jpg?ver=1465083491\", \"eventImageUrlSmall\": \"https://radio.stream.domain/artist/1-1/160x160/562.jpg?ver=1465083491\", \"eventAppleMusicUrl\": \"https://geo.itunes.apple.com/dk/album/530707298?i=530707313\" } In this case, you would need to tell the server to look for \"eventDuration\" and \"eventImageUrl\" (or just \"duration\" and \"url\"). You can do that like this: curl -X PUT \"http://localhost:3689/api/settings/misc/streamurl_keywords_length\" --data \"{\\\"name\\\":\\\"streamurl_keywords_length\\\",\\\"value\\\":\\\"duration\\\"}\" curl -X PUT \"http://localhost:3689/api/settings/misc/streamurl_keywords_artwork_url\" --data \"{\\\"name\\\":\\\"streamurl_keywords_artwork_url\\\",\\\"value\\\":\\\"url\\\"} If you want multiple search phrases then comma separate, e.g. \"duration,length\". 3) Set metadata with a custom script \u00b6 If your radio station publishes metadata via another method than the above, e.g. just on their web site, then you will have to write a script that pulls the metadata and then pushes it to the server. To update metadata for the currently playing radio station use something like this JSON API request: curl -X PUT \"http://localhost:3689/api/queue/items/now_playing?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\" If your radio station is not returning any artwork links, you can also just make a static artwork by placing a png/jpg in the same directory as the m3u, and with the same name, e.g. My Radio Stream.jpg for My Radio Stream.m3u .","title":"Radio streams"},{"location":"advanced/radio-streams/#owntone-and-radio-stream-tweaking","text":"Radio streams have many different ways in how metadata is sent. Many should just work as expected, but a few may require some tweaking. If you are not seeing expected title, track, artist, artwork in clients or web UI, the following may help. First, understand what and how the particular stream is sending information. ffprobe is a command that can be used to interegrate most of the stream information. ffprobe <http://stream.url> should give you some useful output, look at the Metadata section, below is an example. Metadata: icy-br : 320 icy-description : DJ-mixed blend of modern and classic rock, electronica, world music, and more. Always 100% commercial-free icy-genre : Eclectic icy-name : Radio Paradise (320k aac) icy-pub : 1 icy-url : https://radioparadise.com StreamTitle : Depeche Mode - Strangelove StreamUrl : http://img.radioparadise.com/covers/l/B000002LCI.jpg In the example above, all tags are populated with correct information, no modifications to the server configuration should be needed. Note that StreamUrl points to the artwork image file. Below is another example that will require some tweaks to the server, Notice icy-name is blank and StreamUrl doesn't point to an image. Metadata: icy-br : 127 icy-pub : 0 icy-description : Unspecified description icy-url : icy-genre : various icy-name : StreamTitle : Pour Some Sugar On Me - Def Leppard StreamUrl : https://radio.stream.domain/api9/eventdata/49790578 In the above, first fix is the blank name, second is the image artwork.","title":"OwnTone and Radio Stream tweaking"},{"location":"advanced/radio-streams/#1-set-stream-nametitle-via-the-m3u-file","text":"Set the name with an EXTINF tag in the m3u playlist file: #EXTM3U #EXTINF:-1, - My Radio Stream Name http://radio.stream.domain/stream.url The format is basically #EXTINF:<length>, <Artist Name> - <Artist Title> . Length is -1 since it's a stream, <Artist Name> was left blank since StreamTitle is accurate in the Metadata but <Artist Title> was set to My Radio Stream Name since icy-name was blank.","title":"1) Set stream name/title via the M3U file"},{"location":"advanced/radio-streams/#2-streamurl-is-a-json-file-with-metadata","text":"If StreamUrl does not point directly to an artwork file then the link may be to a json file that contains an artwork link. If so, you can make the server download the file automatically and search for an artwork link, and also track duration. Try to download the file, e.g. with curl \"https://radio.stream.domain/api9/eventdata/49790578\" . Let's assume you get something like this: { \"eventId\": 49793707, \"eventStart\": \"2020-05-08 16:23:03\", \"eventFinish\": \"2020-05-08 16:27:21\", \"eventDuration\": 254, \"eventType\": \"Song\", \"eventSongTitle\": \"Pour Some Sugar On Me\", \"eventSongArtist\": \"Def Leppard\", \"eventImageUrl\": \"https://radio.stream.domain/artist/1-1/320x320/562.jpg?ver=1465083491\", \"eventImageUrlSmall\": \"https://radio.stream.domain/artist/1-1/160x160/562.jpg?ver=1465083491\", \"eventAppleMusicUrl\": \"https://geo.itunes.apple.com/dk/album/530707298?i=530707313\" } In this case, you would need to tell the server to look for \"eventDuration\" and \"eventImageUrl\" (or just \"duration\" and \"url\"). You can do that like this: curl -X PUT \"http://localhost:3689/api/settings/misc/streamurl_keywords_length\" --data \"{\\\"name\\\":\\\"streamurl_keywords_length\\\",\\\"value\\\":\\\"duration\\\"}\" curl -X PUT \"http://localhost:3689/api/settings/misc/streamurl_keywords_artwork_url\" --data \"{\\\"name\\\":\\\"streamurl_keywords_artwork_url\\\",\\\"value\\\":\\\"url\\\"} If you want multiple search phrases then comma separate, e.g. \"duration,length\".","title":"2) StreamUrl is a JSON file with metadata"},{"location":"advanced/radio-streams/#3-set-metadata-with-a-custom-script","text":"If your radio station publishes metadata via another method than the above, e.g. just on their web site, then you will have to write a script that pulls the metadata and then pushes it to the server. To update metadata for the currently playing radio station use something like this JSON API request: curl -X PUT \"http://localhost:3689/api/queue/items/now_playing?title=Awesome%20title&artwork_url=http%3A%2F%2Fgyfgafguf.dk%2Fimages%2Fpige3.jpg\" If your radio station is not returning any artwork links, you can also just make a static artwork by placing a png/jpg in the same directory as the m3u, and with the same name, e.g. My Radio Stream.jpg for My Radio Stream.m3u .","title":"3) Set metadata with a custom script"},{"location":"advanced/remote-access/","text":"Remote access \u00b6 It is possible to access a shared library over the internet from a DAAP client like iTunes. You must have remote access to the host machine. First log in to the host and forward port 3689 to your local machine. You now need to broadcast the daap service to iTunes on your local machine. On macOS the command is: dns-sd -P iTunesServer _daap._tcp local 3689 localhost.local 127.0.0.1 \"ffid=12345\" The ffid key is required but its value does not matter. Your library will now appear as 'iTunesServer' in iTunes. You can also access your library remotely using something like Zerotier. See this guide for details.","title":"Remote access"},{"location":"advanced/remote-access/#remote-access","text":"It is possible to access a shared library over the internet from a DAAP client like iTunes. You must have remote access to the host machine. First log in to the host and forward port 3689 to your local machine. You now need to broadcast the daap service to iTunes on your local machine. On macOS the command is: dns-sd -P iTunesServer _daap._tcp local 3689 localhost.local 127.0.0.1 \"ffid=12345\" The ffid key is required but its value does not matter. Your library will now appear as 'iTunesServer' in iTunes. You can also access your library remotely using something like Zerotier. See this guide for details.","title":"Remote access"},{"location":"clients/cli/","text":"Command line \u00b6 You can choose between: a MPD command line client (easiest) like mpc curl with OwnTone's JSON API (see JSON API docs ) curl with DAAP/DACP commands (hardest) Here is an example of how to use curl with DAAP/DACP. Say you have a playlist with a radio station, and you want to make a script that starts playback of that station: Run sqlite3 [your OwnTone db] . Use select id,title from files to get the id of the radio station, and use select id,title from playlists to get the id of the playlist. Convert the two ids to hex. Put the following lines in the script with the relevant ids inserted (also observe that you must use a session-id < 100, and that you must login and logout): curl \"http://localhost:3689/login?pairing-guid=0x1&request-session-id=50\" curl \"http://localhost:3689/ctrl-int/1/playspec?database-spec='dmap.persistentid:0x1'&container-spec='dmap.persistentid:0x[PLAYLIST-ID]'&container-item-spec='dmap.containeritemid:0x[FILE ID]'&session-id=50\" curl \"http://localhost:3689/logout?session-id=50\"","title":"CLI"},{"location":"clients/cli/#command-line","text":"You can choose between: a MPD command line client (easiest) like mpc curl with OwnTone's JSON API (see JSON API docs ) curl with DAAP/DACP commands (hardest) Here is an example of how to use curl with DAAP/DACP. Say you have a playlist with a radio station, and you want to make a script that starts playback of that station: Run sqlite3 [your OwnTone db] . Use select id,title from files to get the id of the radio station, and use select id,title from playlists to get the id of the playlist. Convert the two ids to hex. Put the following lines in the script with the relevant ids inserted (also observe that you must use a session-id < 100, and that you must login and logout): curl \"http://localhost:3689/login?pairing-guid=0x1&request-session-id=50\" curl \"http://localhost:3689/ctrl-int/1/playspec?database-spec='dmap.persistentid:0x1'&container-spec='dmap.persistentid:0x[PLAYLIST-ID]'&container-item-spec='dmap.containeritemid:0x[FILE ID]'&session-id=50\" curl \"http://localhost:3689/logout?session-id=50\"","title":"Command line"},{"location":"clients/mpd/","text":"MPD clients \u00b6 You can - to some extent - use clients for MPD to control OwnTone. By default OwnTone listens on port 6600 for MPD clients. You can change this in the configuration file. Currently only a subset of the commands offered by MPD (see MPD protocol documentation ) are supported. Due to some differences between OwnTone and MPD not all commands will act the same way they would running MPD: crossfade, mixrampdb, mixrampdelay and replaygain will have no effect single, repeat: unlike MPD, OwnTone does not support setting single and repeat separately on/off, instead repeat off, repeat all and repeat single are supported. Thus setting single on will result in repeat single, repeat on results in repeat all. The following table shows what is working for a selection of MPD clients: Client Type Status mpc CLI Working commands: mpc, add, crop, current, del (ranges are not yet supported), play, next, prev (behaves like cdprev), pause, toggle, cdprev, seek, clear, outputs, enable, disable, playlist, ls, load, volume, repeat, random, single, search, find, list, update (initiates an init-rescan, the path argument is not supported) ympd Web Everything except \"add stream\" should work","title":"MPD clients"},{"location":"clients/mpd/#mpd-clients","text":"You can - to some extent - use clients for MPD to control OwnTone. By default OwnTone listens on port 6600 for MPD clients. You can change this in the configuration file. Currently only a subset of the commands offered by MPD (see MPD protocol documentation ) are supported. Due to some differences between OwnTone and MPD not all commands will act the same way they would running MPD: crossfade, mixrampdb, mixrampdelay and replaygain will have no effect single, repeat: unlike MPD, OwnTone does not support setting single and repeat separately on/off, instead repeat off, repeat all and repeat single are supported. Thus setting single on will result in repeat single, repeat on results in repeat all. The following table shows what is working for a selection of MPD clients: Client Type Status mpc CLI Working commands: mpc, add, crop, current, del (ranges are not yet supported), play, next, prev (behaves like cdprev), pause, toggle, cdprev, seek, clear, outputs, enable, disable, playlist, ls, load, volume, repeat, random, single, search, find, list, update (initiates an init-rescan, the path argument is not supported) ympd Web Everything except \"add stream\" should work","title":"MPD clients"},{"location":"clients/remote/","text":"Using Remote \u00b6 Remote gets a list of output devices from the server; this list includes any and all devices on the network we know of that advertise AirPlay: AirPort Express, Apple TV, ... It also includes the local audio output, that is, the sound card on the server (even if there is no soundcard). OwnTone remembers your selection and the individual volume for each output device; selected devices will be automatically re-selected, except if they return online during playback. Pairing \u00b6 Open the web interface Start Remote, go to Settings, Add Library Enter the pair code in the web interface (update the page with F5 if it does not automatically pick up the pairing request) If Remote doesn't connect to OwnTone after you entered the pairing code something went wrong. Check the log file to see the error message. Here are some common reasons: You did not enter the correct pairing code You will see an error in the log about pairing failure with a HTTP response code that is not 0. Solution: Try again. No response from Remote, possibly a network issue If you see an error in the log with either: a HTTP response code that is 0 \"Empty pairing request callback\" it means that OwnTone could not establish a connection to Remote. This might be a network issue, your router may not be allowing multicast between the Remote device and the host OwnTone is running on. Solution 1: Sometimes it resolves the issue if you force Remote to quit, restart it and do the pairing proces again. Another trick is to establish some other connection (eg SSH) from the iPod/iPhone/iPad to the host. Solution 2: Check your router settings if you can whitelist multicast addresses under IGMP settings. For Apple Bonjour, setting a multicast address of 224.0.0.251 and a netmask of 255.255.255.255 should work. Otherwise try using avahi-browse for troubleshooting: in a terminal, run avahi-browse -r -k _touch-remote._tcp start Remote, goto Settings, Add Library after a couple seconds at most, you should get something similar to this: + ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3 _touch-remote._tcp local = ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3 _touch-remote._tcp local hostname = [Foobar.local] address = [192.168.1.1] port = [49160] txt = [\"DvTy=iPod touch\" \"RemN=Remote\" \"txtvers=1\" \"RemV=10000\" \"Pair=FAEA410630AEC05E\" \"DvNm=Foobar\"] Hit Ctrl-C to terminate avahi-browse. To check for network issues you can try to connect to address and port with telnet.","title":"Remote"},{"location":"clients/remote/#using-remote","text":"Remote gets a list of output devices from the server; this list includes any and all devices on the network we know of that advertise AirPlay: AirPort Express, Apple TV, ... It also includes the local audio output, that is, the sound card on the server (even if there is no soundcard). OwnTone remembers your selection and the individual volume for each output device; selected devices will be automatically re-selected, except if they return online during playback.","title":"Using Remote"},{"location":"clients/remote/#pairing","text":"Open the web interface Start Remote, go to Settings, Add Library Enter the pair code in the web interface (update the page with F5 if it does not automatically pick up the pairing request) If Remote doesn't connect to OwnTone after you entered the pairing code something went wrong. Check the log file to see the error message. Here are some common reasons: You did not enter the correct pairing code You will see an error in the log about pairing failure with a HTTP response code that is not 0. Solution: Try again. No response from Remote, possibly a network issue If you see an error in the log with either: a HTTP response code that is 0 \"Empty pairing request callback\" it means that OwnTone could not establish a connection to Remote. This might be a network issue, your router may not be allowing multicast between the Remote device and the host OwnTone is running on. Solution 1: Sometimes it resolves the issue if you force Remote to quit, restart it and do the pairing proces again. Another trick is to establish some other connection (eg SSH) from the iPod/iPhone/iPad to the host. Solution 2: Check your router settings if you can whitelist multicast addresses under IGMP settings. For Apple Bonjour, setting a multicast address of 224.0.0.251 and a netmask of 255.255.255.255 should work. Otherwise try using avahi-browse for troubleshooting: in a terminal, run avahi-browse -r -k _touch-remote._tcp start Remote, goto Settings, Add Library after a couple seconds at most, you should get something similar to this: + ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3 _touch-remote._tcp local = ath0 IPv4 59eff13ea2f98dbbef6c162f9df71b784a3ef9a3 _touch-remote._tcp local hostname = [Foobar.local] address = [192.168.1.1] port = [49160] txt = [\"DvTy=iPod touch\" \"RemN=Remote\" \"txtvers=1\" \"RemV=10000\" \"Pair=FAEA410630AEC05E\" \"DvNm=Foobar\"] Hit Ctrl-C to terminate avahi-browse. To check for network issues you can try to connect to address and port with telnet.","title":"Pairing"},{"location":"clients/supported-clients/","text":"Supported clients \u00b6 OwnTone supports these kinds of clients: DAAP clients, like iTunes or Rhythmbox Remote clients, like Apple Remote or compatibles for Android/Windows Phone AirPlay devices, like AirPort Express, Shairport and various AirPlay speakers Chromecast devices MPD clients, like mpc MP3 network stream clients, like VLC and almost any other music player RSP clients, like Roku Soundbridge Like iTunes, you can control OwnTone with Remote and stream your music to AirPlay devices. A single OwnTone instance can handle several clients concurrently, regardless of the protocol. By default all clients on 192.168.* (and the ipv6 equivalent) are allowed to connect without authentication. You can change that in the configuration file. Here is a list of working and non-working DAAP and Remote clients. The list is probably obsolete when you read it :-) Client Developer Type Platform Working (vers.) iTunes Apple DAAP Win Yes (12.10.1) Apple Music Apple DAAP MacOS Yes Rhythmbox Gnome DAAP Linux Yes Diapente diapente DAAP Android Yes WinAmp DAAPClient WardFamily DAAP WinAmp Yes Amarok w/DAAP plugin KDE DAAP Linux/Win Yes (2.8.0) Banshee DAAP Linux/Win/OSX No (2.6.2) jtunes4 DAAP Java No Firefly Client (DAAP) Java No Remote Apple Remote iOS Yes (4.3) Retune SquallyDoc Remote Android Yes (3.5.23) TunesRemote+ Melloware Remote Android Yes (2.5.3) Remote for iTunes Hyperfine Remote Android Yes Remote for Windows Phone Komodex Remote Windows Phone Yes (2.2.1.0) TunesRemote SE Remote Java Yes (r108) rtRemote for Windows bizmodeller Remote Windows Yes (1.2.0.67)","title":"Supported clients"},{"location":"clients/supported-clients/#supported-clients","text":"OwnTone supports these kinds of clients: DAAP clients, like iTunes or Rhythmbox Remote clients, like Apple Remote or compatibles for Android/Windows Phone AirPlay devices, like AirPort Express, Shairport and various AirPlay speakers Chromecast devices MPD clients, like mpc MP3 network stream clients, like VLC and almost any other music player RSP clients, like Roku Soundbridge Like iTunes, you can control OwnTone with Remote and stream your music to AirPlay devices. A single OwnTone instance can handle several clients concurrently, regardless of the protocol. By default all clients on 192.168.* (and the ipv6 equivalent) are allowed to connect without authentication. You can change that in the configuration file. Here is a list of working and non-working DAAP and Remote clients. The list is probably obsolete when you read it :-) Client Developer Type Platform Working (vers.) iTunes Apple DAAP Win Yes (12.10.1) Apple Music Apple DAAP MacOS Yes Rhythmbox Gnome DAAP Linux Yes Diapente diapente DAAP Android Yes WinAmp DAAPClient WardFamily DAAP WinAmp Yes Amarok w/DAAP plugin KDE DAAP Linux/Win Yes (2.8.0) Banshee DAAP Linux/Win/OSX No (2.6.2) jtunes4 DAAP Java No Firefly Client (DAAP) Java No Remote Apple Remote iOS Yes (4.3) Retune SquallyDoc Remote Android Yes (3.5.23) TunesRemote+ Melloware Remote Android Yes (2.5.3) Remote for iTunes Hyperfine Remote Android Yes Remote for Windows Phone Komodex Remote Windows Phone Yes (2.2.1.0) TunesRemote SE Remote Java Yes (r108) rtRemote for Windows bizmodeller Remote Windows Yes (1.2.0.67)","title":"Supported clients"},{"location":"clients/web-interface/","text":"OwnTone web interface \u00b6 Mobile friendly player web interface for OwnTone build with Vue.js , Bulma . You can find the web interface at http://owntone.local:3689 or alternatively at http://[your_server_address_here]:3689 . Use the web interface to control playback, trigger manual library rescans, pair with remotes, select speakers, authenticate with Spotify, etc. Screenshots \u00b6 Usage \u00b6 You can find OwnTone's web interface at http://owntone.local:3689 or alternatively at http://[your_server_address_here]:3689 . Build Setup \u00b6 The source is located in the web-src folder. cd web-src The web interface is built with Vite , makes use of Prettier for code formatting and ESLint for code linting (the project was set up following the guide ESLint and Prettier with Vite and Vue.js 3 # install dependencies npm install # Serve with hot reload at localhost:3000 # (assumes that OwnTone server is running on localhost:3689) npm run serve # Serve with hot reload at localhost:3000 # (with remote OwnTone server reachable under owntone.local:3689) VITE_OWNTONE_URL = http://owntone.local:3689 npm run serve # Build for production with minification (will update web interface # in \"../htdocs\") npm run build # Format code npm run format # Lint code (and fix errors that can be automatically fixed) npm run lint After running npm run serve the web interface is reachable at localhost:3000 . By default it expects owntone to be running at localhost:3689 and proxies all JSON API calls to this location. If the server is running at a different location you have to set the env variable VITE_OWNTONE_URL .","title":"Web interface"},{"location":"clients/web-interface/#owntone-web-interface","text":"Mobile friendly player web interface for OwnTone build with Vue.js , Bulma . You can find the web interface at http://owntone.local:3689 or alternatively at http://[your_server_address_here]:3689 . Use the web interface to control playback, trigger manual library rescans, pair with remotes, select speakers, authenticate with Spotify, etc.","title":"OwnTone web interface"},{"location":"clients/web-interface/#screenshots","text":"","title":"Screenshots"},{"location":"clients/web-interface/#usage","text":"You can find OwnTone's web interface at http://owntone.local:3689 or alternatively at http://[your_server_address_here]:3689 .","title":"Usage"},{"location":"clients/web-interface/#build-setup","text":"The source is located in the web-src folder. cd web-src The web interface is built with Vite , makes use of Prettier for code formatting and ESLint for code linting (the project was set up following the guide ESLint and Prettier with Vite and Vue.js 3 # install dependencies npm install # Serve with hot reload at localhost:3000 # (assumes that OwnTone server is running on localhost:3689) npm run serve # Serve with hot reload at localhost:3000 # (with remote OwnTone server reachable under owntone.local:3689) VITE_OWNTONE_URL = http://owntone.local:3689 npm run serve # Build for production with minification (will update web interface # in \"../htdocs\") npm run build # Format code npm run format # Lint code (and fix errors that can be automatically fixed) npm run lint After running npm run serve the web interface is reachable at localhost:3000 . By default it expects owntone to be running at localhost:3689 and proxies all JSON API calls to this location. If the server is running at a different location you have to set the env variable VITE_OWNTONE_URL .","title":"Build Setup"},{"location":"integrations/lastfm/","text":"LastFM \u00b6 You can have OwnTone scrobble the music you listen to. To set up scrobbling go to the web interface and authorize OwnTone with your LastFM credentials. OwnTone will not store your LastFM username/password, only the session key. The session key does not expire.","title":"LastFM"},{"location":"integrations/lastfm/#lastfm","text":"You can have OwnTone scrobble the music you listen to. To set up scrobbling go to the web interface and authorize OwnTone with your LastFM credentials. OwnTone will not store your LastFM username/password, only the session key. The session key does not expire.","title":"LastFM"},{"location":"integrations/spotify/","text":"Spotify \u00b6 OwnTone has built-in support for playback of the tracks in your Spotify library. You must have a Spotify premium account. If you normally log into Spotify with your Facebook account you must first go to Spotify's web site where you can get the Spotify username and password that matches your account. You must also make sure that your browser can reach OwnTone's web interface via the address http://owntone.local:3689 . Try it right now! That is where Spotify's OAuth page will redirect your browser with the token that OwnTone needs, so it must work. The address is announced by the server via mDNS, but if that for some reason doesn't work then configure it via router or .hosts file. You can remove it again after completing the login. To authorize OwnTone, open the web interface, locate Settings > Online Services and then click the Authorize button. You will then be sent to Spotify's authorization service, which will send you back to the web interface after you have given the authorization. Spotify no longer automatically notifies clients about library updates, so you have to trigger updates manually. You can for instance set up a cron job that runs /usr/bin/curl http://localhost:3689/api/update To logout and remove Spotify tracks + credentials make a request to http://[your_server_address_here]:3689/api/spotify-logout . Limitations: You will not be able to do any playlist management through OwnTone - use a Spotify client for that. You also can only listen to your music by letting OwnTone do the playback - so that means you can't stream to DAAP clients (e.g. iTunes) and RSP clients. Via librespot/spocon \u00b6 You can also use OwnTone with one of the various incarnations of librespot . This adds librespot as a selectable metaspeaker in Spotify's client, and when you start playback, librespot can be configured to start writing audio to a pipe that you have added to your library. This will be detected by OwnTone that then starts playback. You can also have a pipe for metadata and playback events, e.g. volume changes. The easiest way of accomplishing this may be with Spocon , since it requires minimal configuration. After installing, create two pipes (with mkfifo) and set the configuration in the player section: # Audio output device (MIXER, PIPE, STDOUT) output = \"PIPE\" # Output raw (signed) PCM to this file (`player.output` must be PIPE) pipe = \"/srv/music/spotify\" # Output metadata in Shairport Sync format (https://github.com/mikebrady/shairport-sync-metadata-reader) metadataPipe = \"/srv/music/spotify.metadata\"","title":"Spotify"},{"location":"integrations/spotify/#spotify","text":"OwnTone has built-in support for playback of the tracks in your Spotify library. You must have a Spotify premium account. If you normally log into Spotify with your Facebook account you must first go to Spotify's web site where you can get the Spotify username and password that matches your account. You must also make sure that your browser can reach OwnTone's web interface via the address http://owntone.local:3689 . Try it right now! That is where Spotify's OAuth page will redirect your browser with the token that OwnTone needs, so it must work. The address is announced by the server via mDNS, but if that for some reason doesn't work then configure it via router or .hosts file. You can remove it again after completing the login. To authorize OwnTone, open the web interface, locate Settings > Online Services and then click the Authorize button. You will then be sent to Spotify's authorization service, which will send you back to the web interface after you have given the authorization. Spotify no longer automatically notifies clients about library updates, so you have to trigger updates manually. You can for instance set up a cron job that runs /usr/bin/curl http://localhost:3689/api/update To logout and remove Spotify tracks + credentials make a request to http://[your_server_address_here]:3689/api/spotify-logout . Limitations: You will not be able to do any playlist management through OwnTone - use a Spotify client for that. You also can only listen to your music by letting OwnTone do the playback - so that means you can't stream to DAAP clients (e.g. iTunes) and RSP clients.","title":"Spotify"},{"location":"integrations/spotify/#via-librespotspocon","text":"You can also use OwnTone with one of the various incarnations of librespot . This adds librespot as a selectable metaspeaker in Spotify's client, and when you start playback, librespot can be configured to start writing audio to a pipe that you have added to your library. This will be detected by OwnTone that then starts playback. You can also have a pipe for metadata and playback events, e.g. volume changes. The easiest way of accomplishing this may be with Spocon , since it requires minimal configuration. After installing, create two pipes (with mkfifo) and set the configuration in the player section: # Audio output device (MIXER, PIPE, STDOUT) output = \"PIPE\" # Output raw (signed) PCM to this file (`player.output` must be PIPE) pipe = \"/srv/music/spotify\" # Output metadata in Shairport Sync format (https://github.com/mikebrady/shairport-sync-metadata-reader) metadataPipe = \"/srv/music/spotify.metadata\"","title":"Via librespot/spocon"},{"location":"outputs/airplay/","text":"AirPlay devices/speakers \u00b6 OwnTone will discover the AirPlay devices available on your network. For devices that are password-protected, the device's AirPlay name and password must be given in the configuration file. See the sample configuration file for the syntax. If your Apple TV requires device verification (always required by Apple TV4 with tvOS 10.2) then you can do that through Settings > Remotes & Outputs in the web interface: Select the device and then enter the PIN that the Apple TV displays. If your speaker is silent when you start playback, and there is no obvious error message in the log, you can try disabling ipv6 in the config. Some speakers announce that they support ipv6, but in fact don't (at least not with forked- daapd). If the speaker becomes unselected when you start playback, and you in the log see \"ANNOUNCE request failed in session startup: 400 Bad Request\", then try the Apple Home app > Allow Speakers & TV Access > Anyone On the Same Network (or Everyone).","title":"Airplay"},{"location":"outputs/airplay/#airplay-devicesspeakers","text":"OwnTone will discover the AirPlay devices available on your network. For devices that are password-protected, the device's AirPlay name and password must be given in the configuration file. See the sample configuration file for the syntax. If your Apple TV requires device verification (always required by Apple TV4 with tvOS 10.2) then you can do that through Settings > Remotes & Outputs in the web interface: Select the device and then enter the PIN that the Apple TV displays. If your speaker is silent when you start playback, and there is no obvious error message in the log, you can try disabling ipv6 in the config. Some speakers announce that they support ipv6, but in fact don't (at least not with forked- daapd). If the speaker becomes unselected when you start playback, and you in the log see \"ANNOUNCE request failed in session startup: 400 Bad Request\", then try the Apple Home app > Allow Speakers & TV Access > Anyone On the Same Network (or Everyone).","title":"AirPlay devices/speakers"},{"location":"outputs/chromecast/","text":"Chromecast \u00b6 OwnTone will discover Chromecast devices available on your network, and you can then select the device as a speaker. There is no configuration required.","title":"Chromecast"},{"location":"outputs/chromecast/#chromecast","text":"OwnTone will discover Chromecast devices available on your network, and you can then select the device as a speaker. There is no configuration required.","title":"Chromecast"},{"location":"outputs/local-audio/","text":"Local audio \u00b6 Local audio through ALSA \u00b6 In the config file, you can select ALSA for local audio. This is the default. When using ALSA, the server will try to syncronize playback with AirPlay. You can adjust the syncronization in the config file. For most setups the default values in the config file should work. If they don't, there is help here Local audio, Bluetooth and more through Pulseaudio \u00b6 In the config file, you can select Pulseaudio for local audio. In addition to local audio, Pulseaudio also supports an array of other targets, e.g. Bluetooth or DLNA. However, Pulseaudio does require some setup, so here is a separate page with some help on that: Pulse audio Note that if you select Pulseaudio the \"card\" setting in the config file has no effect. Instead all soundcards detected by Pulseaudio will be listed as speakers by OwnTone. You can adjust the latency of Pulseaudio playback in the config file.","title":"Local audio"},{"location":"outputs/local-audio/#local-audio","text":"","title":"Local audio"},{"location":"outputs/local-audio/#local-audio-through-alsa","text":"In the config file, you can select ALSA for local audio. This is the default. When using ALSA, the server will try to syncronize playback with AirPlay. You can adjust the syncronization in the config file. For most setups the default values in the config file should work. If they don't, there is help here","title":"Local audio through ALSA"},{"location":"outputs/local-audio/#local-audio-bluetooth-and-more-through-pulseaudio","text":"In the config file, you can select Pulseaudio for local audio. In addition to local audio, Pulseaudio also supports an array of other targets, e.g. Bluetooth or DLNA. However, Pulseaudio does require some setup, so here is a separate page with some help on that: Pulse audio Note that if you select Pulseaudio the \"card\" setting in the config file has no effect. Instead all soundcards detected by Pulseaudio will be listed as speakers by OwnTone. You can adjust the latency of Pulseaudio playback in the config file.","title":"Local audio, Bluetooth and more through Pulseaudio"},{"location":"outputs/streaming/","text":"MP3 network streaming (streaming to iOS) \u00b6 You can listen to audio being played by OwnTone by opening this network stream address in pretty much any music player: http://[your hostname/ip address]:3689/stream.mp3 This is currently the only way of listening to your audio on iOS devices, since Apple does not allow AirPlay receiver apps, and because Apple Home Sharing cannot be supported by OwnTone. So what you can do instead is install a music player app like VLC, connect to the stream and control playback with Remote. In the speaker selection list, clicking on the icon should start the stream playing in the background on browsers that support that. Note that MP3 encoding must be supported by ffmpeg/libav for this to work. If it is not available you will see a message in the log file. In Debian/Ubuntu you get MP3 encoding support by installing the package \"libavcodec-extra\".","title":"Streaming"},{"location":"outputs/streaming/#mp3-network-streaming-streaming-to-ios","text":"You can listen to audio being played by OwnTone by opening this network stream address in pretty much any music player: http://[your hostname/ip address]:3689/stream.mp3 This is currently the only way of listening to your audio on iOS devices, since Apple does not allow AirPlay receiver apps, and because Apple Home Sharing cannot be supported by OwnTone. So what you can do instead is install a music player app like VLC, connect to the stream and control playback with Remote. In the speaker selection list, clicking on the icon should start the stream playing in the background on browsers that support that. Note that MP3 encoding must be supported by ffmpeg/libav for this to work. If it is not available you will see a message in the log file. In Debian/Ubuntu you get MP3 encoding support by installing the package \"libavcodec-extra\".","title":"MP3 network streaming (streaming to iOS)"}]}